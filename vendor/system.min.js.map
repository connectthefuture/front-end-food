{"version":3,"sources":["system.js"],"names":["bootstrap","__global","addToError","err","msg","newErr","Error","message","fileName","lineNumber","isBrowser","stack","__eval","source","debugName","context","Function","call","e","Module","Loader","options","this","_loader","loaderObj","loads","modules","importPromises","moduleRecords","defineProperty","get","SystemLoader","paths","applyPaths","name","wildcard","pathMatch","maxWildcardPrefixLen","p","pathParts","split","length","TypeError","wildcardPrefixLen","substr","outPath","replace","LoaderProto","SystemJSLoader","systemJSConstructor","SystemProto","hook","prototype","hookConstructor","group","deps","names","indices","i","l","index","indexOf","push","getESModule","exports","esModule","getOwnPropertyDescriptor","d","Object","hasOwnProperty","value","extend","a","b","prepend","extendMeta","val","Array","concat","warn","warnings","console","readMemberExpression","pParts","shift","getBaseURLObj","baseURLCache","baseURL","URL","baseURI","href","setConditional","mode","set","newModule","browser","node","_nodeRequire","env","production","development","createEntry","declare","execute","executingRequire","declarative","normalizedDeps","groupIndex","evaluated","module","esmExports","parseCondition","condition","conditionExport","conditionModule","negation","conditionExportIndex","lastIndexOf","prop","negate","serializeCondition","conditionObj","resolveCondition","parentName","bool","then","m","interpolateConditional","conditionalMatch","match","interpolationRegEx","Promise","resolve","builder","conditionValue","booleanConditional","booleanIndex","getBundleFor","loader","loadedBundles_","bundles","normalize","normalized","isWorker","window","self","importScripts","document","isWindows","process","platform","assert","item","thisLen","obj","opt","getElementsByTagName","bases","location","cwd","URLPolyfill","createLoad","status","linkSets","dependencies","metadata","loadModule","asyncStartLoadPartwayThrough","step","address","moduleName","moduleMetadata","moduleSource","moduleAddress","requestLoad","request","refererName","refererAddress","reject","load","proceedToLocate","proceedToFetch","locate","proceedToTranslate","fetch","translate","instantiate","instantiateResult","undefined","anonCnt","isDeclarative","transpile","transpiled","curSystem","System","curRegister","register","depsList","loadPromises","depLoad","key","addLoadToLinkSet","all","updateLinkSetOnLoad","exc","exception","linkSetFailed","stepState","existingLoad","done","linkSet","createLinkSet","startingLoad","loadingCount","j","doLink","error","link","_newModule","finishLoad","abrupt","checkError","pLoad","dep","failed","linkIndex","splice","globalLoadsIndex","trace","depMap","forEach","map","kind","loadIndex","doDynamicExecute","linkError","createImportPromise","promise","evaluateLoadedModule","doEnsureEvaluated","constructor","define","delete","has","import","parentAddress","sourcePromise","pNames","getOwnPropertyNames","configurable","enumerable","referrerName","referrerAddress","fetchTextFromURL","XMLHttpRequest","url","authorization","fulfill","xhr","responseText","statusText","sameDomain","doTimeout","domainCheck","exec","host","protocol","XDomainRequest","onload","onerror","ontimeout","onprogress","timeout","onreadystatechange","readyState","addEventListener","open","setRequestHeader","withCredentials","setTimeout","send","require","fs","readFile","data","dataString","opts","headers","Accept","credentials","r","ok","text","transpiler","pluginLoader","__useDefault","transpileFunction","Compiler","traceurTranspile","createLanguageService","typescriptTranspile","babelTranspile","traceur","traceurOptions","script","sourceMaps","filename","inputSourceMap","sourceMap","compiler","doTraceurCompile","compile","babel","babelOptions","code","ast","transform","ts","typescriptOptions","target","ScriptTarget","ES5","inlineSourceMap","ModuleKind","__exec","packageProperties","preExec","callCounter","curLoad","postExec","getSource","lastLineIndex","wrap","format","bundle","hashBangRegEx","hasBtoa","btoa","unescape","encodeURIComponent","evalExec","integrity","reduceRegister_","head","scripts","$__curScript","globalEvaluationScope","body","documentElement","createElement","_e","setAttribute","nonce","appendChild","removeChild","vmModule","vm","runInThisContext","toString","absURLRegEx","bestMatch","bestMatchLength","curMatchLength","baseURIObj","defaultJSExtensions","pluginFirst","chrome","extension","navigator","userAgent","nodeCoreModules","apply","arguments","httpRequest","systemImport","systemTranslate","config","cfg","checkHasConfig","packages","meta","depCache","packageConfigPaths","objMaps","v","normalizeSync","pkgMatch","pkg","main","path","packageLength","Math","max","q","c","normalizeProp","getPackage","curPkg","pkgLen","curPkgLen","applyMap","getBasePath","basePath","toPackagePath","pkgName","subPath","sync","isPlugin","skipExtension","getMetaMatches","metaPattern","matchMeta","matchDepth","getDefaultExtension","defaultExtension","applyPackageConfig","doMap","mapped","createPackageNormalize","packageResolution","defaultJSExtension","parentPackage","parentBasePath","parentMap","configured","pkgConfigMatch","pkgConfigPathMatch","pkgBundlePromises","pkgBundleLoads","curResolution","defined","loadPackageConfigPaths","pkgPath","pkgConfigPaths","pPkgLen","packageConfigPathsRegExps","RegExp","configPaths","curPkgConfig","pkgConfigPromises","pkgConfigPath","JSON","parse","systemjs","dNormalized","pkgMeta","matchFn","wildcardIndex","dotRel","exactMeta","bestDepth","alias","getInteractiveScriptLoad","interactiveScript","interactiveLoadingScripts","webWorkerImport","workerLoad","entry","ieEvents","s","isOpera","opera","attachEvent","loadingCnt","registerQueue","pushRegister","scriptLoad","complete","evt","cleanup","detachEvent","removeEventListener","async","src","buildGroups","groups","depName","depEntry","depGroupIndex","startEntry","curGroupDeclarative","linkDeclarativeModule","linkDynamicModule","getOrCreateModuleRecord","importers","declaration","locked","importerModule","importerIndex","setters","depExports","depModule","originalIndices","len","getModule","ensureEvaluated","id","output","__esModule","default","seen","detectRegisterFormat","leadingCommentAndMeta","leadingCommentAndMetaRegEx","registerDynamic","pushRegister_","amd","curMeta","del","grouped","normalizePromises","esmRegEx","traceurRuntimeRegEx","babelHelpersRegEx","loadedTranspiler_","originalSource","loadedTranspilerRuntime_","$traceurRuntime","babelHelpers","__globalName","globals","registered","g","exportName","retrieveGlobal","prepareGlobal","reduceRegister","globalValue","forEachGlobal","callback","keys","forEachGlobalValue","globalName","ignoredGlobalProps","globalSnapshot","curDefine","oldGlobals","singleGlobal","multipleExports","getCJSDeps","inLocation","locations","cjsRequireRegEx","lastIndex","commentRegEx","stringRegEx","stringLocations","commentLocations","cjsExportsRegEx","metaDeps","cjsRequireDetection","_require","pathVars","getPathVars","__cjsWrapper","args","dirname","windowOrigin","hostname","port","moduleId","pluginIndex","pop","join","requireIndex","params","fnBracketRegEx","requireAlias","wsRegEx","requireRegEx","requireRegExs","cjsRequirePre","cjsRequirePost","errback","referer","dynamicRequires","factory","req","contextualRequire","depValues","uri","moduleIndex","exportsIndex","toUrl","curRequire","createDefine","oldModule","oldExports","oldDefine","amdDefine","amdRequire","amdRegEx","builderExecute","removeDefine","normalizePlugin","normalizePluginParts","argumentName","pluginName","parentPluginIndex","pluginSyntaxIndex","plugin","loaderModule","result","originalName","file","sources","stringify","aliasDeps","_export","setMetaProperty","curPart","depth","metaRegEx","metaPartRegEx","metaParts","firstChar","metaString","metaName","metaValue","bundleName","version","Reflect","global","LoaderPolyfill","hasURL","curPath","systemJSBootstrap","write"],"mappings":"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","file":"system.min.js","sourcesContent":["/*\n * SystemJS v0.19.9\n */\n(function() {\nfunction bootstrap() {(function(__global) {\n\n  var isWorker = typeof window == 'undefined' && typeof self != 'undefined' && typeof importScripts != 'undefined';\n  var isBrowser = typeof window != 'undefined' && typeof document != 'undefined';\n  var isWindows = typeof process != 'undefined' && !!process.platform.match(/^win/);\n\n  if (!__global.console)\n    __global.console = { assert: function() {} };\n\n  // IE8 support\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, thisLen = this.length; i < thisLen; i++) {\n      if (this[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  \n  var defineProperty;\n  (function () {\n    try {\n      if (!!Object.defineProperty({}, 'a', {}))\n        defineProperty = Object.defineProperty;\n    }\n    catch (e) {\n      defineProperty = function(obj, prop, opt) {\n        try {\n          obj[prop] = opt.value || opt.get.call(obj);\n        }\n        catch(e) {}\n      }\n    }\n  })();\n\n  function addToError(err, msg) {\n    var newErr;\n    if (err instanceof Error) {\n      var newErr = new Error(err.message, err.fileName, err.lineNumber);\n      if (isBrowser) {\n        newErr.message = err.message + '\\n\\t' + msg;\n        newErr.stack = err.stack;\n      }\n      else {\n        // node errors only look correct with the stack modified\n        newErr.message = err.message;\n        newErr.stack = err.stack + '\\n\\t' + msg;\n      }\n    }\n    else {\n      newErr = err + '\\n\\t' + msg;\n    }\n      \n    return newErr;\n  }\n\n  function __eval(source, debugName, context) {\n    try {\n      new Function(source).call(context);\n    }\n    catch(e) {\n      throw addToError(e, 'Evaluating ' + debugName);\n    }\n  }\n\n  var baseURI;\n  // environent baseURI detection\n  if (typeof document != 'undefined' && document.getElementsByTagName) {\n    baseURI = document.baseURI;\n\n    if (!baseURI) {\n      var bases = document.getElementsByTagName('base');\n      baseURI = bases[0] && bases[0].href || window.location.href;\n    }\n\n    // sanitize out the hash and querystring\n    baseURI = baseURI.split('#')[0].split('?')[0];\n    baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n  }\n  else if (typeof process != 'undefined' && process.cwd) {\n    baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd() + '/';\n    if (isWindows)\n      baseURI = baseURI.replace(/\\\\/g, '/');\n  }\n  else if (typeof location != 'undefined') {\n    baseURI = __global.location.href;\n  }\n  else {\n    throw new TypeError('No environment baseURI');\n  }\n\n  var URL = __global.URLPolyfill || __global.URL;\n/*\n*********************************************************************************************\n\n  Dynamic Module Loader Polyfill\n\n    - Implemented exactly to the former 2014-08-24 ES6 Specification Draft Rev 27, Section 15\n      http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts#august_24_2014_draft_rev_27\n\n    - Functions are commented with their spec numbers, with spec differences commented.\n\n    - Spec bugs are commented in this code with links.\n\n    - Abstract functions have been combined where possible, and their associated functions\n      commented.\n\n    - Realm implementation is entirely omitted.\n\n*********************************************************************************************\n*/\n\nfunction Module() {}\n// http://www.ecma-international.org/ecma-262/6.0/#sec-@@tostringtag\ndefineProperty(Module.prototype, 'toString', {\n  value: function() {\n    return 'Module';\n  }\n});\nfunction Loader(options) {\n  this._loader = {\n    loaderObj: this,\n    loads: [],\n    modules: {},\n    importPromises: {},\n    moduleRecords: {}\n  };\n\n  // 26.3.3.6\n  defineProperty(this, 'global', {\n    get: function() {\n      return __global;\n    }\n  });\n\n  // 26.3.3.13 realm not implemented\n}\n\n(function() {\n\n// Some Helpers\n\n// logs a linkset snapshot for debugging\n/* function snapshot(loader) {\n  console.log('---Snapshot---');\n  for (var i = 0; i < loader.loads.length; i++) {\n    var load = loader.loads[i];\n    var linkSetLog = '  ' + load.name + ' (' + load.status + '): ';\n\n    for (var j = 0; j < load.linkSets.length; j++) {\n      linkSetLog += '{' + logloads(load.linkSets[j].loads) + '} ';\n    }\n    console.log(linkSetLog);\n  }\n  console.log('');\n}\nfunction logloads(loads) {\n  var log = '';\n  for (var k = 0; k < loads.length; k++)\n    log += loads[k].name + (k != loads.length - 1 ? ' ' : '');\n  return log;\n} */\n\n\n/* function checkInvariants() {\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2603#c1\n\n  var loads = System._loader.loads;\n  var linkSets = [];\n\n  for (var i = 0; i < loads.length; i++) {\n    var load = loads[i];\n    console.assert(load.status == 'loading' || load.status == 'loaded', 'Each load is loading or loaded');\n\n    for (var j = 0; j < load.linkSets.length; j++) {\n      var linkSet = load.linkSets[j];\n\n      for (var k = 0; k < linkSet.loads.length; k++)\n        console.assert(loads.indexOf(linkSet.loads[k]) != -1, 'linkSet loads are a subset of loader loads');\n\n      if (linkSets.indexOf(linkSet) == -1)\n        linkSets.push(linkSet);\n    }\n  }\n\n  for (var i = 0; i < loads.length; i++) {\n    var load = loads[i];\n    for (var j = 0; j < linkSets.length; j++) {\n      var linkSet = linkSets[j];\n\n      if (linkSet.loads.indexOf(load) != -1)\n        console.assert(load.linkSets.indexOf(linkSet) != -1, 'linkSet contains load -> load contains linkSet');\n\n      if (load.linkSets.indexOf(linkSet) != -1)\n        console.assert(linkSet.loads.indexOf(load) != -1, 'load contains linkSet -> linkSet contains load');\n    }\n  }\n\n  for (var i = 0; i < linkSets.length; i++) {\n    var linkSet = linkSets[i];\n    for (var j = 0; j < linkSet.loads.length; j++) {\n      var load = linkSet.loads[j];\n\n      for (var k = 0; k < load.dependencies.length; k++) {\n        var depName = load.dependencies[k].value;\n        var depLoad;\n        for (var l = 0; l < loads.length; l++) {\n          if (loads[l].name != depName)\n            continue;\n          depLoad = loads[l];\n          break;\n        }\n\n        // loading records are allowed not to have their dependencies yet\n        // if (load.status != 'loading')\n        //  console.assert(depLoad, 'depLoad found');\n\n        // console.assert(linkSet.loads.indexOf(depLoad) != -1, 'linkset contains all dependencies');\n      }\n    }\n  }\n} */\n\n  // 15.2.3 - Runtime Semantics: Loader State\n\n  // 15.2.3.11\n  function createLoaderLoad(object) {\n    return {\n      // modules is an object for ES5 implementation\n      modules: {},\n      loads: [],\n      loaderObj: object\n    };\n  }\n\n  // 15.2.3.2 Load Records and LoadRequest Objects\n\n  // 15.2.3.2.1\n  function createLoad(name) {\n    return {\n      status: 'loading',\n      name: name,\n      linkSets: [],\n      dependencies: [],\n      metadata: {}\n    };\n  }\n\n  // 15.2.3.2.2 createLoadRequestObject, absorbed into calling functions\n\n  // 15.2.4\n\n  // 15.2.4.1\n  function loadModule(loader, name, options) {\n    return new Promise(asyncStartLoadPartwayThrough({\n      step: options.address ? 'fetch' : 'locate',\n      loader: loader,\n      moduleName: name,\n      // allow metadata for import https://bugs.ecmascript.org/show_bug.cgi?id=3091\n      moduleMetadata: options && options.metadata || {},\n      moduleSource: options.source,\n      moduleAddress: options.address\n    }));\n  }\n\n  // 15.2.4.2\n  function requestLoad(loader, request, refererName, refererAddress) {\n    // 15.2.4.2.1 CallNormalize\n    return new Promise(function(resolve, reject) {\n      resolve(loader.loaderObj.normalize(request, refererName, refererAddress));\n    })\n    // 15.2.4.2.2 GetOrCreateLoad\n    .then(function(name) {\n      var load;\n      if (loader.modules[name]) {\n        load = createLoad(name);\n        load.status = 'linked';\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2795\n        load.module = loader.modules[name];\n        return load;\n      }\n\n      for (var i = 0, l = loader.loads.length; i < l; i++) {\n        load = loader.loads[i];\n        if (load.name != name)\n          continue;\n        console.assert(load.status == 'loading' || load.status == 'loaded', 'loading or loaded');\n        return load;\n      }\n\n      load = createLoad(name);\n      loader.loads.push(load);\n\n      proceedToLocate(loader, load);\n\n      return load;\n    });\n  }\n\n  // 15.2.4.3\n  function proceedToLocate(loader, load) {\n    proceedToFetch(loader, load,\n      Promise.resolve()\n      // 15.2.4.3.1 CallLocate\n      .then(function() {\n        return loader.loaderObj.locate({ name: load.name, metadata: load.metadata });\n      })\n    );\n  }\n\n  // 15.2.4.4\n  function proceedToFetch(loader, load, p) {\n    proceedToTranslate(loader, load,\n      p\n      // 15.2.4.4.1 CallFetch\n      .then(function(address) {\n        // adjusted, see https://bugs.ecmascript.org/show_bug.cgi?id=2602\n        if (load.status != 'loading')\n          return;\n        load.address = address;\n\n        return loader.loaderObj.fetch({ name: load.name, metadata: load.metadata, address: address });\n      })\n    );\n  }\n\n  var anonCnt = 0;\n\n  // 15.2.4.5\n  function proceedToTranslate(loader, load, p) {\n    p\n    // 15.2.4.5.1 CallTranslate\n    .then(function(source) {\n      if (load.status != 'loading')\n        return;\n\n      return Promise.resolve(loader.loaderObj.translate({ name: load.name, metadata: load.metadata, address: load.address, source: source }))\n\n      // 15.2.4.5.2 CallInstantiate\n      .then(function(source) {\n        load.source = source;\n        return loader.loaderObj.instantiate({ name: load.name, metadata: load.metadata, address: load.address, source: source });\n      })\n\n      // 15.2.4.5.3 InstantiateSucceeded\n      .then(function(instantiateResult) {\n        if (instantiateResult === undefined) {\n          load.address = load.address || '<Anonymous Module ' + ++anonCnt + '>';\n\n          // instead of load.kind, use load.isDeclarative\n          load.isDeclarative = true;\n          return transpile.call(loader.loaderObj, load)\n          .then(function(transpiled) {\n            // Hijack System.register to set declare function\n            var curSystem = __global.System;\n            var curRegister = curSystem.register;\n            curSystem.register = function(name, deps, declare) {\n              if (typeof name != 'string') {\n                declare = deps;\n                deps = name;\n              }\n              // store the registered declaration as load.declare\n              // store the deps as load.deps\n              load.declare = declare;\n              load.depsList = deps;\n            }\n            // empty {} context is closest to undefined 'this' we can get\n            __eval(transpiled, load.address, {});\n            curSystem.register = curRegister;\n          });\n        }\n        else if (typeof instantiateResult == 'object') {\n          load.depsList = instantiateResult.deps || [];\n          load.execute = instantiateResult.execute;\n          load.isDeclarative = false;\n        }\n        else\n          throw TypeError('Invalid instantiate return value');\n      })\n      // 15.2.4.6 ProcessLoadDependencies\n      .then(function() {\n        load.dependencies = [];\n        var depsList = load.depsList;\n\n        var loadPromises = [];\n        for (var i = 0, l = depsList.length; i < l; i++) (function(request, index) {\n          loadPromises.push(\n            requestLoad(loader, request, load.name, load.address)\n\n            // 15.2.4.6.1 AddDependencyLoad (load is parentLoad)\n            .then(function(depLoad) {\n\n              // adjusted from spec to maintain dependency order\n              // this is due to the System.register internal implementation needs\n              load.dependencies[index] = {\n                key: request,\n                value: depLoad.name\n              };\n\n              if (depLoad.status != 'linked') {\n                var linkSets = load.linkSets.concat([]);\n                for (var i = 0, l = linkSets.length; i < l; i++)\n                  addLoadToLinkSet(linkSets[i], depLoad);\n              }\n\n              // console.log('AddDependencyLoad ' + depLoad.name + ' for ' + load.name);\n              // snapshot(loader);\n            })\n          );\n        })(depsList[i], i);\n\n        return Promise.all(loadPromises);\n      })\n\n      // 15.2.4.6.2 LoadSucceeded\n      .then(function() {\n        // console.log('LoadSucceeded ' + load.name);\n        // snapshot(loader);\n\n        console.assert(load.status == 'loading', 'is loading');\n\n        load.status = 'loaded';\n\n        var linkSets = load.linkSets.concat([]);\n        for (var i = 0, l = linkSets.length; i < l; i++)\n          updateLinkSetOnLoad(linkSets[i], load);\n      });\n    })\n    // 15.2.4.5.4 LoadFailed\n    ['catch'](function(exc) {\n      load.status = 'failed';\n      load.exception = exc;\n\n      var linkSets = load.linkSets.concat([]);\n      for (var i = 0, l = linkSets.length; i < l; i++) {\n        linkSetFailed(linkSets[i], load, exc);\n      }\n\n      console.assert(load.linkSets.length == 0, 'linkSets not removed');\n    });\n  }\n\n  // 15.2.4.7 PromiseOfStartLoadPartwayThrough absorbed into calling functions\n\n  // 15.2.4.7.1\n  function asyncStartLoadPartwayThrough(stepState) {\n    return function(resolve, reject) {\n      var loader = stepState.loader;\n      var name = stepState.moduleName;\n      var step = stepState.step;\n\n      if (loader.modules[name])\n        throw new TypeError('\"' + name + '\" already exists in the module table');\n\n      // adjusted to pick up existing loads\n      var existingLoad;\n      for (var i = 0, l = loader.loads.length; i < l; i++) {\n        if (loader.loads[i].name == name) {\n          existingLoad = loader.loads[i];\n\n          if (step == 'translate' && !existingLoad.source) {\n            existingLoad.address = stepState.moduleAddress;\n            proceedToTranslate(loader, existingLoad, Promise.resolve(stepState.moduleSource));\n          }\n\n          // a primary load -> use that existing linkset if it is for the direct load here\n          // otherwise create a new linkset unit\n          if (existingLoad.linkSets.length && existingLoad.linkSets[0].loads[0].name == existingLoad.name)\n            return existingLoad.linkSets[0].done.then(function() {\n              resolve(existingLoad);\n            });\n        }\n      }\n\n      var load = existingLoad || createLoad(name);\n\n      load.metadata = stepState.moduleMetadata;\n\n      var linkSet = createLinkSet(loader, load);\n\n      loader.loads.push(load);\n\n      resolve(linkSet.done);\n\n      if (step == 'locate')\n        proceedToLocate(loader, load);\n\n      else if (step == 'fetch')\n        proceedToFetch(loader, load, Promise.resolve(stepState.moduleAddress));\n\n      else {\n        console.assert(step == 'translate', 'translate step');\n        load.address = stepState.moduleAddress;\n        proceedToTranslate(loader, load, Promise.resolve(stepState.moduleSource));\n      }\n    }\n  }\n\n  // Declarative linking functions run through alternative implementation:\n  // 15.2.5.1.1 CreateModuleLinkageRecord not implemented\n  // 15.2.5.1.2 LookupExport not implemented\n  // 15.2.5.1.3 LookupModuleDependency not implemented\n\n  // 15.2.5.2.1\n  function createLinkSet(loader, startingLoad) {\n    var linkSet = {\n      loader: loader,\n      loads: [],\n      startingLoad: startingLoad, // added see spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995\n      loadingCount: 0\n    };\n    linkSet.done = new Promise(function(resolve, reject) {\n      linkSet.resolve = resolve;\n      linkSet.reject = reject;\n    });\n    addLoadToLinkSet(linkSet, startingLoad);\n    return linkSet;\n  }\n  // 15.2.5.2.2\n  function addLoadToLinkSet(linkSet, load) {\n    if (load.status == 'failed')\n      return;\n\n    console.assert(load.status == 'loading' || load.status == 'loaded', 'loading or loaded on link set');\n\n    for (var i = 0, l = linkSet.loads.length; i < l; i++)\n      if (linkSet.loads[i] == load)\n        return;\n\n    linkSet.loads.push(load);\n    load.linkSets.push(linkSet);\n\n    // adjustment, see https://bugs.ecmascript.org/show_bug.cgi?id=2603\n    if (load.status != 'loaded') {\n      linkSet.loadingCount++;\n    }\n\n    var loader = linkSet.loader;\n\n    for (var i = 0, l = load.dependencies.length; i < l; i++) {\n      if (!load.dependencies[i])\n        continue;\n\n      var name = load.dependencies[i].value;\n\n      if (loader.modules[name])\n        continue;\n\n      for (var j = 0, d = loader.loads.length; j < d; j++) {\n        if (loader.loads[j].name != name)\n          continue;\n\n        addLoadToLinkSet(linkSet, loader.loads[j]);\n        break;\n      }\n    }\n    // console.log('add to linkset ' + load.name);\n    // snapshot(linkSet.loader);\n  }\n\n  // linking errors can be generic or load-specific\n  // this is necessary for debugging info\n  function doLink(linkSet) {\n    var error = false;\n    try {\n      link(linkSet, function(load, exc) {\n        linkSetFailed(linkSet, load, exc);\n        error = true;\n      });\n    }\n    catch(e) {\n      linkSetFailed(linkSet, null, e);\n      error = true;\n    }\n    return error;\n  }\n\n  // 15.2.5.2.3\n  function updateLinkSetOnLoad(linkSet, load) {\n    // console.log('update linkset on load ' + load.name);\n    // snapshot(linkSet.loader);\n\n    console.assert(load.status == 'loaded' || load.status == 'linked', 'loaded or linked');\n\n    linkSet.loadingCount--;\n\n    if (linkSet.loadingCount > 0)\n      return;\n\n    // adjusted for spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995\n    var startingLoad = linkSet.startingLoad;\n\n    // non-executing link variation for loader tracing\n    // on the server. Not in spec.\n    /***/\n    if (linkSet.loader.loaderObj.execute === false) {\n      var loads = [].concat(linkSet.loads);\n      for (var i = 0, l = loads.length; i < l; i++) {\n        var load = loads[i];\n        load.module = !load.isDeclarative ? {\n          module: _newModule({})\n        } : {\n          name: load.name,\n          module: _newModule({}),\n          evaluated: true\n        };\n        load.status = 'linked';\n        finishLoad(linkSet.loader, load);\n      }\n      return linkSet.resolve(startingLoad);\n    }\n    /***/\n\n    var abrupt = doLink(linkSet);\n\n    if (abrupt)\n      return;\n\n    console.assert(linkSet.loads.length == 0, 'loads cleared');\n\n    linkSet.resolve(startingLoad);\n  }\n\n  // 15.2.5.2.4\n  function linkSetFailed(linkSet, load, exc) {\n    var loader = linkSet.loader;\n    var requests;\n\n    checkError: \n    if (load) {\n      if (linkSet.loads[0].name == load.name) {\n        exc = addToError(exc, 'Error loading ' + load.name);\n      }\n      else {\n        for (var i = 0; i < linkSet.loads.length; i++) {\n          var pLoad = linkSet.loads[i];\n          for (var j = 0; j < pLoad.dependencies.length; j++) {\n            var dep = pLoad.dependencies[j];\n            if (dep.value == load.name) {\n              exc = addToError(exc, 'Error loading ' + load.name + ' as \"' + dep.key + '\" from ' + pLoad.name);\n              break checkError;\n            }\n          }\n        }\n        exc = addToError(exc, 'Error loading ' + load.name + ' from ' + linkSet.loads[0].name);\n      }\n    }\n    else {\n      exc = addToError(exc, 'Error linking ' + linkSet.loads[0].name);\n    }\n\n\n    var loads = linkSet.loads.concat([]);\n    for (var i = 0, l = loads.length; i < l; i++) {\n      var load = loads[i];\n\n      // store all failed load records\n      loader.loaderObj.failed = loader.loaderObj.failed || [];\n      if (indexOf.call(loader.loaderObj.failed, load) == -1)\n        loader.loaderObj.failed.push(load);\n\n      var linkIndex = indexOf.call(load.linkSets, linkSet);\n      console.assert(linkIndex != -1, 'link not present');\n      load.linkSets.splice(linkIndex, 1);\n      if (load.linkSets.length == 0) {\n        var globalLoadsIndex = indexOf.call(linkSet.loader.loads, load);\n        if (globalLoadsIndex != -1)\n          linkSet.loader.loads.splice(globalLoadsIndex, 1);\n      }\n    }\n    linkSet.reject(exc);\n  }\n\n  // 15.2.5.2.5\n  function finishLoad(loader, load) {\n    // add to global trace if tracing\n    if (loader.loaderObj.trace) {\n      if (!loader.loaderObj.loads)\n        loader.loaderObj.loads = {};\n      var depMap = {};\n      load.dependencies.forEach(function(dep) {\n        depMap[dep.key] = dep.value;\n      });\n      loader.loaderObj.loads[load.name] = {\n        name: load.name,\n        deps: load.dependencies.map(function(dep){ return dep.key }),\n        depMap: depMap,\n        address: load.address,\n        metadata: load.metadata,\n        source: load.source,\n        kind: load.isDeclarative ? 'declarative' : 'dynamic'\n      };\n    }\n    // if not anonymous, add to the module table\n    if (load.name) {\n      console.assert(!loader.modules[load.name], 'load not in module table');\n      loader.modules[load.name] = load.module;\n    }\n    var loadIndex = indexOf.call(loader.loads, load);\n    if (loadIndex != -1)\n      loader.loads.splice(loadIndex, 1);\n    for (var i = 0, l = load.linkSets.length; i < l; i++) {\n      loadIndex = indexOf.call(load.linkSets[i].loads, load);\n      if (loadIndex != -1)\n        load.linkSets[i].loads.splice(loadIndex, 1);\n    }\n    load.linkSets.splice(0, load.linkSets.length);\n  }\n\n  function doDynamicExecute(linkSet, load, linkError) {\n    try {\n      var module = load.execute();\n    }\n    catch(e) {\n      linkError(load, e);\n      return;\n    }\n    if (!module || !(module instanceof Module))\n      linkError(load, new TypeError('Execution must define a Module instance'));\n    else\n      return module;\n  }\n\n  // 26.3 Loader\n\n  // 26.3.1.1\n  // defined at top\n\n  // importPromises adds ability to import a module twice without error - https://bugs.ecmascript.org/show_bug.cgi?id=2601\n  function createImportPromise(loader, name, promise) {\n    var importPromises = loader._loader.importPromises;\n    return importPromises[name] = promise.then(function(m) {\n      importPromises[name] = undefined;\n      return m;\n    }, function(e) {\n      importPromises[name] = undefined;\n      throw e;\n    });\n  }\n\n  Loader.prototype = {\n    // 26.3.3.1\n    constructor: Loader,\n    // 26.3.3.2\n    define: function(name, source, options) {\n      // check if already defined\n      if (this._loader.importPromises[name])\n        throw new TypeError('Module is already loading.');\n      return createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({\n        step: 'translate',\n        loader: this._loader,\n        moduleName: name,\n        moduleMetadata: options && options.metadata || {},\n        moduleSource: source,\n        moduleAddress: options && options.address\n      })));\n    },\n    // 26.3.3.3\n    'delete': function(name) {\n      var loader = this._loader;\n      delete loader.importPromises[name];\n      delete loader.moduleRecords[name];\n      return loader.modules[name] ? delete loader.modules[name] : false;\n    },\n    // 26.3.3.4 entries not implemented\n    // 26.3.3.5\n    get: function(key) {\n      if (!this._loader.modules[key])\n        return;\n      doEnsureEvaluated(this._loader.modules[key], [], this);\n      return this._loader.modules[key].module;\n    },\n    // 26.3.3.7\n    has: function(name) {\n      return !!this._loader.modules[name];\n    },\n    // 26.3.3.8\n    'import': function(name, parentName, parentAddress) {\n      if (typeof parentName == 'object')\n        parentName = parentName.name;\n\n      // run normalize first\n      var loaderObj = this;\n\n      // added, see https://bugs.ecmascript.org/show_bug.cgi?id=2659\n      return Promise.resolve(loaderObj.normalize(name, parentName))\n      .then(function(name) {\n        var loader = loaderObj._loader;\n\n        if (loader.modules[name]) {\n          doEnsureEvaluated(loader.modules[name], [], loader._loader);\n          return loader.modules[name].module;\n        }\n\n        return loader.importPromises[name] || createImportPromise(loaderObj, name,\n          loadModule(loader, name, {})\n          .then(function(load) {\n            delete loader.importPromises[name];\n            return evaluateLoadedModule(loader, load);\n          }));\n      });\n    },\n    // 26.3.3.9 keys not implemented\n    // 26.3.3.10\n    load: function(name, options) {\n      var loader = this._loader;\n      if (loader.modules[name]) {\n        doEnsureEvaluated(loader.modules[name], [], loader);\n        return Promise.resolve(loader.modules[name].module);\n      }\n      return loader.importPromises[name] || createImportPromise(this, name,\n        loadModule(loader, name, {})\n        .then(function(load) {\n          delete loader.importPromises[name];\n          return evaluateLoadedModule(loader, load);\n        }));\n    },\n    // 26.3.3.11\n    module: function(source, options) {\n      var load = createLoad();\n      load.address = options && options.address;\n      var linkSet = createLinkSet(this._loader, load);\n      var sourcePromise = Promise.resolve(source);\n      var loader = this._loader;\n      var p = linkSet.done.then(function() {\n        return evaluateLoadedModule(loader, load);\n      });\n      proceedToTranslate(loader, load, sourcePromise);\n      return p;\n    },\n    // 26.3.3.12\n    newModule: function (obj) {\n      if (typeof obj != 'object')\n        throw new TypeError('Expected object');\n\n      var m = new Module();\n\n      var pNames = [];\n      if (Object.getOwnPropertyNames && obj != null)\n        pNames = Object.getOwnPropertyNames(obj);\n      else\n        for (var key in obj)\n          pNames.push(key);\n\n      for (var i = 0; i < pNames.length; i++) (function(key) {\n        defineProperty(m, key, {\n          configurable: false,\n          enumerable: true,\n          get: function () {\n            return obj[key];\n          }\n        });\n      })(pNames[i]);\n\n      return m;\n    },\n    // 26.3.3.14\n    set: function(name, module) {\n      if (!(module instanceof Module))\n        throw new TypeError('Loader.set(' + name + ', module) must be a module');\n      this._loader.modules[name] = {\n        module: module\n      };\n    },\n    // 26.3.3.15 values not implemented\n    // 26.3.3.16 @@iterator not implemented\n    // 26.3.3.17 @@toStringTag not implemented\n\n    // 26.3.3.18.1\n    normalize: function(name, referrerName, referrerAddress) {\n      return name;\n    },\n    // 26.3.3.18.2\n    locate: function(load) {\n      return load.name;\n    },\n    // 26.3.3.18.3\n    fetch: function(load) {\n    },\n    // 26.3.3.18.4\n    translate: function(load) {\n      return load.source;\n    },\n    // 26.3.3.18.5\n    instantiate: function(load) {\n    }\n  };\n\n  var _newModule = Loader.prototype.newModule;\n/*\n * ES6 Module Declarative Linking Code - Dev Build Only\n */\n  function link(linkSet, linkError) {\n\n    var loader = linkSet.loader;\n\n    if (!linkSet.loads.length)\n      return;\n\n    var loads = linkSet.loads.concat([]);\n\n    for (var i = 0; i < loads.length; i++) {\n      var load = loads[i];\n\n      var module = doDynamicExecute(linkSet, load, linkError);\n      if (!module)\n        return;\n      load.module = {\n        name: load.name,\n        module: module\n      };\n      load.status = 'linked';\n\n      finishLoad(loader, load);\n    }\n  }\n\n  function evaluateLoadedModule(loader, load) {\n    console.assert(load.status == 'linked', 'is linked ' + load.name);\n    return load.module.module;\n  }\n\n  function doEnsureEvaluated() {}\n\n  function transpile() {\n    throw new TypeError('ES6 transpilation is only provided in the dev module loader build.');\n  }\n})();/*\n*********************************************************************************************\n\n  System Loader Implementation\n\n    - Implemented to https://github.com/jorendorff/js-loaders/blob/master/browser-loader.js\n\n    - <script type=\"module\"> supported\n\n*********************************************************************************************\n*/\n\nvar System;\n\nfunction SystemLoader() {\n  Loader.call(this);\n  this.paths = {};\n}\n\n// NB no specification provided for System.paths, used ideas discussed in https://github.com/jorendorff/js-loaders/issues/25\nfunction applyPaths(paths, name) {\n  // most specific (most number of slashes in path) match wins\n  var pathMatch = '', wildcard, maxWildcardPrefixLen = 0;\n\n  // check to see if we have a paths entry\n  for (var p in paths) {\n    var pathParts = p.split('*');\n    if (pathParts.length > 2)\n      throw new TypeError('Only one wildcard in a path is permitted');\n\n    // exact path match\n    if (pathParts.length == 1) {\n      if (name == p) {\n        pathMatch = p;\n        break;\n      }\n    }\n    // wildcard path match\n    else {\n      var wildcardPrefixLen = pathParts[0].length;\n      if (wildcardPrefixLen >= maxWildcardPrefixLen &&\n          name.substr(0, pathParts[0].length) == pathParts[0] &&\n          name.substr(name.length - pathParts[1].length) == pathParts[1]) {\n            maxWildcardPrefixLen = wildcardPrefixLen;\n            pathMatch = p;\n            wildcard = name.substr(pathParts[0].length, name.length - pathParts[1].length - pathParts[0].length);\n          }\n    }\n  }\n\n  var outPath = paths[pathMatch] || name;\n  if (typeof wildcard == 'string')\n    outPath = outPath.replace('*', wildcard);\n\n  return outPath;\n}\n\n// inline Object.create-style class extension\nfunction LoaderProto() {}\nLoaderProto.prototype = Loader.prototype;\nSystemLoader.prototype = new LoaderProto();\n  var fetchTextFromURL;\n  if (typeof XMLHttpRequest != 'undefined') {\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      var xhr = new XMLHttpRequest();\n      var sameDomain = true;\n      var doTimeout = false;\n      if (!('withCredentials' in xhr)) {\n        // check if same domain\n        var domainCheck = /^(\\w+:)?\\/\\/([^\\/]+)/.exec(url);\n        if (domainCheck) {\n          sameDomain = domainCheck[2] === window.location.host;\n          if (domainCheck[1])\n            sameDomain &= domainCheck[1] === window.location.protocol;\n        }\n      }\n      if (!sameDomain && typeof XDomainRequest != 'undefined') {\n        xhr = new XDomainRequest();\n        xhr.onload = load;\n        xhr.onerror = error;\n        xhr.ontimeout = error;\n        xhr.onprogress = function() {};\n        xhr.timeout = 0;\n        doTimeout = true;\n      }\n      function load() {\n        fulfill(xhr.responseText);\n      }\n      function error() {\n        reject(new Error('XHR error' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));\n      }\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          // in Chrome on file:/// URLs, status is 0\n          if (xhr.status == 0) {\n            if (xhr.responseText) {\n              load();\n            }\n            else {\n              // when responseText is empty, wait for load or error event\n              // to inform if it is a 404 or empty file\n              xhr.addEventListener('error', error);\n              xhr.addEventListener('load', load);\n            }\n          }\n          else if (xhr.status === 200) {\n            load();\n          }\n          else {\n            error();\n          }\n        }\n      };\n      xhr.open(\"GET\", url, true);\n\n      if (xhr.setRequestHeader) {\n        xhr.setRequestHeader('Accept', 'application/x-es-module, */*');\n        // can set \"authorization: true\" to enable withCredentials only\n        if (authorization) {\n          if (typeof authorization == 'string')\n            xhr.setRequestHeader('Authorization', authorization);\n          xhr.withCredentials = true;\n        }\n      }\n\n      if (doTimeout) {\n        setTimeout(function() {\n          xhr.send();\n        }, 0);\n      } else {\n        xhr.send(null);\n      }\n    };\n  }\n  else if (typeof require != 'undefined' && typeof process != 'undefined') {\n    var fs;\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      if (url.substr(0, 8) != 'file:///')\n        throw new Error('Unable to fetch \"' + url + '\". Only file URLs of the form file:/// allowed running in Node.');\n      fs = fs || require('fs');\n      if (isWindows)\n        url = url.replace(/\\//g, '\\\\').substr(8);\n      else\n        url = url.substr(7);\n      return fs.readFile(url, function(err, data) {\n        if (err) {\n          return reject(err);\n        }\n        else {\n          // Strip Byte Order Mark out if it's the leading char\n          var dataString = data + '';\n          if (dataString[0] === '\\ufeff')\n            dataString = dataString.substr(1);\n\n          fulfill(dataString);\n        }\n      });\n    };\n  }\n  else if (typeof self != 'undefined' && typeof self.fetch != 'undefined') {\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      var opts = {\n        headers: {'Accept': 'application/x-es-module, */*'}\n      };\n\n      if (authorization) {\n        if (typeof authorization == 'string')\n          opts.headers['Authorization'] = authorization;\n        opts.credentials = 'include';\n      }\n\n      fetch(url, opts)\n        .then(function (r) {\n          if (r.ok) {\n            return r.text();\n          } else {\n            throw new Error('Fetch error: ' + r.status + ' ' + r.statusText);\n          }\n        })\n        .then(fulfill, reject);\n    }\n  }\n  else {\n    throw new TypeError('No environment fetch API available.');\n  }\n\n  SystemLoader.prototype.fetch = function(load) {\n    return new Promise(function(resolve, reject) {\n      fetchTextFromURL(load.address, undefined, resolve, reject);\n    });\n  };\n/*\n * Traceur, Babel and TypeScript transpile hook for Loader\n */\nvar transpile = (function() {\n\n  // use Traceur by default\n  Loader.prototype.transpiler = 'traceur';\n\n  function transpile(load) {\n    var self = this;\n\n    return Promise.resolve(__global[self.transpiler == 'typescript' ? 'ts' : self.transpiler]\n        || (self.pluginLoader || self)['import'](self.transpiler))\n    .then(function(transpiler) {\n      if (transpiler.__useDefault)\n        transpiler = transpiler['default'];\n\n      var transpileFunction;\n      if (transpiler.Compiler)\n        transpileFunction = traceurTranspile;\n      else if (transpiler.createLanguageService)\n        transpileFunction = typescriptTranspile;\n      else\n        transpileFunction = babelTranspile;\n\n      // note __moduleName will be part of the transformer meta in future when we have the spec for this\n      return '(function(__moduleName){' + transpileFunction.call(self, load, transpiler) + '\\n})(\"' + load.name + '\");\\n//# sourceURL=' + load.address + '!transpiled';\n    });\n  };\n\n  function traceurTranspile(load, traceur) {\n    var options = this.traceurOptions || {};\n    options.modules = 'instantiate';\n    options.script = false;\n    if (options.sourceMaps === undefined)\n      options.sourceMaps = 'inline';\n    options.filename = load.address;\n    options.inputSourceMap = load.metadata.sourceMap;\n    options.moduleName = false;\n\n    var compiler = new traceur.Compiler(options);\n\n    return doTraceurCompile(load.source, compiler, options.filename);\n  }\n  function doTraceurCompile(source, compiler, filename) {\n    try {\n      return compiler.compile(source, filename);\n    }\n    catch(e) {\n      // traceur throws an error array\n      throw e[0];\n    }\n  }\n\n  function babelTranspile(load, babel) {\n    var options = this.babelOptions || {};\n    options.modules = 'system';\n    if (options.sourceMap === undefined)\n      options.sourceMap = 'inline';\n    options.inputSourceMap = load.metadata.sourceMap;\n    options.filename = load.address;\n    options.code = true;\n    options.ast = false;\n\n    return babel.transform(load.source, options).code;\n  }\n\n  function typescriptTranspile(load, ts) {\n    var options = this.typescriptOptions || {};\n    options.target = options.target || ts.ScriptTarget.ES5;\n    if (options.sourceMap === undefined)\n      options.sourceMap = true;\n    if (options.sourceMap && options.inlineSourceMap !== false)\n      options.inlineSourceMap = true;\n\n    options.module = ts.ModuleKind.System;\n\n    return ts.transpile(load.source, options, load.address);\n  }\n\n  return transpile;\n})();\n// SystemJS Loader Class and Extension helpers\n\nfunction SystemJSLoader() {\n  SystemLoader.call(this);\n\n  systemJSConstructor.call(this);\n}\n\n// inline Object.create-style class extension\nfunction SystemProto() {};\nSystemProto.prototype = SystemLoader.prototype;\nSystemJSLoader.prototype = new SystemProto();\nSystemJSLoader.prototype.constructor = SystemJSLoader;\n\nvar systemJSConstructor;\n\nfunction hook(name, hook) {\n  SystemJSLoader.prototype[name] = hook(SystemJSLoader.prototype[name] || function() {});\n}\nfunction hookConstructor(hook) {\n  systemJSConstructor = hook(systemJSConstructor || function() {});\n}\n\nfunction dedupe(deps) {\n  var newDeps = [];\n  for (var i = 0, l = deps.length; i < l; i++)\n    if (indexOf.call(newDeps, deps[i]) == -1)\n      newDeps.push(deps[i])\n  return newDeps;\n}\n\nfunction group(deps) {\n  var names = [];\n  var indices = [];\n  for (var i = 0, l = deps.length; i < l; i++) {\n    var index = indexOf.call(names, deps[i]);\n    if (index === -1) {\n      names.push(deps[i]);\n      indices.push([i]);\n    }\n    else {\n      indices[index].push(i);\n    }\n  }\n  return { names: names, indices: indices };\n}\n\nvar getOwnPropertyDescriptor = true;\ntry {\n  Object.getOwnPropertyDescriptor({ a: 0 }, 'a');\n}\ncatch(e) {\n  getOwnPropertyDescriptor = false;\n}\n\n// converts any module.exports object into an object ready for System.newModule\nfunction getESModule(exports) {\n  var esModule = {};\n  // don't trigger getters/setters in environments that support them\n  if (typeof exports == 'object' || typeof exports == 'function') {\n    if (getOwnPropertyDescriptor) {\n      var d;\n      for (var p in exports)\n        if (d = Object.getOwnPropertyDescriptor(exports, p))\n          defineProperty(esModule, p, d);\n    }\n    else {\n      var hasOwnProperty = exports && exports.hasOwnProperty;\n      for (var p in exports) {\n        if (!hasOwnProperty || exports.hasOwnProperty(p))\n          esModule[p] = exports[p];\n      }\n    }\n  }\n  esModule['default'] = exports;\n  defineProperty(esModule, '__useDefault', {\n    value: true\n  });\n  return esModule;\n}\n\nfunction extend(a, b, prepend) {\n  for (var p in b) {\n    if (!prepend || !(p in a))\n      a[p] = b[p];\n  }\n  return a;\n}\n\n// package configuration options\nvar packageProperties = ['main', 'format', 'defaultExtension', 'meta', 'map', 'basePath', 'depCache'];\n\n// meta first-level extends where:\n// array + array appends\n// object + object extends\n// other properties replace\nfunction extendMeta(a, b, prepend) {\n  for (var p in b) {\n    var val = b[p];\n    if (!(p in a))\n      a[p] = val;\n    else if (val instanceof Array && a[p] instanceof Array)\n      a[p] = [].concat(prepend ? val : a[p]).concat(prepend ? a[p] : val);\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\n      a[p] = extend(extend({}, a[p]), val, prepend);\n    else if (!prepend)\n      a[p] = val;\n  }\n}\n\nfunction warn(msg) {\n  if (this.warnings && typeof console != 'undefined' && console.warn)\n    console.warn(msg);\n}// we define a __exec for globally-scoped execution\n// used by module format implementations\nvar __exec;\n\n(function() {\n\n  // System clobbering protection (mostly for Traceur)\n  var curSystem;\n  var callCounter = 0;\n  var curLoad;\n  function preExec(loader, load) {\n    if (callCounter++ == 0)\n      curSystem = __global.System;\n    __global.System = loader;\n    curLoad = load;\n  }\n  function postExec() {\n    if (--callCounter == 0)\n      __global.System = curSystem;\n    curLoad = undefined;\n  }\n\n  // System.register, System.registerDynamic, AMD define pipeline\n  // if currently evalling code here, immediately reduce the registered entry against the load record\n  hook('pushRegister_', function() {\n    return function(register) {\n      if (!curLoad)\n        return false;\n\n      this.reduceRegister_(curLoad, register);\n      return true;\n    };\n  });\n\n  var hasBtoa = typeof btoa != 'undefined';\n\n  // used to support leading #!/usr/bin/env in scripts as supported in Node\n  var hashBangRegEx = /^\\#\\!.*/;\n\n  function getSource(load) {\n    var lastLineIndex = load.source.lastIndexOf('\\n');\n\n    // wrap ES formats with a System closure for System global encapsulation\n    var wrap = load.metadata.format == 'esm' || load.metadata.format == 'register' || load.metadata.bundle;\n\n    return (wrap ? '(function(System) {' : '') + (load.metadata.format == 'cjs' ? load.source.replace(hashBangRegEx, '') : load.source) + (wrap ? '\\n})(System);' : '')\n        // adds the sourceURL comment if not already present\n        + (load.source.substr(lastLineIndex, 15) != '\\n//# sourceURL=' \n          ? '\\n//# sourceURL=' + load.address + (load.metadata.sourceMap ? '!transpiled' : '') : '')\n        // add sourceMappingURL if load.metadata.sourceMap is set\n        + (load.metadata.sourceMap && hasBtoa && \n          '\\n//# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(load.metadata.sourceMap))) || '')\n  }\n\n  function evalExec(load) {\n    if (load.metadata.integrity)\n      throw new TypeError('Subresource integrity checking is not supported in Web Workers or Chrome Extensions.');\n    try {\n      preExec(this, load);\n      new Function(getSource(load)).call(__global);\n      postExec();\n    }\n    catch(e) {\n      postExec();\n      throw addToError(e, 'Evaluating ' + load.address);\n    }\n  }\n\n  // use script injection eval to get identical global script behaviour\n  if (typeof document != 'undefined' && document.getElementsByTagName) {\n    var head;\n\n    var scripts = document.getElementsByTagName('script');\n    $__curScript = scripts[scripts.length - 1];\n    __exec = function(load) {\n      if (!this.globalEvaluationScope)\n        return evalExec.call(this, load);\n\n      if (!head)\n        head = document.head || document.body || document.documentElement;\n\n      var script = document.createElement('script');\n      script.text = getSource(load);\n      var onerror = window.onerror;\n      var e;\n      window.onerror = function(_e) {\n        e = addToError(_e, 'Evaluating ' + load.address);\n      }\n      preExec(this, load);\n\n      if (load.metadata.integrity)\n        script.setAttribute('integrity', load.metadata.integrity);\n      if (load.metadata.nonce)\n        script.setAttribute('nonce', load.metadata.nonce);\n\n      head.appendChild(script);\n      head.removeChild(script);\n      postExec();\n      window.onerror = onerror;\n      if (e)\n        throw e;\n    };\n  }\n\n  // global scoped eval for node\n  else if (typeof require != 'undefined') {\n    var vmModule = 'vm';\n    var vm = require(vmModule);\n    __exec = function vmExec(load) {\n      if (!this.globalEvaluationScope)\n        return evalExec.call(this, load);\n\n      if (load.metadata.integrity)\n        throw new TypeError('Subresource integrity checking is unavailable in Node.');\n      try {\n        preExec(this, load);\n        vm.runInThisContext(getSource(load));\n        postExec();\n      }\n      catch(e) {\n        postExec();\n        throw addToError(e.toString(), 'Evaluating ' + load.address);\n      }\n    };\n  }\n  else {\n    __exec = evalExec;\n  }\n\n})();/*\n  SystemJS map support\n  \n  Provides map configuration through\n    System.map['jquery'] = 'some/module/map'\n\n  Note that this applies for subpaths, just like RequireJS:\n\n  jquery      -> 'some/module/map'\n  jquery/path -> 'some/module/map/path'\n  bootstrap   -> 'bootstrap'\n\n  The most specific map is always taken, as longest path length\n*/\nhookConstructor(function(constructor) {\n  return function() {\n    constructor.call(this);\n    this.map = {};\n  };\n});\n\nhook('normalize', function() {\n  return function(name, parentName) {\n    if (name.substr(0, 1) != '.' && name.substr(0, 1) != '/' && !name.match(absURLRegEx)) {\n      var bestMatch, bestMatchLength = 0;\n\n      // now do the global map\n      for (var p in this.map) {\n        if (name.substr(0, p.length) == p && (name.length == p.length || name[p.length] == '/')) {\n          var curMatchLength = p.split('/').length;\n          if (curMatchLength <= bestMatchLength)\n            continue;\n          bestMatch = p;\n          bestMatchLength = curMatchLength;\n        }\n      }\n\n      if (bestMatch)\n        name = this.map[bestMatch] + name.substr(bestMatch.length);\n    }\n    \n    // map is the first normalizer\n    return name;\n  };\n});\nvar absURLRegEx = /^[^\\/]+:\\/\\//;\n\nfunction readMemberExpression(p, value) {\n  var pParts = p.split('.');\n  while (pParts.length)\n    value = value[pParts.shift()];\n  return value;\n}\n\nvar baseURLCache = {};\nfunction getBaseURLObj() {\n  if (baseURLCache[this.baseURL])\n    return baseURLCache[this.baseURL];\n\n  // normalize baseURL if not already\n  if (this.baseURL[this.baseURL.length - 1] != '/')\n    this.baseURL += '/';\n\n  var baseURL = new URL(this.baseURL, baseURI);\n\n  this.baseURL = baseURL.href;\n\n  return (baseURLCache[this.baseURL] = baseURL);\n}\n\nfunction setConditional(mode) {\n  this.set('@system-env', this.newModule({\n    browser: isBrowser,\n    node: !!this._nodeRequire,\n    env: mode,\n    production: mode == 'production',\n    development: mode == 'development'\n  }));\n}\n\nvar baseURIObj = new URL(baseURI);\n\nhookConstructor(function(constructor) {\n  return function() {\n    constructor.call(this);\n\n    // support baseURL\n    this.baseURL = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n\n    // global behaviour flags\n    this.warnings = false;\n    this.defaultJSExtensions = false;\n    this.globalEvaluationScope = true;\n    this.pluginFirst = false;\n\n    // Default settings for globalEvaluationScope:\n    // Disabled for WebWorker, Chrome Extensions and jsdom\n    if (isWorker \n        || isBrowser && window.chrome && window.chrome.extension \n        || isBrowser && navigator.userAgent.match(/^Node\\.js/))\n      this.globalEvaluationScope = false;\n\n    // support the empty module, as a concept\n    this.set('@empty', this.newModule({}));\n\n    setConditional.call(this, 'development');\n  };\n});\n\n// include the node require since we're overriding it\nif (typeof require != 'undefined' && typeof process != 'undefined' && !process.browser)\n  SystemJSLoader.prototype._nodeRequire = require;\n\nvar nodeCoreModules = ['assert', 'buffer', 'child_process', 'cluster', 'console', 'constants', \n    'crypto', 'dgram', 'dns', 'domain', 'events', 'fs', 'http', 'https', 'module', 'net', 'os', 'path', \n    'process', 'punycode', 'querystring', 'readline', 'repl', 'stream', 'string_decoder', 'sys', 'timers', \n    'tls', 'tty', 'url', 'util', 'vm', 'zlib'];\n\n/*\n  Normalization\n\n  If a name is relative, we apply URL normalization to the page\n  If a name is an absolute URL, we leave it as-is\n\n  Plain names (neither of the above) run through the map and package\n  normalization phases (applying before and after this one).\n\n  The paths normalization phase applies last (paths extension), which\n  defines the `normalizeSync` function and normalizes everything into\n  a URL.\n\n  The final normalization \n */\nhook('normalize', function(normalize) {\n  return function(name, parentName) {\n    // first run map config\n    name = normalize.apply(this, arguments);\n\n    // dynamically load node-core modules when requiring `@node/fs` for example\n    if (name.substr(0, 6) == '@node/' && nodeCoreModules.indexOf(name.substr(6)) != -1) {\n      if (!this._nodeRequire)\n        throw new TypeError('Error loading ' + name + '. Can only load node core modules in Node.');\n      this.set(name, this.newModule(getESModule(this._nodeRequire(name.substr(6)))));\n    }\n    \n    // relative URL-normalization\n    if (name[0] == '.' || name[0] == '/') {\n      if (parentName)\n        return new URL(name, parentName.replace(/#/g, '%05')).href.replace(/%05/g, '#');\n      else\n        return new URL(name, baseURIObj).href;\n    }\n    return name;\n  };\n});\n\n// percent encode just '#' in urls if using HTTP requests\nvar httpRequest = typeof XMLHttpRequest != 'undefined';\nhook('locate', function(locate) {\n  return function(load) {\n    return Promise.resolve(locate.call(this, load))\n    .then(function(address) {\n      if (httpRequest)\n        return address.replace(/#/g, '%23');\n      return address;\n    });\n  };\n});\n\n/*\n * Fetch with authorization\n */\nhook('fetch', function() {\n  return function(load) {\n    return new Promise(function(resolve, reject) {\n      fetchTextFromURL(load.address, load.metadata.authorization, resolve, reject);\n    });\n  };\n});\n\n/*\n  __useDefault\n  \n  When a module object looks like:\n  newModule(\n    __useDefault: true,\n    default: 'some-module'\n  })\n\n  Then importing that module provides the 'some-module'\n  result directly instead of the full module.\n\n  Useful for eg module.exports = function() {}\n*/\nhook('import', function(systemImport) {\n  return function(name, parentName, parentAddress) {\n    if (parentName && parentName.name)\n      warn.call(this, 'System.import(name, { name: parentName }) is deprecated for System.import(name, parentName), while importing ' + name + ' from ' + parentName.name);\n    return systemImport.call(this, name, parentName, parentAddress).then(function(module) {\n      return module.__useDefault ? module['default'] : module;\n    });\n  };\n});\n\n/*\n * Allow format: 'detect' meta to enable format detection\n */\nhook('translate', function(systemTranslate) {\n  return function(load) {\n    if (load.metadata.format == 'detect')\n      load.metadata.format = undefined;\n    return systemTranslate.call(this, load);\n  };\n});\n\n/*\n Extend config merging one deep only\n\n  loader.config({\n    some: 'random',\n    config: 'here',\n    deep: {\n      config: { too: 'too' }\n    }\n  });\n\n  <=>\n\n  loader.some = 'random';\n  loader.config = 'here'\n  loader.deep = loader.deep || {};\n  loader.deep.config = { too: 'too' };\n\n\n  Normalizes meta and package configs allowing for:\n\n  System.config({\n    meta: {\n      './index.js': {}\n    }\n  });\n\n  To become\n\n  System.meta['https://thissite.com/index.js'] = {};\n\n  For easy normalization canonicalization with latest URL support.\n\n*/\nSystemJSLoader.prototype.env = 'development';\n\nSystemJSLoader.prototype.config = function(cfg) {\n  if ('warnings' in cfg)\n    this.warnings = cfg.warnings;\n\n  // always configure baseURL first\n  if (cfg.baseURL) {\n    var hasConfig = false;\n    function checkHasConfig(obj) {\n      for (var p in obj)\n        return true;\n    }\n    if (checkHasConfig(this.packages) || checkHasConfig(this.meta) || checkHasConfig(this.depCache) || checkHasConfig(this.bundles) || checkHasConfig(this.packageConfigPaths))\n      throw new TypeError('Incorrect configuration order. The baseURL must be configured with the first System.config call.');\n\n    this.baseURL = cfg.baseURL;\n\n    // sanitize baseURL\n    getBaseURLObj.call(this);\n  }\n\n  if (cfg.defaultJSExtensions) {\n    this.defaultJSExtensions = cfg.defaultJSExtensions;\n    warn.call(this, 'The defaultJSExtensions configuration option is deprecated, use packages configuration instead.');\n  }\n\n  if (cfg.pluginFirst)\n    this.pluginFirst = cfg.pluginFirst;\n\n  if (cfg.env) {\n    if (cfg.env != 'production' && cfg.env != 'development')\n      throw new TypeError('The config environment must be set to \"production\" or \"development\".');\n    setConditional.call(this, cfg.env);\n  }\n\n  if (cfg.paths) {\n    for (var p in cfg.paths)\n      this.paths[p] = cfg.paths[p];\n  }\n\n  if (cfg.map) {\n    var objMaps = '';\n    for (var p in cfg.map) {\n      var v = cfg.map[p];\n\n      // object map backwards-compat into packages configuration\n      if (typeof v !== 'string') {\n        objMaps += (objMaps.length ? ', ' : '') + '\"' + p + '\"';\n        var normalized = this.normalizeSync(p);\n\n        // if doing default js extensions, undo to get package name\n        if (this.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js')\n          normalized = normalized.substr(0, normalized.length - 3);\n\n        // if a package main, revert it\n        var pkgMatch = '';\n        for (var pkg in this.packages) {\n          if (normalized.substr(0, pkg.length) == pkg \n              && (!normalized[pkg.length] || normalized[pkg.length] == '/') \n              && pkgMatch.split('/').length < pkg.split('/').length)\n            pkgMatch = pkg;\n        }\n        if (pkgMatch && this.packages[pkgMatch].main)\n          normalized = normalized.substr(0, normalized.length - this.packages[pkgMatch].main.length - 1);\n\n        var pkg = this.packages[normalized] = this.packages[normalized] || {};\n        pkg.map = v;\n      }\n      else {\n        this.map[p] = v;\n      }\n    }\n    if (objMaps)\n      warn.call(this, 'The map configuration for ' + objMaps + ' uses object submaps, which is deprecated in global map.\\nUpdate this to use package contextual map with configs like System.config({ packages: { \"' + p + '\": { map: {...} } } }).');\n  }\n\n  if (cfg.packageConfigPaths) {\n    var packageConfigPaths = [];\n    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {\n      var path = cfg.packageConfigPaths[i];\n      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));\n      var normalized = this.normalizeSync(path.substr(0, packageLength) + '/');\n      if (this.defaultJSExtensions && path.substr(path.length - 3, 3) != '.js')\n        normalized = normalized.substr(0, normalized.length - 3);\n      packageConfigPaths[i] = normalized.substr(0, normalized.length - 1) + path.substr(packageLength);\n    }\n    this.packageConfigPaths = packageConfigPaths;\n  }\n\n  if (cfg.packages) {\n    for (var p in cfg.packages) {\n      if (p.match(/^([^\\/]+:)?\\/\\/$/))\n        throw new TypeError('\"' + p + '\" is not a valid package name.');\n\n      // request with trailing \"/\" to get package name exactly\n      var prop = this.normalizeSync(p + (p[p.length - 1] != '/' ? '/' : ''));\n      prop = prop.substr(0, prop.length - 1);\n\n      // if doing default js extensions, undo to get package name\n      // (unless already a package which would have skipped extension)\n      if (!this.packages[prop] && this.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js')\n        prop = prop.substr(0, prop.length - 3);\n\n      this.packages[prop] = this.packages[prop] || {};\n\n      // meta backwards compatibility\n      if (cfg.packages[p].modules) {\n        warn.call(this, 'Package ' + p + ' is configured with \"modules\", which is deprecated as it has been renamed to \"meta\".');\n        cfg.packages[p].meta = cfg.packages[p].modules;\n        delete cfg.packages[p].modules;\n      }\n\n      for (var q in cfg.packages[p])\n        if (indexOf.call(packageProperties, q) == -1)\n          warn.call(this, '\"' + q + '\" is not a valid package configuration option in package ' + p);\n\n      extendMeta(this.packages[prop], cfg.packages[p]);\n    }\n  }\n\n  if (cfg.bundles) {\n    for (var p in cfg.bundles) {\n      var bundle = [];\n      for (var i = 0; i < cfg.bundles[p].length; i++)\n        bundle.push(this.normalizeSync(cfg.bundles[p][i]));\n      this.bundles[p] = bundle;\n    }\n  }\n\n  for (var c in cfg) {\n    var v = cfg[c];\n    var normalizeProp = false, normalizeValArray = false;\n\n    if (c == 'baseURL' || c == 'map' || c == 'packages' || c == 'bundles' || c == 'paths' || c == 'warnings' || c == 'packageConfigPaths')\n      continue;\n\n    if (typeof v != 'object' || v instanceof Array) {\n      this[c] = v;\n    }\n    else {\n      this[c] = this[c] || {};\n\n      if (c == 'meta' || c == 'depCache')\n        normalizeProp = true;\n\n      for (var p in v) {\n        if (c == 'meta' && p[0] == '*')\n          this[c][p] = v[p];\n        else if (normalizeProp)\n          this[c][this.normalizeSync(p)] = v[p];\n        else\n          this[c][p] = v[p];\n      }\n    }\n  }\n};/*\n * Paths extension\n * \n * Applies paths and normalizes to a full URL\n */\nhook('normalize', function(normalize) {\n  return function(name, parentName) {\n    var normalized = normalize.apply(this, arguments);\n\n    // if the module is in the registry already, use that\n    if (this.has(normalized))\n      return normalized;\n\n    if (normalized.match(absURLRegEx)) {\n      // defaultJSExtensions backwards compatibility\n      if (this.defaultJSExtensions && normalized.substr(normalized.length - 3, 3) != '.js')\n        normalized += '.js';\n      return normalized;\n    }\n\n    // applyPaths implementation provided from ModuleLoader system.js source\n    normalized = applyPaths(this.paths, normalized) || normalized;\n\n    // defaultJSExtensions backwards compatibility\n    if (this.defaultJSExtensions && normalized.substr(normalized.length - 3, 3) != '.js')\n      normalized += '.js';\n\n    // ./x, /x -> page-relative\n    if (normalized[0] == '.' || normalized[0] == '/')\n      return new URL(normalized, baseURIObj).href;\n    // x -> baseURL-relative\n    else\n      return new URL(normalized, getBaseURLObj.call(this)).href;\n  };\n});/*\n * Package Configuration Extension\n *\n * Example:\n *\n * System.packages = {\n *   jquery: {\n *     basePath: 'lib', // optionally only use a subdirectory within the package\n *     main: 'index.js', // when not set, package name is requested directly\n *     format: 'amd',\n *     defaultExtension: 'ts', // defaults to 'js', can be set to false\n *     modules: {\n *       '*.ts': {\n *         loader: 'typescript'\n *       },\n *       'vendor/sizzle.js': {\n *         format: 'global'\n *       }\n *     },\n *     map: {\n *        // map internal require('sizzle') to local require('./vendor/sizzle')\n *        sizzle: './vendor/sizzle.js',\n *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'\n *        './vendor/another.js': './another/index.js',\n *        // test.js / test -> lib/test.js\n *        './test.js': './lib/test.js',\n *\n *        // environment-specific map configurations\n *        './index.js': {\n *          '~browser': './index-node.js'\n *        }\n *     },\n *     // allows for setting package-prefixed depCache\n *     // keys are normalized module names relative to the package itself\n *     depCache: {\n *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js\n *       './index.js': ['./test'],\n *       './test.js': ['sizzle']\n *     }\n *   }\n * };\n *\n * Then:\n *   import 'jquery'                       -> jquery/index.js\n *   import 'jquery/submodule'             -> jquery/submodule.js\n *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript\n *   import 'jquery/vendor/another'        -> another/index.js\n *\n * Detailed Behaviours\n * - main can have a leading \"./\" can be added optionally\n * - map and defaultExtension are applied to the main\n * - defaultExtension adds the extension only if the exact extension is not present\n * - defaultJSExtensions applies after map when defaultExtension is not set\n * - if a modules value is available for a module, map and defaultExtension are skipped\n * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)\n * - condition module map is '@env' module in package or '@system-env' globally\n *\n * In addition, the following modules properties will be allowed to be package\n * -relative as well in the package module config:\n *\n *   - loader\n *   - alias\n *\n *\n * Package Configuration Loading\n *\n * Not all packages may already have their configuration present in the System config\n * For these cases, a list of packageConfigPaths can be provided, which when matched against\n * a request, will first request a \".json\" file by the package name to derive the package\n * configuration from. This allows dynamic loading of non-predetermined code, a key use\n * case in SystemJS.\n *\n * Example:\n *\n *   System.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];\n *\n *   // will first request 'packages/new-package/package.json' for the package config\n *   // before completing the package request to 'packages/new-package/path'\n *   System.import('packages/new-package/path');\n *\n *   // will first request 'packages/test/package.json' before the main\n *   System.import('packages/test');\n *\n * When a package matches packageConfigPaths, it will always send a config request for\n * the package configuration.\n * The package name itself is taken to be the match up to and including the last wildcard\n * or trailing slash.\n * Package config paths are ordered - matching is done based on the first match found.\n * Any existing package configurations for the package will deeply merge with the\n * package config, with the existing package configurations taking preference.\n * To opt-out of the package configuration request for a package that matches\n * packageConfigPaths, use the { configured: true } package config option.\n *\n */\n(function() {\n\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.packages = {};\n      this.packageConfigPaths = {};\n      this._loader.pkgConfigPromises = {};\n      this._loader.pkgBundlePromises = {};\n    };\n  });\n\n  function getPackage(name) {\n    // use most specific package\n    var curPkg, curPkgLen = 0, pkgLen;\n    for (var p in this.packages) {\n      if (name.substr(0, p.length) === p && (name.length === p.length || name[p.length] === '/')) {\n        pkgLen = p.split('/').length;\n        if (pkgLen > curPkgLen) {\n          curPkg = p;\n          curPkgLen = pkgLen;\n        }\n      }\n    }\n    return curPkg;\n  }\n\n  function applyMap(map, name) {\n    var bestMatch, bestMatchLength = 0;\n\n    for (var p in map) {\n      if (name.substr(0, p.length) == p && (name.length == p.length || name[p.length] == '/')) {\n        var curMatchLength = p.split('/').length;\n        if (curMatchLength <= bestMatchLength)\n          continue;\n        bestMatch = p;\n        bestMatchLength = curMatchLength;\n      }\n    }\n\n    return bestMatch;\n  }\n\n  function getBasePath(pkg) {\n    // sanitize basePath\n    var basePath = pkg.basePath && pkg.basePath != '.' ? pkg.basePath : '';\n    if (basePath) {\n      if (basePath.substr(0, 2) == './')\n        basePath = basePath.substr(2);\n      if (basePath[basePath.length - 1] != '/')\n        basePath += '/';\n    }\n    return basePath;\n  }\n\n  // given the package subpath, return the resultant combined path\n  // defaultExtension is only added if the path does not have\n  // loader package meta or exact package meta\n  // We also re-incorporate package-level conditional syntax at this point\n  // allowing package map and package mains to point to conditionals\n  // when conditionals are present,\n  function toPackagePath(loader, pkgName, pkg, basePath, subPath, sync, isPlugin) {\n    // skip if its a plugin call already, or we have boolean / interpolation conditional syntax in subPath\n    var skipExtension = !!(isPlugin || subPath.indexOf('#?') != -1 || subPath.match(interpolationRegEx));\n\n    // exact meta or meta with any content after the last wildcard skips extension\n    if (!skipExtension && pkg.meta)\n      getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {\n        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)\n          skipExtension = true;\n      });\n\n    // exact global meta or meta with any content after the last wildcard skips extension\n    if (!skipExtension && loader.meta)\n      getMetaMatches(loader.meta, pkgName + '/' + basePath + subPath, function(metaPattern, matchMeta, matchDepth) {\n        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)\n          skipExtension = true;\n      });\n\n    var normalized = pkgName + '/' + basePath + subPath + (skipExtension ? '' : getDefaultExtension(pkg, subPath));\n\n    return sync ? normalized : booleanConditional.call(loader, normalized, pkgName + '/').then(function(name) {\n      return interpolateConditional.call(loader, name, pkgName + '/');\n    });\n  }\n\n  function getDefaultExtension(pkg, subPath) {\n    // don't apply extensions to folders or if defaultExtension = false\n    if (subPath[subPath.length - 1] != '/' && pkg.defaultExtension !== false) {\n      // work out what the defaultExtension is and add if not there already\n      var defaultExtension = '.' + (pkg.defaultExtension || 'js');\n      if (subPath.substr(subPath.length - defaultExtension.length) != defaultExtension)\n        return defaultExtension;\n    }\n    return '';\n  }\n\n  function applyPackageConfig(normalized, pkgName, pkg, sync, isPlugin) {\n    var loader = this;\n\n    var basePath = getBasePath(pkg);\n\n    // main\n    // NB can add a default package main convention here\n    if (pkgName === normalized && pkg.main)\n      normalized += '/' + (pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main);\n\n    // allow for direct package name normalization with trailling \"/\" (no main)\n    if (normalized.length == pkgName.length + 1 && normalized[pkgName.length] == '/')\n      return normalized;\n\n    // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')\n    if (normalized.length == pkgName.length)\n      return normalized + (loader.defaultJSExtensions && normalized.substr(normalized.length - 3, 3) != '.js' ? '.js' : '');\n\n    // apply map, checking without then with defaultExtension\n    if (pkg.map) {\n      var subPath = '.' + normalized.substr(pkgName.length);\n      var map = applyMap(pkg.map, subPath) || !isPlugin && applyMap(pkg.map, (subPath += getDefaultExtension(pkg, subPath.substr(2))));\n      var mapped = pkg.map[map];\n    }\n\n    function doMap(mapped) {\n      // '.' as a target is the package itself (with package main check)\n      if (mapped == '.')\n        return pkgName;\n      // internal package map\n      else if (mapped.substr(0, 2) == './')\n        return toPackagePath(loader, pkgName, pkg, basePath, mapped.substr(2), sync, isPlugin);\n      // global package map\n      else\n        return (sync ? loader.normalizeSync : loader.normalize).call(loader, mapped);\n    }\n\n    // apply non-environment map match\n    if (typeof mapped == 'string')\n      return doMap(mapped + subPath.substr(map.length));\n\n    // sync normalize does not apply environment map\n    if (sync || !mapped)\n      return toPackagePath(loader, pkgName, pkg, basePath, normalized.substr(pkgName.length + 1), sync, isPlugin);\n\n    // environment map build support\n    // -> we return [package-name]#[conditional-map] (\"jquery#:index.js\" in example above)\n    //    to indicate this unique conditional branch to builder in all of its possibilities\n    if (loader.builder)\n      return pkgName + '#:' + map.substr(2);\n\n    // environment map\n    return loader['import'](pkg.map['@env'] || '@system-env', pkgName)\n    .then(function(env) {\n      // first map condition to match is used\n      for (var e in mapped) {\n        var negate = e[0] == '~';\n\n        var value = readMemberExpression(negate ? e.substr(1) : e, env);\n\n        if (!negate && value || negate && !value)\n          return mapped[e] + subPath.substr(map.length);\n      }\n    })\n    .then(function(mapped) {\n      // no environment match\n      if (!mapped)\n        return toPackagePath(loader, pkgName, pkg, basePath, normalized.substr(pkgName.length + 1), sync, isPlugin);\n      else\n        return doMap(mapped);\n    });\n  }\n\n  function createPackageNormalize(normalize, sync) {\n    return function(name, parentName, isPlugin) {\n      isPlugin = isPlugin === true;\n\n      // apply contextual package map first\n      if (parentName)\n        var parentPackage = getPackage.call(this, parentName) ||\n            this.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&\n            getPackage.call(this, parentName.substr(0, parentName.length - 3));\n\n      if (parentPackage) {\n        // remove any parent package base path for normalization\n        var parentBasePath = getBasePath(this.packages[parentPackage]);\n        if (parentBasePath && parentName.substr(parentPackage.length + 1, parentBasePath.length) == parentBasePath)\n          parentName = parentPackage + parentName.substr(parentPackage.length + parentBasePath.length);\n\n        if (name[0] !== '.') {\n          var parentMap = this.packages[parentPackage].map;\n          if (parentMap) {\n            var map = applyMap(parentMap, name);\n            if (map) {\n              if (typeof parentMap[map] != 'string')\n                throw new TypeError('Unable to map an external require condition while normalizing ' + name + ', pending https://github.com/systemjs/systemjs/issues/937.');\n              name = parentMap[map] + name.substr(map.length);\n              // relative maps are package-relative\n              if (name[0] === '.')\n                parentName = parentPackage + '/';\n            }\n          }\n        }\n      }\n\n      var defaultJSExtension = this.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n\n      // apply map, core, paths\n      var normalized = normalize.call(this, name, parentName);\n\n      // undo defaultJSExtension\n      if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')\n        defaultJSExtension = false;\n      if (defaultJSExtension)\n        normalized = normalized.substr(0, normalized.length - 3);\n\n      // if we requested a relative path, and got the package name, remove the trailing '/' to apply main\n      // that is normalize('pkg/') does not apply main, while normalize('./', 'pkg/') does\n      if (parentPackage && name[0] == '.' && normalized == parentPackage + '/')\n        normalized = parentPackage;\n\n      var loader = this;\n\n      function packageResolution(normalized, pkgName, pkg) {\n        // check if we are inside a package\n        pkgName = pkgName || getPackage.call(loader, normalized);\n        var pkg = pkg || pkgName && loader.packages[pkgName];\n\n        if (pkg)\n          return applyPackageConfig.call(loader, normalized, pkgName, pkg, sync, isPlugin);\n        else\n          return normalized + (defaultJSExtension ? '.js' : '');\n      }\n\n      // do direct resolution if sync\n      if (sync)\n        return packageResolution(normalized);\n\n      // first check if we are in a package\n      var pkgName = getPackage.call(this, normalized);\n      var pkg = pkgName && this.packages[pkgName];\n\n      // if so, and the package is configured, then do direct resolution\n      if (pkg && pkg.configured)\n        return packageResolution(normalized, pkgName, pkg);\n\n      var pkgConfigMatch = pkgConfigPathMatch(loader, normalized);\n\n      if (!pkgConfigMatch.pkgName)\n        return packageResolution(normalized, pkgName, pkg);\n\n      // if we're within a known package path, then halt on\n      // further package configuration steps from bundles and config files\n      return Promise.resolve(getBundleFor(loader, normalized))\n\n      // ensure that any bundles in this package are triggered, and\n      // all that are triggered block any further loads in the package\n      .then(function(bundle) {\n        var pkgBundlePromises = loader._loader.pkgBundlePromises;\n        if (bundle || pkgBundlePromises[pkgConfigMatch.pkgName]) {\n          var pkgBundleLoads = pkgBundlePromises[pkgConfigMatch.pkgName] = pkgBundlePromises[pkgConfigMatch.pkgName] || { bundles: [], promise: Promise.resolve() };\n          if (bundle && indexOf.call(pkgBundleLoads.bundles, bundle) == -1) {\n            pkgBundleLoads.bundles.push(bundle);\n            pkgBundleLoads.promise = Promise.all([pkgBundleLoads.promise, loader.load(bundle)]);\n          }\n          return pkgBundleLoads.promise;\n        }\n      })\n\n      // having loaded any bundles, attempt a package resolution now\n      .then(function() {\n        return packageResolution(normalized, pkgConfigMatch.pkgName);\n      })\n\n      .then(function(curResolution) {\n        // if that resolution is defined in the registry use it\n        if (curResolution in loader.defined)\n          return curResolution;\n\n        // otherwise revert to loading configuration dynamically\n        return loadPackageConfigPaths(loader, pkgConfigMatch)\n        .then(function() {\n          // before doing a final resolution\n          return packageResolution(normalized);\n        });\n      });\n    };\n  }\n\n  // check if the given normalized name matches a packageConfigPath\n  // if so, loads the config\n  var packageConfigPathsRegExps = {};\n\n  function pkgConfigPathMatch(loader, normalized) {\n    var pkgPath, pkgConfigPaths = [];\n    for (var i = 0; i < loader.packageConfigPaths.length; i++) {\n      var p = loader.packageConfigPaths[i];\n      var pPkgLen = Math.max(p.lastIndexOf('*') + 1, p.lastIndexOf('/'));\n      var match = normalized.match(packageConfigPathsRegExps[p] ||\n          (packageConfigPathsRegExps[p] = new RegExp('^(' + p.substr(0, pPkgLen).replace(/\\*/g, '[^\\\\/]+') + ')(\\/|$)')));\n      if (match && (!pkgPath || pkgPath == match[1])) {\n        pkgPath = match[1];\n        pkgConfigPaths.push(pkgPath + p.substr(pPkgLen));\n      }\n    }\n    return {\n      pkgName: pkgPath,\n      configPaths: pkgConfigPaths\n    };\n  }\n\n  function loadPackageConfigPaths(loader, pkgConfigMatch) {\n    var curPkgConfig = loader.packages[pkgConfigMatch.pkgName];\n\n    if (curPkgConfig && curPkgConfig.configured)\n      return Promise.resolve();\n\n    return loader._loader.pkgConfigPromises[pkgConfigMatch.pkgName] || (\n      loader._loader.pkgConfigPromises[pkgConfigMatch.pkgName] = Promise.resolve()\n      .then(function() {\n        var pkgConfigPromises = [];\n        for (var i = 0; i < pkgConfigMatch.configPaths.length; i++) (function(pkgConfigPath) {\n          pkgConfigPromises.push(loader['fetch']({ name: pkgConfigPath, address: pkgConfigPath, metadata: {} })\n          .then(function(source) {\n            try {\n              return JSON.parse(source);\n            }\n            catch(e) {\n              throw new Error('Invalid JSON in package configuration file ' + pkgConfigPath);\n            }\n          })\n          .then(function(cfg) {\n            // support \"systemjs\" prefixing\n            if (cfg.systemjs)\n              cfg = cfg.systemjs;\n\n            // modules backwards compatibility\n            if (cfg.modules) {\n              cfg.meta = cfg.modules;\n              warn.call(loader, 'Package config file ' + pkgConfigPath + ' is configured with \"modules\", which is deprecated as it has been renamed to \"meta\".');\n            }\n\n            // remove any non-system properties if generic config file (eg package.json)\n            for (var p in cfg) {\n              if (indexOf.call(packageProperties, p) == -1)\n                delete cfg[p];\n            }\n\n            // support main array\n            if (cfg.main instanceof Array)\n              cfg.main = cfg.main[0];\n\n            // deeply-merge (to first level) config with any existing package config\n            if (curPkgConfig)\n              extendMeta(cfg, curPkgConfig);\n\n            // support external depCache\n            if (cfg.depCache)\n              for (var d in cfg.depCache) {\n                if (d.substr(0, 2) == './')\n                  continue;\n\n                var dNormalized = loader.normalizeSync(d);\n                loader.depCache[dNormalized] = (loader.depCache[dNormalized] || []).concat(cfg.depCache[d]);\n              }\n\n            curPkgConfig = loader.packages[pkgConfigMatch.pkgName] = cfg;\n          }));\n        })(pkgConfigMatch.configPaths[i]);\n\n        return Promise.all(pkgConfigPromises);\n      })\n    );\n  }\n\n  SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.normalize;\n\n  hook('normalizeSync', function(normalize) {\n    return createPackageNormalize(normalize, true);\n  });\n\n  hook('normalize', function(normalize) {\n    return createPackageNormalize(normalize, false);\n  });\n\n  function getMetaMatches(pkgMeta, subPath, matchFn) {\n    // wildcard meta\n    var meta = {};\n    var wildcardIndex;\n    for (var module in pkgMeta) {\n      // allow meta to start with ./ for flexibility\n      var dotRel = module.substr(0, 2) == './' ? './' : '';\n      if (dotRel)\n        module = module.substr(2);\n\n      wildcardIndex = module.indexOf('*');\n      if (wildcardIndex === -1)\n        continue;\n\n      if (module.substr(0, wildcardIndex) == subPath.substr(0, wildcardIndex)\n          && module.substr(wildcardIndex + 1) == subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {\n        matchFn(module, pkgMeta[dotRel + module], module.split('/').length);\n      }\n    }\n    // exact meta\n    var exactMeta = pkgMeta[subPath] || pkgMeta['./' + subPath];\n    if (exactMeta)\n      matchFn(exactMeta, exactMeta, 0);\n  }\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      return Promise.resolve(locate.call(this, load))\n      .then(function(address) {\n        var pkgName = getPackage.call(loader, load.name);\n        if (pkgName) {\n          var pkg = loader.packages[pkgName];\n          var basePath = getBasePath(pkg);\n          var subPath = load.name.substr(pkgName.length + basePath.length + 1);\n\n          // format\n          if (pkg.format)\n            load.metadata.format = load.metadata.format || pkg.format;\n\n          // depCache for packages\n          if (pkg.depCache) {\n            for (var d in pkg.depCache) {\n              if (d != './' + subPath)\n                continue;\n\n              var deps = pkg.depCache[d];\n              for (var i = 0; i < deps.length; i++)\n                loader['import'](deps[i], pkgName + '/');\n            }\n          }\n\n          var meta = {};\n          if (pkg.meta) {\n            var bestDepth = 0;\n            getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {\n              if (matchDepth > bestDepth)\n                bestDepth = matchDepth;\n              extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);\n            });\n\n            // allow alias and loader to be package-relative\n            if (meta.alias && meta.alias.substr(0, 2) == './')\n              meta.alias = pkgName + meta.alias.substr(1);\n            if (meta.loader && meta.loader.substr(0, 2) == './')\n              meta.loader = pkgName + meta.loader.substr(1);\n            extendMeta(load.metadata, meta);\n          }\n        }\n\n        return address;\n      });\n    };\n  });\n\n})();\n/*\n * Script tag fetch\n *\n * When load.metadata.scriptLoad is true, we load via script tag injection.\n */\n(function() {\n\n  if (typeof document != 'undefined')\n    var head = document.getElementsByTagName('head')[0];\n\n  var curSystem;\n\n  // if doing worker executing, this is set to the load record being executed\n  var workerLoad = null;\n  \n  // interactive mode handling method courtesy RequireJS\n  var ieEvents = head && (function() {\n    var s = document.createElement('script');\n    var isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';\n    return s.attachEvent && !(s.attachEvent.toString && s.attachEvent.toString().indexOf('[native code') < 0) && !isOpera;\n  })();\n\n  // IE interactive-only part\n  // we store loading scripts array as { script: <script>, load: {...} }\n  var interactiveLoadingScripts = [];\n  var interactiveScript;\n  function getInteractiveScriptLoad() {\n    if (interactiveScript && interactiveScript.script.readyState === 'interactive')\n      return interactiveScript.load;\n\n    for (var i = 0; i < interactiveLoadingScripts.length; i++)\n      if (interactiveLoadingScripts[i].script.readyState == 'interactive') {\n        interactiveScript = interactiveLoadingScripts[i];\n        return interactiveScript.load;\n      }\n  }\n  \n  // System.register, System.registerDynamic, AMD define pipeline\n  // this is called by the above methods when they execute\n  // we then run the reduceRegister_ collection function either immediately\n  // if we are in IE and know the currently executing script (interactive)\n  // or later if we need to wait for the synchronous load callback to know the script\n  var loadingCnt = 0;\n  var registerQueue = [];\n  hook('pushRegister_', function(pushRegister) {\n    return function(register) {\n      // if using eval-execution then skip\n      if (pushRegister.call(this, register))\n        return false;\n\n      // if using worker execution, then we're done\n      if (workerLoad)\n        this.reduceRegister_(workerLoad, register);\n\n      // detect if we know the currently executing load (IE)\n      // if so, immediately call reduceRegister\n      else if (ieEvents)\n        this.reduceRegister_(getInteractiveScriptLoad(), register);\n\n      // otherwise, add to our execution queue\n      // to call reduceRegister on sync script load event\n      else if (loadingCnt)\n        registerQueue.push(register);\n\n      // if we're not currently loading anything though\n      // then do the reduction against a null load\n      // (out of band named define or named register)\n      // note even in non-script environments, this catch is used\n      else\n        this.reduceRegister_(null, register);\n\n      return true;\n    };\n  });\n\n  function webWorkerImport(loader, load) {\n    return new Promise(function(resolve, reject) {\n      if (load.metadata.integrity)\n        reject(new Error('Subresource integrity checking is not supported in web workers.'));\n\n      workerLoad = load;\n      try {\n        importScripts(load.address);\n      }\n      catch(e) {\n        workerLoad = null;\n        reject(e);\n      }\n      workerLoad = null;\n\n      // if nothing registered, then something went wrong\n      if (!load.metadata.entry)\n        reject(new Error(load.address + ' did not call System.register or AMD define'));\n\n      resolve('');\n    });\n  }\n\n  // override fetch to use script injection\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var loader = this;\n\n      if (!load.metadata.scriptLoad || (!isBrowser && !isWorker))\n        return fetch.call(this, load);\n\n      if (isWorker)\n        return webWorkerImport(loader, load);\n\n      return new Promise(function(resolve, reject) {\n        var s = document.createElement('script');\n        \n        s.async = true;\n        \n        if (load.metadata.integrity)\n          s.setAttribute('integrity', load.metadata.integrity);\n\n        if (ieEvents) {\n          s.attachEvent('onreadystatechange', complete);\n          interactiveLoadingScripts.push({\n            script: s,\n            load: load\n          });\n        }\n        else {\n          s.addEventListener('load', complete, false);\n          s.addEventListener('error', error, false);\n        }\n\n        loadingCnt++;\n\n        curSystem = __global.System;\n\n        s.src = load.address;\n        head.appendChild(s);\n\n        function complete(evt) {\n          if (s.readyState && s.readyState != 'loaded' && s.readyState != 'complete')\n            return;\n\n          loadingCnt--;\n\n          // complete call is sync on execution finish\n          // (in ie already done reductions)\n          if (!load.metadata.entry && !registerQueue.length) {\n            loader.reduceRegister_(load);\n          }\n          else if (!ieEvents) {\n            for (var i = 0; i < registerQueue.length; i++)\n              loader.reduceRegister_(load, registerQueue[i]);\n            registerQueue = [];\n          }\n\n          cleanup();\n\n          // if nothing registered, then something went wrong\n          if (!load.metadata.entry && !load.metadata.bundle)\n            reject(new Error(load.name + ' did not call System.register or AMD define. If loading a global module configure the global name via the meta exports property for script injection support.'));\n\n          resolve('');\n        }\n\n        function error(evt) {\n          cleanup();\n          reject(new Error('Unable to load script ' + load.address));\n        }\n\n        function cleanup() {\n          __global.System = curSystem;\n\n          if (s.detachEvent) {\n            s.detachEvent('onreadystatechange', complete);\n            for (var i = 0; i < interactiveLoadingScripts.length; i++)\n              if (interactiveLoadingScripts[i].script == s) {\n                if (interactiveScript && interactiveScript.script == s)\n                  interactiveScript = null;\n                interactiveLoadingScripts.splice(i, 1);\n              }\n          }\n          else {\n            s.removeEventListener('load', complete, false);\n            s.removeEventListener('error', error, false);\n          }\n\n          head.removeChild(s);\n        }\n      });\n    };\n  });\n})();\n/*\n * Instantiate registry extension\n *\n * Supports Traceur System.register 'instantiate' output for loading ES6 as ES5.\n *\n * - Creates the loader.register function\n * - Also supports metadata.format = 'register' in instantiate for anonymous register modules\n * - Also supports metadata.deps, metadata.execute and metadata.executingRequire\n *     for handling dynamic modules alongside register-transformed ES6 modules\n *\n *\n * The code here replicates the ES6 linking groups algorithm to ensure that\n * circular ES6 compiled into System.register can work alongside circular AMD \n * and CommonJS, identically to the actual ES6 loader.\n *\n */\n\n\n/*\n * Registry side table entries in loader.defined\n * Registry Entry Contains:\n *    - name\n *    - deps \n *    - declare for declarative modules\n *    - execute for dynamic modules, different to declarative execute on module\n *    - executingRequire indicates require drives execution for circularity of dynamic modules\n *    - declarative optional boolean indicating which of the above\n *\n * Can preload modules directly on System.defined['my/module'] = { deps, execute, executingRequire }\n *\n * Then the entry gets populated with derived information during processing:\n *    - normalizedDeps derived from deps, created in instantiate\n *    - groupIndex used by group linking algorithm\n *    - evaluated indicating whether evaluation has happend\n *    - module the module record object, containing:\n *      - exports actual module exports\n *\n *    For dynamic we track the es module with:\n *    - esModule actual es module value\n *    - esmExports whether to extend the esModule with named exports\n *      \n *    Then for declarative only we track dynamic bindings with the 'module' records:\n *      - name\n *      - exports\n *      - setters declarative setter functions\n *      - dependencies, module records of dependencies\n *      - importers, module records of dependents\n *\n * After linked and evaluated, entries are removed, declarative module records remain in separate\n * module binding table\n *\n */\nfunction createEntry() {\n  return {\n    name: null,\n    deps: null,\n    declare: null,\n    execute: null,\n    executingRequire: false,\n    declarative: false,\n    normalizedDeps: null,\n    groupIndex: null,\n    evaluated: false,\n    module: null,\n    esModule: null,\n    esmExports: false\n  };\n}\n\n(function() {\n\n  /*\n   * There are two variations of System.register:\n   * 1. System.register for ES6 conversion (2-3 params) - System.register([name, ]deps, declare)\n   *    see https://github.com/ModuleLoader/es6-module-loader/wiki/System.register-Explained\n   *\n   * 2. System.registerDynamic for dynamic modules (3-4 params) - System.registerDynamic([name, ]deps, executingRequire, execute)\n   * the true or false statement \n   *\n   * this extension implements the linking algorithm for the two variations identical to the spec\n   * allowing compiled ES6 circular references to work alongside AMD and CJS circular references.\n   *\n   */\n  SystemJSLoader.prototype.register = function(name, deps, declare) {\n    if (typeof name != 'string') {\n      declare = deps;\n      deps = name;\n      name = null;\n    }\n\n    // dynamic backwards-compatibility\n    // can be deprecated eventually\n    if (typeof declare == 'boolean')\n      return this.registerDynamic.apply(this, arguments);\n\n    var entry = createEntry();\n    // ideally wouldn't apply map config to bundle names but \n    // dependencies go through map regardless so we can't restrict\n    // could reconsider in shift to new spec\n    entry.name = name && (this.normalizeSync || this.normalize).call(this, name);\n    entry.declarative = true;\n    entry.deps = deps;\n    entry.declare = declare;\n\n    this.pushRegister_({\n      amd: false,\n      entry: entry\n    });\n  };\n  SystemJSLoader.prototype.registerDynamic = function(name, deps, declare, execute) {\n    if (typeof name != 'string') {\n      execute = declare;\n      declare = deps;\n      deps = name;\n      name = null;\n    }\n\n    // dynamic\n    var entry = createEntry();\n    entry.name = name && (this.normalizeSync || this.normalize).call(this, name);\n    entry.deps = deps;\n    entry.execute = execute;\n    entry.executingRequire = declare;\n\n    this.pushRegister_({\n      amd: false,\n      entry: entry\n    });\n  };\n  hook('reduceRegister_', function() {\n    return function(load, register) {\n      if (!register)\n        return;\n\n      var entry = register.entry;\n      var curMeta = load && load.metadata;\n\n      // named register\n      if (entry.name) {\n        if (!(entry.name in this.defined))\n          this.defined[entry.name] = entry;\n\n        if (curMeta)\n          curMeta.bundle = true;\n      }\n      // anonymous register\n      if (!entry.name || load && entry.name == load.name) {\n        if (!curMeta)\n          throw new TypeError('Unexpected anonymous System.register call.');\n        if (curMeta.entry) {\n          if (curMeta.format == 'register')\n            throw new Error('Multiple anonymous System.register calls in module ' + load.name + '. If loading a bundle, ensure all the System.register calls are named.');\n          else\n            throw new Error('Module ' + load.name + ' interpreted as ' + curMeta.format + ' module format, but called System.register.');\n        }\n        if (!curMeta.format)\n          curMeta.format = 'register';\n        curMeta.entry = entry;\n      }\n    };\n  });\n\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n\n      this.defined = {};\n      this._loader.moduleRecords = {};\n    };\n  });\n\n  function buildGroups(entry, loader, groups) {\n    groups[entry.groupIndex] = groups[entry.groupIndex] || [];\n\n    if (indexOf.call(groups[entry.groupIndex], entry) != -1)\n      return;\n\n    groups[entry.groupIndex].push(entry);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = loader.defined[depName];\n      \n      // not in the registry means already linked / ES6\n      if (!depEntry || depEntry.evaluated)\n        continue;\n      \n      // now we know the entry is in our unlinked linkage group\n      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);\n\n      // the group index of an entry is always the maximum\n      if (depEntry.groupIndex === null || depEntry.groupIndex < depGroupIndex) {\n        \n        // if already in a group, remove from the old group\n        if (depEntry.groupIndex !== null) {\n          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);\n\n          // if the old group is empty, then we have a mixed depndency cycle\n          if (groups[depEntry.groupIndex].length == 0)\n            throw new Error(\"Mixed dependency cycle detected\");\n        }\n\n        depEntry.groupIndex = depGroupIndex;\n      }\n\n      buildGroups(depEntry, loader, groups);\n    }\n  }\n\n  function link(name, loader) {\n    var startEntry = loader.defined[name];\n\n    // skip if already linked\n    if (startEntry.module)\n      return;\n\n    startEntry.groupIndex = 0;\n\n    var groups = [];\n\n    buildGroups(startEntry, loader, groups);\n\n    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;\n    for (var i = groups.length - 1; i >= 0; i--) {\n      var group = groups[i];\n      for (var j = 0; j < group.length; j++) {\n        var entry = group[j];\n\n        // link each group\n        if (curGroupDeclarative)\n          linkDeclarativeModule(entry, loader);\n        else\n          linkDynamicModule(entry, loader);\n      }\n      curGroupDeclarative = !curGroupDeclarative; \n    }\n  }\n\n  // module binding records\n  function Module() {}\n  defineProperty(Module, 'toString', {\n    value: function() {\n      return 'Module';\n    }\n  });\n\n  function getOrCreateModuleRecord(name, moduleRecords) {\n    return moduleRecords[name] || (moduleRecords[name] = {\n      name: name,\n      dependencies: [],\n      exports: new Module(), // start from an empty module and extend\n      importers: []\n    });\n  }\n\n  function linkDeclarativeModule(entry, loader) {\n    // only link if already not already started linking (stops at circular)\n    if (entry.module)\n      return;\n\n    var moduleRecords = loader._loader.moduleRecords;\n    var module = entry.module = getOrCreateModuleRecord(entry.name, moduleRecords);\n    var exports = entry.module.exports;\n\n    var declaration = entry.declare.call(__global, function(name, value) {\n      module.locked = true;\n\n      if (typeof name == 'object') {\n        for (var p in name)\n          exports[p] = name[p];\n      }\n      else {\n        exports[name] = value;\n      }\n\n      for (var i = 0, l = module.importers.length; i < l; i++) {\n        var importerModule = module.importers[i];\n        if (!importerModule.locked) {\n          var importerIndex = indexOf.call(importerModule.dependencies, module);\n          importerModule.setters[importerIndex](exports);\n        }\n      }\n\n      module.locked = false;\n      return value;\n    }, entry.name);\n    \n    module.setters = declaration.setters;\n    module.execute = declaration.execute;\n\n    if (!module.setters || !module.execute) {\n      throw new TypeError('Invalid System.register form for ' + entry.name);\n    }\n\n    // now link all the module dependencies\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = loader.defined[depName];\n      var depModule = moduleRecords[depName];\n\n      // work out how to set depExports based on scenarios...\n      var depExports;\n\n      if (depModule) {\n        depExports = depModule.exports;\n      }\n      // dynamic, already linked in our registry\n      else if (depEntry && !depEntry.declarative) {\n        depExports = depEntry.esModule;\n      }\n      // in the loader registry\n      else if (!depEntry) {\n        depExports = loader.get(depName);\n      }\n      // we have an entry -> link\n      else {\n        linkDeclarativeModule(depEntry, loader);\n        depModule = depEntry.module;\n        depExports = depModule.exports;\n      }\n\n      // only declarative modules have dynamic bindings\n      if (depModule && depModule.importers) {\n        depModule.importers.push(module);\n        module.dependencies.push(depModule);\n      }\n      else {\n        module.dependencies.push(null);\n      }\n      \n      // run setters for all entries with the matching dependency name\n      var originalIndices = entry.originalIndices[i];\n      for (var j = 0, len = originalIndices.length; j < len; ++j) {\n        var index = originalIndices[j];\n        if (module.setters[index]) {\n          module.setters[index](depExports);\n        }\n      }\n    }\n  }\n\n  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)\n  function getModule(name, loader) {\n    var exports;\n    var entry = loader.defined[name];\n\n    if (!entry) {\n      exports = loader.get(name);\n      if (!exports)\n        throw new Error('Unable to load dependency ' + name + '.');\n    }\n\n    else {\n      if (entry.declarative)\n        ensureEvaluated(name, [], loader);\n    \n      else if (!entry.evaluated)\n        linkDynamicModule(entry, loader);\n\n      exports = entry.module.exports;\n    }\n\n    if ((!entry || entry.declarative) && exports && exports.__useDefault)\n      return exports['default'];\n    \n    return exports;\n  }\n\n  function linkDynamicModule(entry, loader) {\n    if (entry.module)\n      return;\n\n    var exports = {};\n\n    var module = entry.module = { exports: exports, id: entry.name };\n\n    // AMD requires execute the tree first\n    if (!entry.executingRequire) {\n      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n        var depName = entry.normalizedDeps[i];\n        // we know we only need to link dynamic due to linking algorithm\n        var depEntry = loader.defined[depName];\n        if (depEntry)\n          linkDynamicModule(depEntry, loader);\n      }\n    }\n\n    // now execute\n    entry.evaluated = true;\n    var output = entry.execute.call(__global, function(name) {\n      for (var i = 0, l = entry.deps.length; i < l; i++) {\n        if (entry.deps[i] != name)\n          continue;\n        return getModule(entry.normalizedDeps[i], loader);\n      }\n      throw new Error('Module ' + name + ' not declared as a dependency.');\n    }, exports, module);\n    \n    if (output)\n      module.exports = output;\n\n    // create the esModule object, which allows ES6 named imports of dynamics\n    exports = module.exports;\n\n    // __esModule flag treats as already-named\n    if (exports && exports.__esModule)\n      entry.esModule = exports;\n    // set module as 'default' export, then fake named exports by iterating properties\n    else if (entry.esmExports && exports !== __global)\n      entry.esModule = getESModule(exports);\n    // just use the 'default' export\n    else\n      entry.esModule = { 'default': exports };\n  }\n\n  /*\n   * Given a module, and the list of modules for this current branch,\n   *  ensure that each of the dependencies of this module is evaluated\n   *  (unless one is a circular dependency already in the list of seen\n   *  modules, in which case we execute it)\n   *\n   * Then we evaluate the module itself depth-first left to right \n   * execution to match ES6 modules\n   */\n  function ensureEvaluated(moduleName, seen, loader) {\n    var entry = loader.defined[moduleName];\n\n    // if already seen, that means it's an already-evaluated non circular dependency\n    if (!entry || entry.evaluated || !entry.declarative)\n      return;\n\n    // this only applies to declarative modules which late-execute\n\n    seen.push(moduleName);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      if (indexOf.call(seen, depName) == -1) {\n        if (!loader.defined[depName])\n          loader.get(depName);\n        else\n          ensureEvaluated(depName, seen, loader);\n      }\n    }\n\n    if (entry.evaluated)\n      return;\n\n    entry.evaluated = true;\n    entry.module.execute.call(__global);\n  }\n\n  // override the delete method to also clear the register caches\n  hook('delete', function(del) {\n    return function(name) {\n      delete this._loader.moduleRecords[name];\n      delete this.defined[name];\n      return del.call(this, name);\n    };\n  });\n\n  var leadingCommentAndMetaRegEx = /^\\s*(\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)*\\s*/;\n  function detectRegisterFormat(source) {\n    var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);\n    return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) == 'System.register';\n  }\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      if (this.defined[load.name]) {\n        load.metadata.format = 'defined';\n        return '';\n      }\n      \n      if (load.metadata.format == 'register' && !load.metadata.authorization && load.metadata.scriptLoad !== false)\n        load.metadata.scriptLoad = true;\n\n      load.metadata.deps = load.metadata.deps || [];\n      \n      return fetch.call(this, load);\n    };\n  });\n\n  hook('translate', function(translate) {\n    // we run the meta detection here (register is after meta)\n    return function(load) {\n      load.metadata.deps = load.metadata.deps || [];\n      return Promise.resolve(translate.call(this, load)).then(function(source) {\n        // run detection for register format\n        if (load.metadata.format == 'register' || !load.metadata.format && detectRegisterFormat(load.source))\n          load.metadata.format = 'register';\n        return source;\n      });\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n\n      var entry;\n\n      // first we check if this module has already been defined in the registry\n      if (loader.defined[load.name]) {\n        entry = loader.defined[load.name];\n        entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // picked up already by an anonymous System.register script injection\n      // or via the dynamic formats\n      else if (load.metadata.entry) {\n        entry = load.metadata.entry;\n        entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // Contains System.register calls\n      // (dont run bundles in the builder)\n      else if (!(loader.builder && load.metadata.bundle) \n          && (load.metadata.format == 'register' || load.metadata.format == 'esm' || load.metadata.format == 'es6')) {\n        \n        if (typeof __exec != 'undefined')\n          __exec.call(loader, load);\n\n        if (!load.metadata.entry && !load.metadata.bundle)\n          throw new Error(load.name + ' detected as ' + load.metadata.format + ' but didn\\'t execute.');\n\n        entry = load.metadata.entry;\n\n        // support metadata deps for System.register\n        if (entry && load.metadata.deps)\n          entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // named bundles are just an empty module\n      if (!entry) {\n        entry = createEntry();\n        entry.deps = load.metadata.deps;\n        entry.execute = function() {};\n      }\n\n      // place this module onto defined for circular references\n      loader.defined[load.name] = entry;\n      \n      var grouped = group(entry.deps);\n      \n      entry.deps = grouped.names;\n      entry.originalIndices = grouped.indices;\n      entry.name = load.name;\n      entry.esmExports = load.metadata.esmExports !== false;\n\n      // first, normalize all dependencies\n      var normalizePromises = [];\n      for (var i = 0, l = entry.deps.length; i < l; i++)\n        normalizePromises.push(Promise.resolve(loader.normalize(entry.deps[i], load.name)));\n\n      return Promise.all(normalizePromises).then(function(normalizedDeps) {\n\n        entry.normalizedDeps = normalizedDeps;\n\n        return {\n          deps: entry.deps,\n          execute: function() {\n            // recursively ensure that the module and all its \n            // dependencies are linked (with dependency group handling)\n            link(load.name, loader);\n\n            // now handle dependency execution in correct order\n            ensureEvaluated(load.name, [], loader);\n\n            // remove from the registry\n            loader.defined[load.name] = undefined;\n\n            // return the defined module object\n            return loader.newModule(entry.declarative ? entry.module.exports : entry.esModule);\n          }\n        };\n      });\n    };\n  });\n})();\n/*\n * Extension to detect ES6 and auto-load Traceur or Babel for processing\n */\n(function() {\n  // good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case\n  var esmRegEx = /(^\\s*|[}\\);\\n]\\s*)(import\\s+(['\"]|(\\*\\s+as\\s+)?[^\"'\\(\\)\\n;]+\\s+from\\s+['\"]|\\{)|export\\s+\\*\\s+from\\s+[\"']|export\\s+(\\{|default|function|class|var|const|let|async\\s+function))/;\n\n  var traceurRuntimeRegEx = /\\$traceurRuntime\\s*\\./;\n  var babelHelpersRegEx = /babelHelpers\\s*\\./;\n\n  hook('translate', function(translate) {\n    return function(load) {\n      var loader = this;\n      return translate.call(loader, load)\n      .then(function(source) {\n        // detect & transpile ES6\n        if (load.metadata.format == 'esm' || load.metadata.format == 'es6' || !load.metadata.format && loader.transpiler !== false && source.match(esmRegEx)) {\n          if (load.metadata.format == 'es6')\n            warn.call(loader, 'Module ' + load.name + ' has metadata setting its format to \"es6\", which is deprecated.\\nThis should be updated to \"esm\".');\n\n          load.metadata.format = 'esm';\n\n          if (loader.transpiler === false) {\n            // we accept translation to esm for builds though to enable eg rollup optimizations\n            if (loader.builder)\n              return source;\n            throw new TypeError('Unable to dynamically transpile ES module as System.transpiler set to false.');\n          }\n\n          // setting loadedTranspiler_ = false tells the next block to\n          // do checks for setting transpiler metadata\n          loader.loadedTranspiler_ = loader.loadedTranspiler_ || false;\n          if (loader.pluginLoader)\n            loader.pluginLoader.loadedTranspiler_ = loader.loadedTranspiler_ || false;\n\n          // builder support\n          if (loader.builder)\n            load.metadata.originalSource = load.source;\n\n          // defined in es6-module-loader/src/transpile.js\n          return transpile.call(loader, load)\n          .then(function(source) {\n            // clear sourceMap as transpiler embeds it\n            load.metadata.sourceMap = undefined;\n            return source;\n          });\n        }\n\n        // skip transpiler and transpiler runtime loading when transpiler is disabled\n        if (loader.transpiler === false)\n          return source;\n\n        // load the transpiler correctly\n        if (loader.loadedTranspiler_ === false && load.name == loader.normalizeSync(loader.transpiler)) {\n          warn.call(loader, 'Note that internal transpilation via System.transpiler has been deprecated for transpiler plugins.');\n\n          // always load transpiler as a global\n          if (source.length > 100) {\n            load.metadata.format = load.metadata.format || 'global';\n\n            if (loader.transpiler === 'traceur')\n              load.metadata.exports = 'traceur';\n            if (loader.transpiler === 'typescript')\n              load.metadata.exports = 'ts';\n          }\n\n          loader.loadedTranspiler_ = true;\n        }\n\n        // load the transpiler runtime correctly\n        if (loader.loadedTranspilerRuntime_ === false) {\n          if (load.name == loader.normalizeSync('traceur-runtime')\n              || load.name == loader.normalizeSync('babel/external-helpers*')) {\n            if (source.length > 100)\n              load.metadata.format = load.metadata.format || 'global';\n\n            loader.loadedTranspilerRuntime_ = true;\n          }\n        }\n\n        // detect transpiler runtime usage to load runtimes\n        if ((load.metadata.format == 'register' || load.metadata.bundle) && loader.loadedTranspilerRuntime_ !== true) {\n          if (!__global.$traceurRuntime && load.source.match(traceurRuntimeRegEx)) {\n            loader.loadedTranspilerRuntime_ = loader.loadedTranspilerRuntime_ || false;\n            return loader['import']('traceur-runtime').then(function() {\n              return source;\n            });\n          }\n          if (!__global.babelHelpers && load.source.match(babelHelpersRegEx)) {\n            loader.loadedTranspilerRuntime_ = loader.loadedTranspilerRuntime_ || false;\n            return loader['import']('babel/external-helpers').then(function() {\n              return source;\n            });\n          }\n        }\n\n        return source;\n      });\n    };\n  });\n\n})();\n/*\n  SystemJS Global Format\n\n  Supports\n    metadata.deps\n    metadata.globals\n    metadata.exports\n\n  Without metadata.exports, detects writes to the global object.\n*/\nvar __globalName = typeof self != 'undefined' ? 'self' : 'global';\n\nhook('fetch', function(fetch) {\n  return function(load) {\n    if (load.metadata.exports && !load.metadata.format)\n      load.metadata.format = 'global';\n\n    // A global with exports, no globals and no deps\n    // can be loaded via a script tag\n    if (load.metadata.format == 'global' && !load.metadata.authorization\n        && load.metadata.exports && !load.metadata.globals \n        && (!load.metadata.deps || load.metadata.deps.length == 0)\n        && load.metadata.scriptLoad !== false)\n      load.metadata.scriptLoad = true;\n\n    return fetch.call(this, load);\n  };\n});\n\n// ideally we could support script loading for globals, but the issue with that is that\n// we can't do it with AMD support side-by-side since AMD support means defining the\n// global define, and global support means not definining it, yet we don't have any hook\n// into the \"pre-execution\" phase of a script tag being loaded to handle both cases\nhook('instantiate', function(instantiate) {\n  return function(load) {\n    var loader = this;\n\n    if (!load.metadata.format)\n      load.metadata.format = 'global';\n\n    // global is a fallback module format\n    if (load.metadata.format == 'global' && !load.metadata.registered) {\n\n      var entry = createEntry();\n\n      load.metadata.entry = entry;\n\n      entry.deps = [];\n\n      for (var g in load.metadata.globals)\n        entry.deps.push(load.metadata.globals[g]);\n\n      entry.execute = function(require, exports, module) {\n\n        var globals;\n        if (load.metadata.globals) {\n          globals = {};\n          for (var g in load.metadata.globals)\n            if (load.metadata.globals[g])\n              globals[g] = require(load.metadata.globals[g]);\n        }\n        \n        var exportName = load.metadata.exports;\n\n        if (exportName)\n          load.source += '\\n' + __globalName + '[\"' + exportName + '\"] = ' + exportName + ';';\n\n        var retrieveGlobal = loader.get('@@global-helpers').prepareGlobal(module.id, exportName, globals);\n\n        __exec.call(loader, load);\n\n        return retrieveGlobal();\n      }\n    }\n    return instantiate.call(this, load);\n  };\n});\nhook('reduceRegister_', function(reduceRegister) {\n  return function(load, register) {\n    if (register || !load.metadata.exports)\n      return reduceRegister.call(this, load, register);\n\n    load.metadata.format = 'global';\n    var entry = load.metadata.entry = createEntry();\n    entry.deps = load.metadata.deps;\n    var globalValue = readMemberExpression(load.metadata.exports, __global);\n    entry.execute = function() {\n      return globalValue;\n    };\n  };\n});\n\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(loader);\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    // bare minimum ignores for IE8\n    var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external', 'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB'];\n\n    var globalSnapshot;\n\n    function forEachGlobal(callback) {\n      if (Object.keys)\n        Object.keys(__global).forEach(callback);\n      else\n        for (var g in __global) {\n          if (!hasOwnProperty.call(__global, g))\n            continue;\n          callback(g);\n        }\n    }\n\n    function forEachGlobalValue(callback) {\n      forEachGlobal(function(globalName) {\n        if (indexOf.call(ignoredGlobalProps, globalName) != -1)\n          return;\n        try {\n          var value = __global[globalName];\n        }\n        catch (e) {\n          ignoredGlobalProps.push(globalName);\n        }\n        callback(globalName, value);\n      });\n    }\n\n    loader.set('@@global-helpers', loader.newModule({\n      prepareGlobal: function(moduleName, exportName, globals) {\n        // disable module detection\n        var curDefine = __global.define;\n        \n        __global.define = undefined;\n        __global.exports = undefined;\n        if (__global.module && __global.module.exports)\n          __global.module = undefined;\n\n        // set globals\n        var oldGlobals;\n        if (globals) {\n          oldGlobals = {};\n          for (var g in globals) {\n            oldGlobals[g] = __global[g];\n            __global[g] = globals[g];\n          }\n        }\n\n        // store a complete copy of the global object in order to detect changes\n        if (!exportName) {\n          globalSnapshot = {};\n\n          forEachGlobalValue(function(name, value) {\n            globalSnapshot[name] = value;\n          });\n        }\n\n        // return function to retrieve global\n        return function() {\n          var globalValue;\n\n          if (exportName) {\n            globalValue = readMemberExpression(exportName, __global);\n          }\n          else {\n            var singleGlobal;\n            var multipleExports;\n            var exports = {};\n\n            forEachGlobalValue(function(name, value) {\n              if (globalSnapshot[name] === value)\n                return;\n              if (typeof value == 'undefined')\n                return;\n              exports[name] = value;\n\n              if (typeof singleGlobal != 'undefined') {\n                if (!multipleExports && singleGlobal !== value)\n                  multipleExports = true;\n              }\n              else {\n                singleGlobal = value;\n              }\n            });\n            globalValue = multipleExports ? exports : singleGlobal;\n          }\n\n          // revert globals\n          if (oldGlobals) {\n            for (var g in oldGlobals)\n              __global[g] = oldGlobals[g];\n          }\n          __global.define = curDefine;\n\n          return globalValue;\n        };\n      }\n    }));\n  };\n});\n/*\n  SystemJS CommonJS Format\n*/\n(function() {\n  // CJS Module Format\n  // require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...\n  var cjsExportsRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])(exports\\s*(\\[['\"]|\\.)|module(\\.exports|\\['exports'\\]|\\[\"exports\"\\])\\s*(\\[['\"]|[=,\\.]))/;\n  // RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\n  var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*')\\s*\\)/g;\n  var commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n\n  var stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n  function getCJSDeps(source) {\n    cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\n\n    var deps = [];\n\n    var match;\n\n    // track string and comment locations for unminified source    \n    var stringLocations = [], commentLocations = [];\n\n    function inLocation(locations, match) {\n      for (var i = 0; i < locations.length; i++)\n        if (locations[i][0] < match.index && locations[i][1] > match.index)\n          return true;\n      return false;\n    }\n\n    if (source.length / source.split('\\n').length < 200) {\n      while (match = stringRegEx.exec(source))\n        stringLocations.push([match.index, match.index + match[0].length]);\n      \n      while (match = commentRegEx.exec(source)) {\n        // only track comments not starting in strings\n        if (!inLocation(stringLocations, match))\n          commentLocations.push([match.index, match.index + match[0].length]);\n      }\n    }\n\n    while (match = cjsRequireRegEx.exec(source)) {\n      // ensure we're not within a string or comment location\n      if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\n        var dep = match[1].substr(1, match[1].length - 2);\n        // skip cases like require('\" + file + \"')\n        if (dep.match(/\"|'/))\n          continue;\n        // trailing slash requires are removed as they don't map mains in SystemJS\n        if (dep[dep.length - 1] == '/')\n          dep = dep.substr(0, dep.length - 1);\n        deps.push(dep);\n      }\n    }\n\n    return deps;\n  }\n\n  hook('normalize', function(normalize) {\n    return function(name, parentName) {\n      return normalize.apply(this, arguments);\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      if (!load.metadata.format) {\n        cjsExportsRegEx.lastIndex = 0;\n        cjsRequireRegEx.lastIndex = 0;\n        if (cjsRequireRegEx.exec(load.source) || cjsExportsRegEx.exec(load.source))\n          load.metadata.format = 'cjs';\n      }\n\n      if (load.metadata.format == 'cjs') {\n        var metaDeps = load.metadata.deps;\n        var deps = load.metadata.cjsRequireDetection === false ? [] : getCJSDeps(load.source);\n\n        for (var g in load.metadata.globals)\n          if (load.metadata.globals[g])\n            deps.push(load.metadata.globals[g]);\n\n        var entry = createEntry();\n\n        load.metadata.entry = entry;\n\n        entry.deps = deps;\n        entry.executingRequire = true;\n        entry.execute = function(_require, exports, module) {\n          function require(name) {\n            if (name[name.length - 1] == '/')\n              name = name.substr(0, name.length - 1);\n            return _require.apply(this, arguments);\n          }\n\n          // ensure meta deps execute first\n          for (var i = 0; i < metaDeps.length; i++)\n            require(metaDeps[i]);\n\n          // disable AMD detection\n          var define = __global.define;\n          __global.define = undefined;\n\n          var pathVars = loader.get('@@cjs-helpers').getPathVars(module.id);\n\n          __global.__cjsWrapper = {\n            exports: exports,\n            args: [require, exports, module, pathVars.filename, pathVars.dirname, __global, __global]\n          };\n\n          var globals = '';\n          if (load.metadata.globals) {\n            for (var g in load.metadata.globals)\n              globals += 'var ' + g + ' = require(\"' + load.metadata.globals[g] + '\");';\n          }\n\n          load.source = \"(function(require, exports, module, __filename, __dirname, global, GLOBAL) {\" + globals\n              + load.source + \"\\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);\";\n\n          __exec.call(loader, load);\n\n          __global.__cjsWrapper = undefined;\n          __global.define = define;\n        };\n      }\n\n      return instantiate.call(loader, load);\n    };\n  });\n})();\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(loader);\n\n    if (typeof window != 'undefined' && typeof document != 'undefined' && window.location)\n      var windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n\n    loader.set('@@cjs-helpers', loader.newModule({\n      getPathVars: function(moduleId) {\n        // remove any plugin syntax\n        var pluginIndex = moduleId.lastIndexOf('!');\n        var filename;\n        if (pluginIndex != -1)\n          filename = moduleId.substr(0, pluginIndex);\n        else\n          filename = moduleId;\n\n        var dirname = filename.split('/');\n        dirname.pop();\n        dirname = dirname.join('/');\n\n        if (filename.substr(0, 8) == 'file:///') {\n          filename = filename.substr(7);\n          dirname = dirname.substr(7);\n\n          // on windows remove leading '/'\n          if (isWindows) {\n            filename = filename.substr(1);\n            dirname = dirname.substr(1);\n          }\n        }\n        else if (windowOrigin && filename.substr(0, windowOrigin.length) === windowOrigin) {\n          filename = filename.substr(windowOrigin.length);\n          dirname = dirname.substr(windowOrigin.length);\n        }\n\n        return {\n          filename: filename,\n          dirname: dirname\n        };\n      }\n    }))\n  };\n});/*\n * AMD Helper function module\n * Separated into its own file as this is the part needed for full AMD support in SFX builds\n * NB since implementations have now diverged this can be merged back with amd.js\n */\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(this);\n\n    var commentRegEx = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n    var cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\n    var cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\n    var fnBracketRegEx = /\\(([^\\)]*)\\)/;\n    var wsRegEx = /^\\s+|\\s+$/g;\n    \n    var requireRegExs = {};\n\n    function getCJSDeps(source, requireIndex) {\n\n      // remove comments\n      source = source.replace(commentRegEx, '');\n\n      // determine the require alias\n      var params = source.match(fnBracketRegEx);\n      var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n      // find or generate the regex for this requireAlias\n      var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n      requireRegEx.lastIndex = 0;\n\n      var deps = [];\n\n      var match;\n      while (match = requireRegEx.exec(source))\n        deps.push(match[2] || match[3]);\n\n      return deps;\n    }\n\n    /*\n      AMD-compatible require\n      To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n    */\n    function require(names, callback, errback, referer) {\n      // in amd, first arg can be a config object... we just ignore\n      if (typeof names == 'object' && !(names instanceof Array))\n        return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n      // amd require\n      if (typeof names == 'string' && typeof callback == 'function')\n        names = [names];\n      if (names instanceof Array) {\n        var dynamicRequires = [];\n        for (var i = 0; i < names.length; i++)\n          dynamicRequires.push(loader['import'](names[i], referer));\n        Promise.all(dynamicRequires).then(function(modules) {\n          if (callback)\n            callback.apply(null, modules);\n        }, errback);\n      }\n\n      // commonjs require\n      else if (typeof names == 'string') {\n        var module = loader.get(loader.normalizeSync(names, referer));\n        if (!module)\n          throw new Error('Module not already loaded loading \"' + names + '\" from \"' + referer + '\".');\n        return module.__useDefault ? module['default'] : module;\n      }\n\n      else\n        throw new TypeError('Invalid require');\n    }\n\n    function define(name, deps, factory) {\n      if (typeof name != 'string') {\n        factory = deps;\n        deps = name;\n        name = null;\n      }\n      if (!(deps instanceof Array)) {\n        factory = deps;\n        deps = ['require', 'exports', 'module'].splice(0, factory.length);\n      }\n\n      if (typeof factory != 'function')\n        factory = (function(factory) {\n          return function() { return factory; }\n        })(factory);\n\n      // in IE8, a trailing comma becomes a trailing undefined entry\n      if (deps[deps.length - 1] === undefined)\n        deps.pop();\n\n      // remove system dependencies\n      var requireIndex, exportsIndex, moduleIndex;\n      \n      if ((requireIndex = indexOf.call(deps, 'require')) != -1) {\n        \n        deps.splice(requireIndex, 1);\n\n        // only trace cjs requires for non-named\n        // named defines assume the trace has already been done\n        if (!name)\n          deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));\n      }\n\n      if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)\n        deps.splice(exportsIndex, 1);\n      \n      if ((moduleIndex = indexOf.call(deps, 'module')) != -1)\n        deps.splice(moduleIndex, 1);\n\n      function execute(req, exports, module) {\n        var depValues = [];\n        for (var i = 0; i < deps.length; i++)\n          depValues.push(req(deps[i]));\n\n        module.uri = module.id;\n\n        module.config = function() {};\n\n        // add back in system dependencies\n        if (moduleIndex != -1)\n          depValues.splice(moduleIndex, 0, module);\n        \n        if (exportsIndex != -1)\n          depValues.splice(exportsIndex, 0, exports);\n        \n        if (requireIndex != -1) {\n          function contextualRequire(names, callback, errback) {\n            if (typeof names == 'string' && typeof callback != 'function')\n              return req(names);\n            return require.call(loader, names, callback, errback, module.id);\n          }\n          contextualRequire.toUrl = function(name) {\n            // normalize without defaultJSExtensions\n            var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n            var url = loader.normalizeSync(name, module.id);\n            if (defaultJSExtension && url.substr(url.length - 3, 3) == '.js')\n              url = url.substr(0, url.length - 3);\n            return url;\n          };\n          depValues.splice(requireIndex, 0, contextualRequire);\n        }\n\n        // set global require to AMD require\n        var curRequire = __global.require;\n        __global.require = require;\n\n        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);\n\n        __global.require = curRequire;\n\n        if (typeof output == 'undefined' && module)\n          output = module.exports;\n\n        if (typeof output != 'undefined')\n          return output;\n      }\n\n      var entry = createEntry();\n      entry.name = name && (loader.normalizeSync || loader.normalize).call(loader, name);\n      entry.deps = deps;\n      entry.execute = execute;\n\n      loader.pushRegister_({\n        amd: true,\n        entry: entry\n      });\n    }\n    define.amd = {};\n\n    // reduction function to attach defines to a load record\n    hook('reduceRegister_', function(reduceRegister) {\n      return function(load, register) {\n        // only handle AMD registers here\n        if (!register || !register.amd)\n          return reduceRegister.call(this, load, register);\n\n        var curMeta = load && load.metadata;\n        var entry = register.entry;\n\n        if (curMeta)\n          curMeta.format = 'amd';\n\n        // anonymous define\n        if (!entry.name) {\n          if (!curMeta)\n            throw new TypeError('Unexpected anonymous AMD define.');\n\n          // already defined anonymously -> throw\n          if (curMeta.entry)\n            throw new TypeError('Multiple defines for anonymous module ' + load.name);\n          \n          curMeta.entry = entry;\n        }\n        // named define\n        else {\n          // if we don't have any other defines, \n          // then let this be an anonymous define\n          // this is just to support single modules of the form:\n          // define('jquery')\n          // still loading anonymously\n          // because it is done widely enough to be useful\n          // as soon as there is more than one define, this gets removed though\n          if (curMeta) {\n            if (!curMeta.entry && !curMeta.bundle)\n              curMeta.entry = entry;\n            else\n              curMeta.entry = undefined;\n\n            // note this is now a bundle\n            curMeta.bundle = true;\n          }\n\n          // define the module through the register registry\n          if (!(entry.name in this.defined))\n            this.defined[entry.name] = entry;\n        }\n      };\n    });\n\n    // adds define as a global (potentially just temporarily)\n    function createDefine() {\n      // ensure no NodeJS environment detection\n      var oldModule = __global.module;\n      var oldExports = __global.exports;\n      var oldDefine = __global.define;\n\n      __global.module = undefined;\n      __global.exports = undefined;\n      __global.define = define;\n\n      return function() {\n        __global.define = oldDefine;\n        __global.module = oldModule;\n        __global.exports = oldExports;\n      };\n    }\n\n    loader.set('@@amd-helpers', loader.newModule({\n      createDefine: createDefine,\n      require: require,\n      define: define\n    }));\n    loader.amdDefine = define;\n    loader.amdRequire = require;\n  };\n});/*\n  SystemJS AMD Format\n  Provides the AMD module format definition at System.format.amd\n  as well as a RequireJS-style require on System.require\n*/\n(function() {\n  // AMD Module Format Detection RegEx\n  // define([.., .., ..], ...)\n  // define(varName); || define(function(require, exports) {}); || define({})\n  var amdRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])define\\s*\\(\\s*(\"[^\"]+\"\\s*,\\s*|'[^']+'\\s*,\\s*)?\\s*(\\[(\\s*((\"[^\"]+\"|'[^']+')\\s*,|\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*(\\s*(\"[^\"]+\"|'[^']+')\\s*,?)?(\\s*(\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*\\s*\\]|function\\s*|{|[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*\\))/;\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      if (load.metadata.format === 'amd' \n          && !load.metadata.authorization \n          && load.metadata.scriptLoad !== false)\n        load.metadata.scriptLoad = true;\n      // script load implies define global leak\n      if (load.metadata.scriptLoad && isBrowser)\n        this.get('@@amd-helpers').createDefine();\n      return fetch.call(this, load);\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      \n      if (load.metadata.format == 'amd' || !load.metadata.format && load.source.match(amdRegEx)) {\n        load.metadata.format = 'amd';\n        \n        if (!loader.builder && loader.execute !== false) {\n          var removeDefine = this.get('@@amd-helpers').createDefine();\n\n          try {\n            __exec.call(loader, load);\n          }\n          finally {\n            removeDefine();\n          }\n\n          if (!load.metadata.entry && !load.metadata.bundle)\n            throw new TypeError('AMD module ' + load.name + ' did not define');\n        }\n        else {\n          load.metadata.execute = function() {\n            return load.metadata.builderExecute.apply(this, arguments);\n          };\n        }\n      }\n\n      return instantiate.call(loader, load);\n    };\n  });\n\n})();\n/*\n  SystemJS Loader Plugin Support\n\n  Supports plugin loader syntax with \"!\", or via metadata.loader\n\n  The plugin name is loaded as a module itself, and can override standard loader hooks\n  for the plugin resource. See the plugin section of the systemjs readme.\n*/\n(function() {\n\n  // sync or async plugin normalize function\n  function normalizePlugin(normalize, name, parentName, isPlugin, sync) {\n    var loader = this;\n    // if parent is a plugin, normalize against the parent plugin argument only\n    if (parentName) {\n      var parentPluginIndex;\n      if (loader.pluginFirst) {\n        if ((parentPluginIndex = parentName.lastIndexOf('!')) != -1)\n          parentName = parentName.substr(parentPluginIndex + 1);\n      }\n      else {\n        if ((parentPluginIndex = parentName.indexOf('!')) != -1)\n          parentName = parentName.substr(0, parentPluginIndex);\n      }\n    }\n\n    // if this is a plugin, normalize the plugin name and the argument\n    var pluginIndex = name.lastIndexOf('!');\n    if (pluginIndex != -1) {\n      var argumentName;\n      var pluginName;\n\n      if (loader.pluginFirst) {\n        argumentName = name.substr(pluginIndex + 1);\n        pluginName = name.substr(0, pluginIndex);\n      }\n      else {\n        argumentName = name.substr(0, pluginIndex);\n        pluginName = name.substr(pluginIndex + 1) || argumentName.substr(argumentName.lastIndexOf('.') + 1);\n      }\n\n      // note if normalize will add a default js extension\n      // if so, remove for backwards compat\n      // this is strange and sucks, but will be deprecated\n      var defaultExtension = loader.defaultJSExtensions && argumentName.substr(argumentName.length - 3, 3) != '.js';\n\n      // put name back together after parts have been normalized\n      function normalizePluginParts(argumentName, pluginName) {\n        if (defaultExtension && argumentName.substr(argumentName.length - 3, 3) == '.js')\n          argumentName = argumentName.substr(0, argumentName.length - 3);\n\n        if (loader.pluginFirst) {\n          return pluginName + '!' + argumentName;\n        }\n        else {\n          return argumentName + '!' + pluginName;\n        }\n      }\n\n      if (sync) {\n        argumentName = loader.normalizeSync(argumentName, parentName, true);\n        pluginName = loader.normalizeSync(pluginName, parentName, true);\n\n        return normalizePluginParts(argumentName, pluginName);\n      }\n      else {\n        // third argument represents that this is a plugin call\n        // which in turn will skip default extension adding within packages\n        return Promise.all([\n          loader.normalize(argumentName, parentName, true),\n          loader.normalize(pluginName, parentName, true)\n        ])\n        .then(function(normalized) {\n          return normalizePluginParts(normalized[0], normalized[1]);\n        });\n      }\n    }\n    else {\n      return normalize.call(loader, name, parentName, isPlugin);\n    }\n  }\n\n  // async plugin normalize\n  hook('normalize', function(normalize) {\n    return function(name, parentName, isPlugin) {\n      return normalizePlugin.call(this, normalize, name, parentName, isPlugin, false);\n    };\n  });\n\n  hook('normalizeSync', function(normalizeSync) {\n    return function(name, parentName, isPlugin) {\n      return normalizePlugin.call(this, normalizeSync, name, parentName, isPlugin, true);\n    };\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n\n      var name = load.name;\n\n      // plugin syntax\n      var pluginSyntaxIndex;\n      if (loader.pluginFirst) {\n        if ((pluginSyntaxIndex = name.indexOf('!')) != -1) {\n          load.metadata.loader = name.substr(0, pluginSyntaxIndex);\n          load.name = name.substr(pluginSyntaxIndex + 1);\n        }\n      }\n      else {\n        if ((pluginSyntaxIndex = name.lastIndexOf('!')) != -1) {\n          load.metadata.loader = name.substr(pluginSyntaxIndex + 1);\n          load.name = name.substr(0, pluginSyntaxIndex);\n        }\n      }\n\n      return locate.call(loader, load)\n      .then(function(address) {\n        var plugin = load.metadata.loader;\n\n        if (!plugin)\n          return address;\n\n        // only fetch the plugin itself if this name isn't defined\n        if (loader.defined && loader.defined[name])\n          return address;\n\n        var pluginLoader = loader.pluginLoader || loader;\n\n        // load the plugin module and run standard locate\n        return pluginLoader['import'](plugin)\n        .then(function(loaderModule) {\n          // store the plugin module itself on the metadata\n          load.metadata.loaderModule = loaderModule;\n\n          load.address = address;\n          if (loaderModule.locate)\n            return loaderModule.locate.call(loader, load);\n\n          return address;\n        });\n      });\n    };\n  });\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var loader = this;\n      if (load.metadata.loaderModule && load.metadata.loaderModule.fetch) {\n        load.metadata.scriptLoad = false;\n        return load.metadata.loaderModule.fetch.call(loader, load, function(load) {\n          return fetch.call(loader, load);\n        });\n      }\n      else {\n        return fetch.call(loader, load);\n      }\n    };\n  });\n\n  hook('translate', function(translate) {\n    return function(load) {\n      var loader = this;\n      if (load.metadata.loaderModule && load.metadata.loaderModule.translate)\n        return Promise.resolve(load.metadata.loaderModule.translate.call(loader, load)).then(function(result) {\n          if (typeof result == 'string')\n            load.source = result;\n          return translate.call(loader, load);\n        });\n      else\n        return translate.call(loader, load);\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n\n      /*\n       * Source map sanitization for load.metadata.sourceMap\n       * Used to set browser and build-level source maps for\n       * translated sources in a general way.\n       */\n      var sourceMap = load.metadata.sourceMap;\n\n      // if an object not a JSON string do sanitizing\n      if (sourceMap && typeof sourceMap == 'object') {\n        var originalName = load.name.split('!')[0];\n\n        // force set the filename of the original file\n        sourceMap.file = originalName + '!transpiled';\n\n        // force set the sources list if only one source\n        if (!sourceMap.sources || sourceMap.sources.length == 1)\n          sourceMap.sources = [originalName];\n        load.metadata.sourceMap = JSON.stringify(sourceMap);\n      }\n\n      if (load.metadata.loaderModule && load.metadata.loaderModule.instantiate && !loader.builder)\n        return Promise.resolve(load.metadata.loaderModule.instantiate.call(loader, load)).then(function(result) {\n          load.metadata.entry = createEntry();\n          load.metadata.entry.execute = function() {\n            return result;\n          }\n          load.metadata.entry.deps = load.metadata.deps;\n          load.metadata.format = 'defined';\n          return instantiate.call(loader, load);\n        });\n      else\n        return instantiate.call(loader, load);\n    };\n  });\n\n})();\n/*\n * Conditions Extension\n *\n *   Allows a condition module to alter the resolution of an import via syntax:\n *\n *     import $ from 'jquery/#{browser}';\n *\n *   Will first load the module 'browser' via `System.import('browser')` and \n *   take the default export of that module.\n *   If the default export is not a string, an error is thrown.\n * \n *   We then substitute the string into the require to get the conditional resolution\n *   enabling environment-specific variations like:\n * \n *     import $ from 'jquery/ie'\n *     import $ from 'jquery/firefox'\n *     import $ from 'jquery/chrome'\n *     import $ from 'jquery/safari'\n *\n *   It can be useful for a condition module to define multiple conditions.\n *   This can be done via the `|` modifier to specify an export member expression:\n *\n *     import 'jquery/#{./browser.js|grade.version}'\n *\n *   Where the `grade` export `version` member in the `browser.js` module  is substituted.\n *\n *\n * Boolean Conditionals\n *\n *   For polyfill modules, that are used as imports but have no module value,\n *   a binary conditional allows a module not to be loaded at all if not needed:\n *\n *     import 'es5-shim#?./conditions.js|needs-es5shim'\n *\n *   These conditions can also be negated via:\n *     \n *     import 'es5-shim#?~./conditions.js|es6'\n *\n */\n\n  function parseCondition(condition) {\n    var conditionExport, conditionModule, negation;\n\n    var negation = condition[0] == '~';\n    var conditionExportIndex = condition.lastIndexOf('|');\n    if (conditionExportIndex != -1) {\n      conditionExport = condition.substr(conditionExportIndex + 1);\n      conditionModule = condition.substr(negation, conditionExportIndex - negation) || '@system-env';\n    }\n    else {\n      conditionExport = null;\n      conditionModule = condition.substr(negation);\n    }\n\n    return {\n      module: conditionModule,\n      prop: conditionExport,\n      negate: negation\n    };\n  }\n\n  function serializeCondition(conditionObj) {\n    return (conditionObj.negate ? '~' : '') + conditionObj.module + (conditionObj.prop ? '|' + conditionObj.prop : '');\n  }\n\n  function resolveCondition(conditionObj, parentName, bool) {\n    return this['import'](conditionObj.module, parentName)\n    .then(function(m) {\n      if (conditionObj.prop)\n        m = readMemberExpression(conditionObj.prop, m);\n      else if (typeof m == 'object' && m + '' == 'Module')\n        m = m['default'];\n\n      return conditionObj.negate ? !m : m;\n    });\n  }\n\n  var interpolationRegEx = /#\\{[^\\}]+\\}/;\n  function interpolateConditional(name, parentName) {\n    // first we normalize the conditional\n    var conditionalMatch = name.match(interpolationRegEx);\n\n    if (!conditionalMatch)\n      return Promise.resolve(name);\n\n    var conditionObj = parseCondition(conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));\n\n    // in builds, return normalized conditional\n    if (this.builder)\n      return this['normalize'](conditionObj.module, parentName)\n      .then(function(conditionModule) {\n        conditionObj.module = conditionModule;\n        return name.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');\n      });\n\n    return resolveCondition.call(this, conditionObj, parentName, false)\n    .then(function(conditionValue) {\n      if (typeof conditionValue !== 'string')\n        throw new TypeError('The condition value for ' + name + ' doesn\\'t resolve to a string.');\n\n      if (conditionValue.indexOf('/') != -1)\n        throw new TypeError('Unabled to interpolate conditional ' + name + (parentName ? ' in ' + parentName : '') + '\\n\\tThe condition value ' + conditionValue + ' cannot contain a \"/\" separator.');\n\n      return name.replace(interpolationRegEx, conditionValue);\n    });\n  }\n\n  function booleanConditional(name, parentName) {\n    // first we normalize the conditional\n    var booleanIndex = name.lastIndexOf('#?');\n\n    if (booleanIndex == -1)\n      return Promise.resolve(name);\n\n    var conditionObj = parseCondition(name.substr(booleanIndex + 2));\n\n    // in builds, return normalized conditional\n    if (this.builder)\n      return this['normalize'](conditionObj.module, parentName)\n      .then(function(conditionModule) {\n        conditionObj.module = conditionModule;\n        return name.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);\n      });\n\n    return resolveCondition.call(this, conditionObj, parentName, true)\n    .then(function(conditionValue) {\n      return conditionValue ? name.substr(0, booleanIndex) : '@empty';\n    });\n  }\n\n  // no normalizeSync\n  hook('normalize', function(normalize) {\n    return function(name, parentName, parentAddress) {\n      var loader = this;\n      return booleanConditional.call(loader, name, parentName)\n      .then(function(name) {\n        return normalize.call(loader, name, parentName, parentAddress);\n      })\n      .then(function(normalized) {\n        return interpolateConditional.call(loader, normalized, parentName);\n      });\n    };\n  });\n/*\n * Alias Extension\n *\n * Allows a module to be a plain copy of another module by module name\n *\n * System.meta['mybootstrapalias'] = { alias: 'bootstrap' };\n *\n */\n(function() {\n  // aliases\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var alias = load.metadata.alias;\n      var aliasDeps = load.metadata.deps || [];\n      if (alias) {\n        load.metadata.format = 'defined';\n        var entry = createEntry();\n        this.defined[load.name] = entry;\n        entry.declarative = true;\n        entry.deps = aliasDeps.concat([alias]);\n        entry.declare = function(_export) {\n          return {\n            setters: [function(module) {\n              for (var p in module)\n                _export(p, module[p]);\n              if (module.__useDefault)\n                entry.module.exports.__useDefault = true;\n            }],\n            execute: function() {}\n          };\n        };\n        return '';\n      }\n\n      return fetch.call(this, load);\n    };\n  });\n})();/*\n * Meta Extension\n *\n * Sets default metadata on a load record (load.metadata) from\n * loader.metadata via System.meta function.\n *\n *\n * Also provides an inline meta syntax for module meta in source.\n *\n * Eg:\n *\n * loader.meta({\n *   'my/module': { deps: ['jquery'] }\n *   'my/*': { format: 'amd' }\n * });\n *\n * Which in turn populates loader.metadata.\n *\n * load.metadata.deps and load.metadata.format will then be set\n * for 'my/module'\n *\n * The same meta could be set with a my/module.js file containing:\n *\n * my/module.js\n *   \"format amd\";\n *   \"deps[] jquery\";\n *   \"globals.some value\"\n *   console.log('this is my/module');\n *\n * Configuration meta always takes preference to inline meta.\n *\n * Multiple matches in wildcards are supported and ammend the meta.\n *\n *\n * The benefits of the function form is that paths are URL-normalized\n * supporting say\n *\n * loader.meta({ './app': { format: 'cjs' } });\n *\n * Instead of needing to set against the absolute URL (https://site.com/app.js)\n *\n */\n\n(function() {\n\n  hookConstructor(function(constructor) {\n    return function() {\n      this.meta = {};\n      constructor.call(this);\n    };\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var meta = this.meta;\n      var name = load.name;\n\n      // NB for perf, maybe introduce a fast-path wildcard lookup cache here\n      // which is checked first\n\n      // apply wildcard metas\n      var bestDepth = 0;\n      var wildcardIndex;\n      for (var module in meta) {\n        wildcardIndex = module.indexOf('*');\n        if (wildcardIndex === -1)\n          continue;\n        if (module.substr(0, wildcardIndex) === name.substr(0, wildcardIndex)\n            && module.substr(wildcardIndex + 1) === name.substr(name.length - module.length + wildcardIndex + 1)) {\n          var depth = module.split('/').length;\n          if (depth > bestDepth)\n            bestDepth = depth;\n          extendMeta(load.metadata, meta[module], bestDepth != depth);\n        }\n      }\n\n      // apply exact meta\n      if (meta[name])\n        extendMeta(load.metadata, meta[name]);\n\n      return locate.call(this, load);\n    };\n  });\n\n  // detect any meta header syntax\n  // only set if not already set\n  var metaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)+/;\n  var metaPartRegEx = /\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\/\\/[^\\n]*|\"[^\"]+\"\\s*;?|'[^']+'\\s*;?/g;\n\n  function setMetaProperty(target, p, value) {\n    var pParts = p.split('.');\n    var curPart;\n    while (pParts.length > 1) {\n      curPart = pParts.shift();\n      target = target[curPart] = target[curPart] || {};\n    }\n    curPart = pParts.shift();\n    if (!(curPart in target))\n      target[curPart] = value;\n  }\n\n  hook('translate', function(translate) {\n    return function(load) {\n      // NB meta will be post-translate pending transpiler conversion to plugins\n      var meta = load.source.match(metaRegEx);\n      if (meta) {\n        var metaParts = meta[0].match(metaPartRegEx);\n\n        for (var i = 0; i < metaParts.length; i++) {\n          var curPart = metaParts[i];\n          var len = curPart.length;\n\n          var firstChar = curPart.substr(0, 1);\n          if (curPart.substr(len - 1, 1) == ';')\n            len--;\n\n          if (firstChar != '\"' && firstChar != \"'\")\n            continue;\n\n          var metaString = curPart.substr(1, curPart.length - 3);\n          var metaName = metaString.substr(0, metaString.indexOf(' '));\n\n          if (metaName) {\n            var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);\n\n            if (metaName.substr(metaName.length - 2, 2) == '[]') {\n              metaName = metaName.substr(0, metaName.length - 2);\n              load.metadata[metaName] = load.metadata[metaName] || [];\n              load.metadata[metaName].push(metaValue);\n            }\n            else if (load.metadata[metaName] instanceof Array) {\n              // temporary backwards compat for previous \"deps\" syntax\n              warn.call(this, 'Module ' + load.name + ' contains deprecated \"deps ' + metaValue + '\" meta syntax.\\nThis should be updated to \"deps[] ' + metaValue + '\" for pushing to array meta.');\n              load.metadata[metaName].push(metaValue);\n            }\n            else {\n              setMetaProperty(load.metadata, metaName, metaValue);\n            }\n          }\n          else {\n            load.metadata[metaString] = true;\n          }\n        }\n      }\n\n      return translate.call(this, load);\n    };\n  });\n})();\n/*\n  System bundles\n\n  Allows a bundle module to be specified which will be dynamically \n  loaded before trying to load a given module.\n\n  For example:\n  System.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']\n\n  Will result in a load to \"mybundle\" whenever a load to \"jquery\"\n  or \"bootstrap/js/bootstrap\" is made.\n\n  In this way, the bundle becomes the request that provides the module\n*/\nfunction getBundleFor(loader, name) {\n  // check if it is in an already-loaded bundle\n  for (var b in loader.loadedBundles_)\n    if (indexOf.call(loader.bundles[b], name) != -1)\n      return Promise.resolve(b);\n\n  // check if it is a new bundle\n  for (var b in loader.bundles)\n    if (indexOf.call(loader.bundles[b], name) != -1)\n      return loader.normalize(b)\n      .then(function(normalized) {\n        loader.bundles[normalized] = loader.bundles[b];\n        loader.loadedBundles_[normalized] = true;\n        return normalized;\n      });\n\n  return Promise.resolve();\n}\n\n(function() {\n  // bundles support (just like RequireJS)\n  // bundle name is module name of bundle itself\n  // bundle is array of modules defined by the bundle\n  // when a module in the bundle is requested, the bundle is loaded instead\n  // of the form System.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.bundles = {};\n      this.loadedBundles_ = {};\n    };\n  });\n\n  // assign bundle metadata for bundle loads\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      if (load.name in loader.loadedBundles_ || load.name in loader.bundles)\n        load.metadata.bundle = true;\n\n      // if not already defined, check if we need to load a bundle\n      if (!(load.name in loader.defined))\n        return getBundleFor(loader, load.name)\n        .then(function(bundleName) {\n          if (bundleName)\n            return loader.load(bundleName);\n        })\n        .then(function() {\n          return locate.call(loader, load);\n        });\n\n      return locate.call(this, load);\n    };\n  });\n})();\n/*\n * Dependency Tree Cache\n * \n * Allows a build to pre-populate a dependency trace tree on the loader of \n * the expected dependency tree, to be loaded upfront when requesting the\n * module, avoinding the n round trips latency of module loading, where \n * n is the dependency tree depth.\n *\n * eg:\n * System.depCache = {\n *  'app': ['normalized', 'deps'],\n *  'normalized': ['another'],\n *  'deps': ['tree']\n * };\n * \n * System.import('app') \n * // simultaneously starts loading all of:\n * // 'normalized', 'deps', 'another', 'tree'\n * // before \"app\" source is even loaded\n */\n\n(function() {\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.depCache = {};\n    }\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      // load direct deps, in turn will pick up their trace trees\n      var deps = loader.depCache[load.name];\n      if (deps)\n        for (var i = 0; i < deps.length; i++)\n          loader['import'](deps[i]);\n\n      return locate.call(loader, load);\n    };\n  });\n})();\n  \nSystem = new SystemJSLoader();\nSystem.version = '0.19.9 Standard';\n  // -- exporting --\n\n  if (typeof exports === 'object')\n    module.exports = Loader;\n\n  __global.Reflect = __global.Reflect || {};\n  __global.Reflect.Loader = __global.Reflect.Loader || Loader;\n  __global.Reflect.global = __global.Reflect.global || __global;\n  __global.LoaderPolyfill = Loader;\n\n  if (!System) {\n    System = new SystemLoader();\n    System.constructor = SystemLoader;\n  }\n\n  if (typeof exports === 'object')\n    module.exports = System;\n\n  __global.System = System;\n\n})(typeof self != 'undefined' ? self : global);}\n\n// auto-load Promise and URL polyfills if needed in the browser\ntry {\n  var hasURL = typeof URLPolyfill != 'undefined' || new URL('test:///').protocol == 'test:';\n}\ncatch(e) {}\n\nif (typeof Promise === 'undefined' || !hasURL) {\n  // document.write\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n    $__curScript = scripts[scripts.length - 1];\n    var curPath = $__curScript.src;\n    var basePath = curPath.substr(0, curPath.lastIndexOf('/') + 1);\n    window.systemJSBootstrap = bootstrap;\n    document.write(\n      '<' + 'script type=\"text/javascript\" src=\"' + basePath + 'system-polyfills.js\">' + '<' + '/script>'\n    );\n  }\n  // importScripts\n  else if (typeof importScripts !== 'undefined') {\n    var basePath = '';\n    try {\n      throw new Error('_');\n    } catch (e) {\n      e.stack.replace(/(?:at|@).*(http.+):[\\d]+:[\\d]+/, function(m, url) {\n        basePath = url.replace(/\\/[^\\/]*$/, '/');\n      });\n    }\n    importScripts(basePath + 'system-polyfills.js');\n    bootstrap();\n  }\n  else {\n    bootstrap();\n  }\n}\nelse {\n  bootstrap();\n}\n\n\n})();"],"sourceRoot":"/source/"}