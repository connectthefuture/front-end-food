{"version":3,"sources":["system.js"],"names":["bootstrap","__global","addToError","err","msg","Error","message","__eval","source","debugName","context","Function","call","e","Module","Loader","options","this","_loader","loaderObj","loads","modules","importPromises","moduleRecords","defineProperty","get","SystemLoader","paths","applyPaths","name","wildcard","pathMatch","maxWildcardPrefixLen","p","pathParts","split","length","TypeError","substr","wildcardPrefixLen","outPath","replace","LoaderProto","SystemJSLoader","systemJSConstructor","SystemProto","hook","prototype","hookConstructor","group","deps","names","indices","i","l","index","indexOf","push","getESModule","exports","esModule","getOwnPropertyDescriptor","d","Object","hasOwnProperty","value","extend","a","b","prepend","extendMeta","val","Array","concat","warn","warnings","console","readMemberExpression","pParts","shift","getBaseURLObj","baseURLCache","baseURL","URL","baseURI","href","getMapMatch","map","bestMatch","bestMatchLength","curMatchLength","setProduction","isProduction","set","newModule","browser","isBrowser","node","_nodeRequire","production","applyMap","match","absURLRegEx","mapMatch","detectRegisterFormat","leadingCommentAndMeta","leadingCommentAndMetaRegEx","createEntry","originalIndices","declare","execute","executingRequire","declarative","normalizedDeps","groupIndex","evaluated","module","esmExports","parseCondition","condition","conditionExport","conditionModule","negation","conditionExportIndex","lastIndexOf","prop","negate","serializeCondition","conditionObj","resolveCondition","parentName","bool","then","m","interpolateConditional","conditionalMatch","interpolationRegEx","Promise","resolve","builder","conditionValue","booleanConditional","booleanIndex","isWorker","window","self","importScripts","document","isWindows","process","platform","assert","item","thisLen","obj","opt","getElementsByTagName","bases","location","cwd","URLPolyfill","createLoad","status","linkSets","dependencies","metadata","loadModule","loader","asyncStartLoadPartwayThrough","step","address","moduleName","moduleMetadata","moduleSource","moduleAddress","requestLoad","request","refererName","refererAddress","reject","normalize","load","proceedToLocate","proceedToFetch","locate","proceedToTranslate","fetch","translate","instantiate","instantiateResult","undefined","anonCnt","isDeclarative","transpile","transpiled","curSystem","System","curRegister","register","depsList","loadPromises","depLoad","key","addLoadToLinkSet","all","updateLinkSetOnLoad","exc","exception","linkSetFailed","stepState","existingLoad","done","linkSet","createLinkSet","startingLoad","loadingCount","j","doLink","error","link","_newModule","finishLoad","abrupt","checkError","pLoad","dep","failed","linkIndex","splice","globalLoadsIndex","trace","depMap","forEach","kind","loadIndex","doDynamicExecute","linkError","createImportPromise","promise","evaluateLoadedModule","doEnsureEvaluated","constructor","define","delete","has","import","parentAddress","sourcePromise","pNames","getOwnPropertyNames","configurable","enumerable","freeze","referrerName","referrerAddress","fetchTextFromURL","XMLHttpRequest","url","authorization","fulfill","xhr","responseText","statusText","sameDomain","doTimeout","domainCheck","exec","host","protocol","XDomainRequest","onload","onerror","ontimeout","onprogress","timeout","onreadystatechange","readyState","addEventListener","open","setRequestHeader","withCredentials","setTimeout","send","require","fs","readFile","data","dataString","opts","headers","Accept","credentials","r","ok","text","transpiler","pluginLoader","__useDefault","transpileFunction","Compiler","traceurTranspile","createLanguageService","typescriptTranspile","babelTranspile","traceur","traceurOptions","script","sourceMaps","filename","inputSourceMap","sourceMap","compiler","doTraceurCompile","compile","babel","babelOptions","code","ast","transform","ts","typescriptOptions","target","ScriptTarget","ES5","inlineSourceMap","ModuleKind","__exec","packageProperties","getSource","lastLineIndex","wrap","format","bundle","mappings","JSON","stringify","hashBangRegEx","hasBtoa","btoa","unescape","encodeURIComponent","preExec","curLoad","callCounter","SystemJS","postExec","scriptExec","head","body","documentElement","createElement","_e","integrity","setAttribute","nonce","appendChild","removeChild","reduceRegister_","supportsScriptExec","eval","scripts","$__curScript","chrome","extension","navigator","userAgent","baseURIObj","defaultJSExtensions","pluginFirst","nodeCoreModules","skipExt","httpRequest","systemImport","systemTranslate","entry","parse","env","config","cfg","checkHasConfig","transpilerRuntime","loadedTranspilerRuntime","packages","meta","depCache","bundles","packageConfigPaths","objMaps","v","defaultJSExtension","decanonicalize","pkgMatch","pkg","main","path","packageLength","Math","max","normalized","normalizedBundleDep","q","c","getPackage","curPkg","pkgLen","curPkgLen","getBasePath","basePath","addDefaultExtension","pkgName","subPath","skipExtensions","defaultExtension","metaMatch","getMetaMatches","metaPattern","matchMeta","matchDepth","applyPackageConfigSync","mapPath","doMapSync","mapped","normalizeSync","applyPackageConfig","doMap","doStringMap","createPkgConfigPathObj","lastWildcard","regEx","RegExp","getPackageConfigMatch","configPath","exactMatch","packageConfigPath","packageName","loadPackageConfigPath","pkgConfigPath","configLoader","pkgConfig","systemjs","dNormalized","coreResolve","pkgMeta","matchFn","wildcardIndex","dotRel","exactMeta","decanonicalized","isPlugin","parentPackageName","parentPackage","parentBasePath","parentMap","parentMapMatch","pkgConfigMatch","isConfigured","configured","bestDepth","alias","getInteractiveScriptLoad","interactiveScript","interactiveLoadingScripts","webWorkerImport","workerLoad","ieEvents","s","isOpera","opera","toString","attachEvent","loadingCnt","registerQueue","pushRegister","scriptLoad","complete","evt","cleanup","detachEvent","removeEventListener","async","src","buildGroups","groups","depName","depEntry","defined","depGroupIndex","startEntry","curGroupDeclarative","linkDeclarativeModule","linkDynamicModule","getOrCreateModuleRecord","importers","declaration","locked","importerModule","importerIndex","setters","id","depExports","depModule","len","getModule","ensureEvaluated","output","__esModule","default","seen","registerDynamic","apply","arguments","pushRegister_","amd","curMeta","del","grouped","normalizePromises","esmRegEx","traceurRuntimeRegEx","babelHelpersRegEx","loadedTranspiler","transpilerPromise","loaderModule","originalName","file","sources","originalSource","$traceurRuntime","babelHelpers","__globalName","registered","g","globals","gl","exportName","retrieveGlobal","prepareGlobal","reduceRegister","globalValue","forEachGlobal","callback","keys","forEachGlobalValue","globalName","ignoredGlobalProps","globalSnapshot","curDefine","oldGlobals","singleGlobal","multipleExports","getCJSDeps","inLocation","locations","cjsRequireRegEx","lastIndex","commentRegEx","stringRegEx","stringLocations","commentLocations","cjsExportsRegEx","metaDeps","cjsRequireDetection","_require","pathVars","getPathVars","__cjsWrapper","args","dirname","windowOrigin","hostname","port","moduleId","pluginIndex","pop","join","requireIndex","params","fnBracketRegEx","requireAlias","wsRegEx","requireRegEx","requireRegExs","cjsRequirePre","cjsRequirePost","errback","referer","dynamicRequires","factory","req","contextualRequire","depValues","uri","moduleIndex","exportsIndex","toUrl","curRequire","createDefine","oldModule","oldExports","oldDefine","amdDefine","amdRequire","amdRegEx","builderExecute","removeDefine","getParentName","parentPluginIndex","parsePlugin","argumentName","pluginName","argument","plugin","combinePluginParts","checkDefaultExtension","arg","createNormalizeSync","parsed","pluginSyntaxIndex","result","aliasDeps","_export","setMetaProperty","curPart","depth","metaRegEx","metaPartRegEx","metaParts","firstChar","metaString","metaName","metaValue","loadedBundles","matched","curModule","parts","substring","version","Reflect","global","LoaderPolyfill","hasURL","curPath","systemJSBootstrap","write","stack"],"mappings":"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","file":"system.min.js","sourcesContent":["/*\n * SystemJS v0.19.22\n */\n(function() {\nfunction bootstrap() {(function(__global) {\n\n  var isWorker = typeof window == 'undefined' && typeof self != 'undefined' && typeof importScripts != 'undefined';\n  var isBrowser = typeof window != 'undefined' && typeof document != 'undefined';\n  var isWindows = typeof process != 'undefined' && typeof process.platform != 'undefined' && !!process.platform.match(/^win/);\n\n  if (!__global.console)\n    __global.console = { assert: function() {} };\n\n  // IE8 support\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, thisLen = this.length; i < thisLen; i++) {\n      if (this[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  \n  var defineProperty;\n  (function () {\n    try {\n      if (!!Object.defineProperty({}, 'a', {}))\n        defineProperty = Object.defineProperty;\n    }\n    catch (e) {\n      defineProperty = function(obj, prop, opt) {\n        try {\n          obj[prop] = opt.value || opt.get.call(obj);\n        }\n        catch(e) {}\n      }\n    }\n  })();\n\n  function addToError(err, msg) {\n    if (err instanceof Error)\n      err.message = err.message + '\\n\\t' + msg;\n    else\n      err += '\\n\\t' + msg;\n    return err;\n  }\n\n  function __eval(source, debugName, context) {\n    try {\n      new Function(source).call(context);\n    }\n    catch(e) {\n      throw addToError(e, 'Evaluating ' + debugName);\n    }\n  }\n\n  var baseURI;\n  // environent baseURI detection\n  if (typeof document != 'undefined' && document.getElementsByTagName) {\n    baseURI = document.baseURI;\n\n    if (!baseURI) {\n      var bases = document.getElementsByTagName('base');\n      baseURI = bases[0] && bases[0].href || window.location.href;\n    }\n\n    // sanitize out the hash and querystring\n    baseURI = baseURI.split('#')[0].split('?')[0];\n    baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n  }\n  else if (typeof process != 'undefined' && process.cwd) {\n    baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd() + '/';\n    if (isWindows)\n      baseURI = baseURI.replace(/\\\\/g, '/');\n  }\n  else if (typeof location != 'undefined') {\n    baseURI = __global.location.href;\n  }\n  else {\n    throw new TypeError('No environment baseURI');\n  }\n\n  var URL = __global.URLPolyfill || __global.URL;\n/*\n*********************************************************************************************\n\n  Dynamic Module Loader Polyfill\n\n    - Implemented exactly to the former 2014-08-24 ES6 Specification Draft Rev 27, Section 15\n      http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts#august_24_2014_draft_rev_27\n\n    - Functions are commented with their spec numbers, with spec differences commented.\n\n    - Spec bugs are commented in this code with links.\n\n    - Abstract functions have been combined where possible, and their associated functions\n      commented.\n\n    - Realm implementation is entirely omitted.\n\n*********************************************************************************************\n*/\n\nfunction Module() {}\n// http://www.ecma-international.org/ecma-262/6.0/#sec-@@tostringtag\ndefineProperty(Module.prototype, 'toString', {\n  value: function() {\n    return 'Module';\n  }\n});\nfunction Loader(options) {\n  this._loader = {\n    loaderObj: this,\n    loads: [],\n    modules: {},\n    importPromises: {},\n    moduleRecords: {}\n  };\n\n  // 26.3.3.6\n  defineProperty(this, 'global', {\n    get: function() {\n      return __global;\n    }\n  });\n\n  // 26.3.3.13 realm not implemented\n}\n\n(function() {\n\n// Some Helpers\n\n// logs a linkset snapshot for debugging\n/* function snapshot(loader) {\n  console.log('---Snapshot---');\n  for (var i = 0; i < loader.loads.length; i++) {\n    var load = loader.loads[i];\n    var linkSetLog = '  ' + load.name + ' (' + load.status + '): ';\n\n    for (var j = 0; j < load.linkSets.length; j++) {\n      linkSetLog += '{' + logloads(load.linkSets[j].loads) + '} ';\n    }\n    console.log(linkSetLog);\n  }\n  console.log('');\n}\nfunction logloads(loads) {\n  var log = '';\n  for (var k = 0; k < loads.length; k++)\n    log += loads[k].name + (k != loads.length - 1 ? ' ' : '');\n  return log;\n} */\n\n\n/* function checkInvariants() {\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2603#c1\n\n  var loads = System._loader.loads;\n  var linkSets = [];\n\n  for (var i = 0; i < loads.length; i++) {\n    var load = loads[i];\n    console.assert(load.status == 'loading' || load.status == 'loaded', 'Each load is loading or loaded');\n\n    for (var j = 0; j < load.linkSets.length; j++) {\n      var linkSet = load.linkSets[j];\n\n      for (var k = 0; k < linkSet.loads.length; k++)\n        console.assert(loads.indexOf(linkSet.loads[k]) != -1, 'linkSet loads are a subset of loader loads');\n\n      if (linkSets.indexOf(linkSet) == -1)\n        linkSets.push(linkSet);\n    }\n  }\n\n  for (var i = 0; i < loads.length; i++) {\n    var load = loads[i];\n    for (var j = 0; j < linkSets.length; j++) {\n      var linkSet = linkSets[j];\n\n      if (linkSet.loads.indexOf(load) != -1)\n        console.assert(load.linkSets.indexOf(linkSet) != -1, 'linkSet contains load -> load contains linkSet');\n\n      if (load.linkSets.indexOf(linkSet) != -1)\n        console.assert(linkSet.loads.indexOf(load) != -1, 'load contains linkSet -> linkSet contains load');\n    }\n  }\n\n  for (var i = 0; i < linkSets.length; i++) {\n    var linkSet = linkSets[i];\n    for (var j = 0; j < linkSet.loads.length; j++) {\n      var load = linkSet.loads[j];\n\n      for (var k = 0; k < load.dependencies.length; k++) {\n        var depName = load.dependencies[k].value;\n        var depLoad;\n        for (var l = 0; l < loads.length; l++) {\n          if (loads[l].name != depName)\n            continue;\n          depLoad = loads[l];\n          break;\n        }\n\n        // loading records are allowed not to have their dependencies yet\n        // if (load.status != 'loading')\n        //  console.assert(depLoad, 'depLoad found');\n\n        // console.assert(linkSet.loads.indexOf(depLoad) != -1, 'linkset contains all dependencies');\n      }\n    }\n  }\n} */\n\n  // 15.2.3 - Runtime Semantics: Loader State\n\n  // 15.2.3.11\n  function createLoaderLoad(object) {\n    return {\n      // modules is an object for ES5 implementation\n      modules: {},\n      loads: [],\n      loaderObj: object\n    };\n  }\n\n  // 15.2.3.2 Load Records and LoadRequest Objects\n\n  // 15.2.3.2.1\n  function createLoad(name) {\n    return {\n      status: 'loading',\n      name: name,\n      linkSets: [],\n      dependencies: [],\n      metadata: {}\n    };\n  }\n\n  // 15.2.3.2.2 createLoadRequestObject, absorbed into calling functions\n\n  // 15.2.4\n\n  // 15.2.4.1\n  function loadModule(loader, name, options) {\n    return new Promise(asyncStartLoadPartwayThrough({\n      step: options.address ? 'fetch' : 'locate',\n      loader: loader,\n      moduleName: name,\n      // allow metadata for import https://bugs.ecmascript.org/show_bug.cgi?id=3091\n      moduleMetadata: options && options.metadata || {},\n      moduleSource: options.source,\n      moduleAddress: options.address\n    }));\n  }\n\n  // 15.2.4.2\n  function requestLoad(loader, request, refererName, refererAddress) {\n    // 15.2.4.2.1 CallNormalize\n    return new Promise(function(resolve, reject) {\n      resolve(loader.loaderObj.normalize(request, refererName, refererAddress));\n    })\n    // 15.2.4.2.2 GetOrCreateLoad\n    .then(function(name) {\n      var load;\n      if (loader.modules[name]) {\n        load = createLoad(name);\n        load.status = 'linked';\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2795\n        load.module = loader.modules[name];\n        return load;\n      }\n\n      for (var i = 0, l = loader.loads.length; i < l; i++) {\n        load = loader.loads[i];\n        if (load.name != name)\n          continue;\n        console.assert(load.status == 'loading' || load.status == 'loaded', 'loading or loaded');\n        return load;\n      }\n\n      load = createLoad(name);\n      loader.loads.push(load);\n\n      proceedToLocate(loader, load);\n\n      return load;\n    });\n  }\n\n  // 15.2.4.3\n  function proceedToLocate(loader, load) {\n    proceedToFetch(loader, load,\n      Promise.resolve()\n      // 15.2.4.3.1 CallLocate\n      .then(function() {\n        return loader.loaderObj.locate({ name: load.name, metadata: load.metadata });\n      })\n    );\n  }\n\n  // 15.2.4.4\n  function proceedToFetch(loader, load, p) {\n    proceedToTranslate(loader, load,\n      p\n      // 15.2.4.4.1 CallFetch\n      .then(function(address) {\n        // adjusted, see https://bugs.ecmascript.org/show_bug.cgi?id=2602\n        if (load.status != 'loading')\n          return;\n        load.address = address;\n\n        return loader.loaderObj.fetch({ name: load.name, metadata: load.metadata, address: address });\n      })\n    );\n  }\n\n  var anonCnt = 0;\n\n  // 15.2.4.5\n  function proceedToTranslate(loader, load, p) {\n    p\n    // 15.2.4.5.1 CallTranslate\n    .then(function(source) {\n      if (load.status != 'loading')\n        return;\n\n      return Promise.resolve(loader.loaderObj.translate({ name: load.name, metadata: load.metadata, address: load.address, source: source }))\n\n      // 15.2.4.5.2 CallInstantiate\n      .then(function(source) {\n        load.source = source;\n        return loader.loaderObj.instantiate({ name: load.name, metadata: load.metadata, address: load.address, source: source });\n      })\n\n      // 15.2.4.5.3 InstantiateSucceeded\n      .then(function(instantiateResult) {\n        if (instantiateResult === undefined) {\n          load.address = load.address || '<Anonymous Module ' + ++anonCnt + '>';\n\n          // instead of load.kind, use load.isDeclarative\n          load.isDeclarative = true;\n          return transpile.call(loader.loaderObj, load)\n          .then(function(transpiled) {\n            // Hijack System.register to set declare function\n            var curSystem = __global.System;\n            var curRegister = curSystem.register;\n            curSystem.register = function(name, deps, declare) {\n              if (typeof name != 'string') {\n                declare = deps;\n                deps = name;\n              }\n              // store the registered declaration as load.declare\n              // store the deps as load.deps\n              load.declare = declare;\n              load.depsList = deps;\n            }\n            // empty {} context is closest to undefined 'this' we can get\n            __eval(transpiled, load.address, {});\n            curSystem.register = curRegister;\n          });\n        }\n        else if (typeof instantiateResult == 'object') {\n          load.depsList = instantiateResult.deps || [];\n          load.execute = instantiateResult.execute;\n          load.isDeclarative = false;\n        }\n        else\n          throw TypeError('Invalid instantiate return value');\n      })\n      // 15.2.4.6 ProcessLoadDependencies\n      .then(function() {\n        load.dependencies = [];\n        var depsList = load.depsList;\n\n        var loadPromises = [];\n        for (var i = 0, l = depsList.length; i < l; i++) (function(request, index) {\n          loadPromises.push(\n            requestLoad(loader, request, load.name, load.address)\n\n            // 15.2.4.6.1 AddDependencyLoad (load is parentLoad)\n            .then(function(depLoad) {\n\n              // adjusted from spec to maintain dependency order\n              // this is due to the System.register internal implementation needs\n              load.dependencies[index] = {\n                key: request,\n                value: depLoad.name\n              };\n\n              if (depLoad.status != 'linked') {\n                var linkSets = load.linkSets.concat([]);\n                for (var i = 0, l = linkSets.length; i < l; i++)\n                  addLoadToLinkSet(linkSets[i], depLoad);\n              }\n\n              // console.log('AddDependencyLoad ' + depLoad.name + ' for ' + load.name);\n              // snapshot(loader);\n            })\n          );\n        })(depsList[i], i);\n\n        return Promise.all(loadPromises);\n      })\n\n      // 15.2.4.6.2 LoadSucceeded\n      .then(function() {\n        // console.log('LoadSucceeded ' + load.name);\n        // snapshot(loader);\n\n        console.assert(load.status == 'loading', 'is loading');\n\n        load.status = 'loaded';\n\n        var linkSets = load.linkSets.concat([]);\n        for (var i = 0, l = linkSets.length; i < l; i++)\n          updateLinkSetOnLoad(linkSets[i], load);\n      });\n    })\n    // 15.2.4.5.4 LoadFailed\n    ['catch'](function(exc) {\n      load.status = 'failed';\n      load.exception = exc;\n\n      var linkSets = load.linkSets.concat([]);\n      for (var i = 0, l = linkSets.length; i < l; i++) {\n        linkSetFailed(linkSets[i], load, exc);\n      }\n\n      console.assert(load.linkSets.length == 0, 'linkSets not removed');\n    });\n  }\n\n  // 15.2.4.7 PromiseOfStartLoadPartwayThrough absorbed into calling functions\n\n  // 15.2.4.7.1\n  function asyncStartLoadPartwayThrough(stepState) {\n    return function(resolve, reject) {\n      var loader = stepState.loader;\n      var name = stepState.moduleName;\n      var step = stepState.step;\n\n      if (loader.modules[name])\n        throw new TypeError('\"' + name + '\" already exists in the module table');\n\n      // adjusted to pick up existing loads\n      var existingLoad;\n      for (var i = 0, l = loader.loads.length; i < l; i++) {\n        if (loader.loads[i].name == name) {\n          existingLoad = loader.loads[i];\n\n          if (step == 'translate' && !existingLoad.source) {\n            existingLoad.address = stepState.moduleAddress;\n            proceedToTranslate(loader, existingLoad, Promise.resolve(stepState.moduleSource));\n          }\n\n          // a primary load -> use that existing linkset if it is for the direct load here\n          // otherwise create a new linkset unit\n          if (existingLoad.linkSets.length && existingLoad.linkSets[0].loads[0].name == existingLoad.name)\n            return existingLoad.linkSets[0].done.then(function() {\n              resolve(existingLoad);\n            });\n        }\n      }\n\n      var load = existingLoad || createLoad(name);\n\n      load.metadata = stepState.moduleMetadata;\n\n      var linkSet = createLinkSet(loader, load);\n\n      loader.loads.push(load);\n\n      resolve(linkSet.done);\n\n      if (step == 'locate')\n        proceedToLocate(loader, load);\n\n      else if (step == 'fetch')\n        proceedToFetch(loader, load, Promise.resolve(stepState.moduleAddress));\n\n      else {\n        console.assert(step == 'translate', 'translate step');\n        load.address = stepState.moduleAddress;\n        proceedToTranslate(loader, load, Promise.resolve(stepState.moduleSource));\n      }\n    }\n  }\n\n  // Declarative linking functions run through alternative implementation:\n  // 15.2.5.1.1 CreateModuleLinkageRecord not implemented\n  // 15.2.5.1.2 LookupExport not implemented\n  // 15.2.5.1.3 LookupModuleDependency not implemented\n\n  // 15.2.5.2.1\n  function createLinkSet(loader, startingLoad) {\n    var linkSet = {\n      loader: loader,\n      loads: [],\n      startingLoad: startingLoad, // added see spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995\n      loadingCount: 0\n    };\n    linkSet.done = new Promise(function(resolve, reject) {\n      linkSet.resolve = resolve;\n      linkSet.reject = reject;\n    });\n    addLoadToLinkSet(linkSet, startingLoad);\n    return linkSet;\n  }\n  // 15.2.5.2.2\n  function addLoadToLinkSet(linkSet, load) {\n    if (load.status == 'failed')\n      return;\n\n    console.assert(load.status == 'loading' || load.status == 'loaded', 'loading or loaded on link set');\n\n    for (var i = 0, l = linkSet.loads.length; i < l; i++)\n      if (linkSet.loads[i] == load)\n        return;\n\n    linkSet.loads.push(load);\n    load.linkSets.push(linkSet);\n\n    // adjustment, see https://bugs.ecmascript.org/show_bug.cgi?id=2603\n    if (load.status != 'loaded') {\n      linkSet.loadingCount++;\n    }\n\n    var loader = linkSet.loader;\n\n    for (var i = 0, l = load.dependencies.length; i < l; i++) {\n      if (!load.dependencies[i])\n        continue;\n\n      var name = load.dependencies[i].value;\n\n      if (loader.modules[name])\n        continue;\n\n      for (var j = 0, d = loader.loads.length; j < d; j++) {\n        if (loader.loads[j].name != name)\n          continue;\n\n        addLoadToLinkSet(linkSet, loader.loads[j]);\n        break;\n      }\n    }\n    // console.log('add to linkset ' + load.name);\n    // snapshot(linkSet.loader);\n  }\n\n  // linking errors can be generic or load-specific\n  // this is necessary for debugging info\n  function doLink(linkSet) {\n    var error = false;\n    try {\n      link(linkSet, function(load, exc) {\n        linkSetFailed(linkSet, load, exc);\n        error = true;\n      });\n    }\n    catch(e) {\n      linkSetFailed(linkSet, null, e);\n      error = true;\n    }\n    return error;\n  }\n\n  // 15.2.5.2.3\n  function updateLinkSetOnLoad(linkSet, load) {\n    // console.log('update linkset on load ' + load.name);\n    // snapshot(linkSet.loader);\n\n    console.assert(load.status == 'loaded' || load.status == 'linked', 'loaded or linked');\n\n    linkSet.loadingCount--;\n\n    if (linkSet.loadingCount > 0)\n      return;\n\n    // adjusted for spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995\n    var startingLoad = linkSet.startingLoad;\n\n    // non-executing link variation for loader tracing\n    // on the server. Not in spec.\n    /***/\n    if (linkSet.loader.loaderObj.execute === false) {\n      var loads = [].concat(linkSet.loads);\n      for (var i = 0, l = loads.length; i < l; i++) {\n        var load = loads[i];\n        load.module = !load.isDeclarative ? {\n          module: _newModule({})\n        } : {\n          name: load.name,\n          module: _newModule({}),\n          evaluated: true\n        };\n        load.status = 'linked';\n        finishLoad(linkSet.loader, load);\n      }\n      return linkSet.resolve(startingLoad);\n    }\n    /***/\n\n    var abrupt = doLink(linkSet);\n\n    if (abrupt)\n      return;\n\n    console.assert(linkSet.loads.length == 0, 'loads cleared');\n\n    linkSet.resolve(startingLoad);\n  }\n\n  // 15.2.5.2.4\n  function linkSetFailed(linkSet, load, exc) {\n    var loader = linkSet.loader;\n    var requests;\n\n    checkError: \n    if (load) {\n      if (linkSet.loads[0].name == load.name) {\n        exc = addToError(exc, 'Error loading ' + load.name);\n      }\n      else {\n        for (var i = 0; i < linkSet.loads.length; i++) {\n          var pLoad = linkSet.loads[i];\n          for (var j = 0; j < pLoad.dependencies.length; j++) {\n            var dep = pLoad.dependencies[j];\n            if (dep.value == load.name) {\n              exc = addToError(exc, 'Error loading ' + load.name + ' as \"' + dep.key + '\" from ' + pLoad.name);\n              break checkError;\n            }\n          }\n        }\n        exc = addToError(exc, 'Error loading ' + load.name + ' from ' + linkSet.loads[0].name);\n      }\n    }\n    else {\n      exc = addToError(exc, 'Error linking ' + linkSet.loads[0].name);\n    }\n\n\n    var loads = linkSet.loads.concat([]);\n    for (var i = 0, l = loads.length; i < l; i++) {\n      var load = loads[i];\n\n      // store all failed load records\n      loader.loaderObj.failed = loader.loaderObj.failed || [];\n      if (indexOf.call(loader.loaderObj.failed, load) == -1)\n        loader.loaderObj.failed.push(load);\n\n      var linkIndex = indexOf.call(load.linkSets, linkSet);\n      console.assert(linkIndex != -1, 'link not present');\n      load.linkSets.splice(linkIndex, 1);\n      if (load.linkSets.length == 0) {\n        var globalLoadsIndex = indexOf.call(linkSet.loader.loads, load);\n        if (globalLoadsIndex != -1)\n          linkSet.loader.loads.splice(globalLoadsIndex, 1);\n      }\n    }\n    linkSet.reject(exc);\n  }\n\n  // 15.2.5.2.5\n  function finishLoad(loader, load) {\n    // add to global trace if tracing\n    if (loader.loaderObj.trace) {\n      if (!loader.loaderObj.loads)\n        loader.loaderObj.loads = {};\n      var depMap = {};\n      load.dependencies.forEach(function(dep) {\n        depMap[dep.key] = dep.value;\n      });\n      loader.loaderObj.loads[load.name] = {\n        name: load.name,\n        deps: load.dependencies.map(function(dep){ return dep.key }),\n        depMap: depMap,\n        address: load.address,\n        metadata: load.metadata,\n        source: load.source,\n        kind: load.isDeclarative ? 'declarative' : 'dynamic'\n      };\n    }\n    // if not anonymous, add to the module table\n    if (load.name) {\n      console.assert(!loader.modules[load.name], 'load not in module table');\n      loader.modules[load.name] = load.module;\n    }\n    var loadIndex = indexOf.call(loader.loads, load);\n    if (loadIndex != -1)\n      loader.loads.splice(loadIndex, 1);\n    for (var i = 0, l = load.linkSets.length; i < l; i++) {\n      loadIndex = indexOf.call(load.linkSets[i].loads, load);\n      if (loadIndex != -1)\n        load.linkSets[i].loads.splice(loadIndex, 1);\n    }\n    load.linkSets.splice(0, load.linkSets.length);\n  }\n\n  function doDynamicExecute(linkSet, load, linkError) {\n    try {\n      var module = load.execute();\n    }\n    catch(e) {\n      linkError(load, e);\n      return;\n    }\n    if (!module || !(module instanceof Module))\n      linkError(load, new TypeError('Execution must define a Module instance'));\n    else\n      return module;\n  }\n\n  // 26.3 Loader\n\n  // 26.3.1.1\n  // defined at top\n\n  // importPromises adds ability to import a module twice without error - https://bugs.ecmascript.org/show_bug.cgi?id=2601\n  function createImportPromise(loader, name, promise) {\n    var importPromises = loader._loader.importPromises;\n    return importPromises[name] = promise.then(function(m) {\n      importPromises[name] = undefined;\n      return m;\n    }, function(e) {\n      importPromises[name] = undefined;\n      throw e;\n    });\n  }\n\n  Loader.prototype = {\n    // 26.3.3.1\n    constructor: Loader,\n    // 26.3.3.2\n    define: function(name, source, options) {\n      // check if already defined\n      if (this._loader.importPromises[name])\n        throw new TypeError('Module is already loading.');\n      return createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({\n        step: 'translate',\n        loader: this._loader,\n        moduleName: name,\n        moduleMetadata: options && options.metadata || {},\n        moduleSource: source,\n        moduleAddress: options && options.address\n      })));\n    },\n    // 26.3.3.3\n    'delete': function(name) {\n      var loader = this._loader;\n      delete loader.importPromises[name];\n      delete loader.moduleRecords[name];\n      return loader.modules[name] ? delete loader.modules[name] : false;\n    },\n    // 26.3.3.4 entries not implemented\n    // 26.3.3.5\n    get: function(key) {\n      if (!this._loader.modules[key])\n        return;\n      doEnsureEvaluated(this._loader.modules[key], [], this);\n      return this._loader.modules[key].module;\n    },\n    // 26.3.3.7\n    has: function(name) {\n      return !!this._loader.modules[name];\n    },\n    // 26.3.3.8\n    'import': function(name, parentName, parentAddress) {\n      if (typeof parentName == 'object')\n        parentName = parentName.name;\n\n      // run normalize first\n      var loaderObj = this;\n\n      // added, see https://bugs.ecmascript.org/show_bug.cgi?id=2659\n      return Promise.resolve(loaderObj.normalize(name, parentName))\n      .then(function(name) {\n        var loader = loaderObj._loader;\n\n        if (loader.modules[name]) {\n          doEnsureEvaluated(loader.modules[name], [], loader._loader);\n          return loader.modules[name].module;\n        }\n\n        return loader.importPromises[name] || createImportPromise(loaderObj, name,\n          loadModule(loader, name, {})\n          .then(function(load) {\n            delete loader.importPromises[name];\n            return evaluateLoadedModule(loader, load);\n          }));\n      });\n    },\n    // 26.3.3.9 keys not implemented\n    // 26.3.3.10\n    load: function(name) {\n      var loader = this._loader;\n      if (loader.modules[name])\n        return Promise.resolve();\n      return loader.importPromises[name] || createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({\n        step: 'locate',\n        loader: loader,\n        moduleName: name,\n        moduleMetadata: {},\n        moduleSource: undefined,\n        moduleAddress: undefined\n      }))\n      .then(function() {\n        delete loader.importPromises[name];\n      }));\n    },\n    // 26.3.3.11\n    module: function(source, options) {\n      var load = createLoad();\n      load.address = options && options.address;\n      var linkSet = createLinkSet(this._loader, load);\n      var sourcePromise = Promise.resolve(source);\n      var loader = this._loader;\n      var p = linkSet.done.then(function() {\n        return evaluateLoadedModule(loader, load);\n      });\n      proceedToTranslate(loader, load, sourcePromise);\n      return p;\n    },\n    // 26.3.3.12\n    newModule: function (obj) {\n      if (typeof obj != 'object')\n        throw new TypeError('Expected object');\n\n      var m = new Module();\n\n      var pNames = [];\n      if (Object.getOwnPropertyNames && obj != null)\n        pNames = Object.getOwnPropertyNames(obj);\n      else\n        for (var key in obj)\n          pNames.push(key);\n\n      for (var i = 0; i < pNames.length; i++) (function(key) {\n        defineProperty(m, key, {\n          configurable: false,\n          enumerable: true,\n          get: function () {\n            return obj[key];\n          },\n          set: function() {\n            throw new Error('Module exports cannot be changed externally.');\n          }\n        });\n      })(pNames[i]);\n\n      if (Object.freeze)\n        Object.freeze(m);\n\n      return m;\n    },\n    // 26.3.3.14\n    set: function(name, module) {\n      if (!(module instanceof Module))\n        throw new TypeError('Loader.set(' + name + ', module) must be a module');\n      this._loader.modules[name] = {\n        module: module\n      };\n    },\n    // 26.3.3.15 values not implemented\n    // 26.3.3.16 @@iterator not implemented\n    // 26.3.3.17 @@toStringTag not implemented\n\n    // 26.3.3.18.1\n    normalize: function(name, referrerName, referrerAddress) {\n      return name;\n    },\n    // 26.3.3.18.2\n    locate: function(load) {\n      return load.name;\n    },\n    // 26.3.3.18.3\n    fetch: function(load) {\n    },\n    // 26.3.3.18.4\n    translate: function(load) {\n      return load.source;\n    },\n    // 26.3.3.18.5\n    instantiate: function(load) {\n    }\n  };\n\n  var _newModule = Loader.prototype.newModule;\n/*\n * ES6 Module Declarative Linking Code - Dev Build Only\n */\n  function link(linkSet, linkError) {\n\n    var loader = linkSet.loader;\n\n    if (!linkSet.loads.length)\n      return;\n\n    var loads = linkSet.loads.concat([]);\n\n    for (var i = 0; i < loads.length; i++) {\n      var load = loads[i];\n\n      var module = doDynamicExecute(linkSet, load, linkError);\n      if (!module)\n        return;\n      load.module = {\n        name: load.name,\n        module: module\n      };\n      load.status = 'linked';\n\n      finishLoad(loader, load);\n    }\n  }\n\n  function evaluateLoadedModule(loader, load) {\n    console.assert(load.status == 'linked', 'is linked ' + load.name);\n    return load.module.module;\n  }\n\n  function doEnsureEvaluated() {}\n\n  function transpile() {\n    throw new TypeError('ES6 transpilation is only provided in the dev module loader build.');\n  }\n})();/*\n*********************************************************************************************\n\n  System Loader Implementation\n\n    - Implemented to https://github.com/jorendorff/js-loaders/blob/master/browser-loader.js\n\n    - <script type=\"module\"> supported\n\n*********************************************************************************************\n*/\n\nvar System;\n\nfunction SystemLoader() {\n  Loader.call(this);\n  this.paths = {};\n}\n\n// NB no specification provided for System.paths, used ideas discussed in https://github.com/jorendorff/js-loaders/issues/25\nfunction applyPaths(paths, name) {\n  // most specific (most number of slashes in path) match wins\n  var pathMatch = '', wildcard, maxWildcardPrefixLen = 0;\n\n  // check to see if we have a paths entry\n  for (var p in paths) {\n    var pathParts = p.split('*');\n    if (pathParts.length > 2)\n      throw new TypeError('Only one wildcard in a path is permitted');\n\n    // exact path match\n    if (pathParts.length == 1) {\n      if (name == p)\n        return paths[p];\n      \n      // support trailing / in paths rules\n      else if (name.substr(0, p.length - 1) == p.substr(0, p.length - 1) && (name.length < p.length || name[p.length - 1] == p[p.length - 1]) && paths[p][paths[p].length - 1] == '/')\n        return paths[p].substr(0, paths[p].length - 1) + (name.length > p.length ? '/' + name.substr(p.length) : '');\n    }\n    // wildcard path match\n    else {\n      var wildcardPrefixLen = pathParts[0].length;\n      if (wildcardPrefixLen >= maxWildcardPrefixLen &&\n          name.substr(0, pathParts[0].length) == pathParts[0] &&\n          name.substr(name.length - pathParts[1].length) == pathParts[1]) {\n            maxWildcardPrefixLen = wildcardPrefixLen;\n            pathMatch = p;\n            wildcard = name.substr(pathParts[0].length, name.length - pathParts[1].length - pathParts[0].length);\n          }\n    }\n  }\n\n  var outPath = paths[pathMatch];\n  if (typeof wildcard == 'string')\n    outPath = outPath.replace('*', wildcard);\n\n  return outPath;\n}\n\n// inline Object.create-style class extension\nfunction LoaderProto() {}\nLoaderProto.prototype = Loader.prototype;\nSystemLoader.prototype = new LoaderProto();\n  var fetchTextFromURL;\n  if (typeof XMLHttpRequest != 'undefined') {\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      var xhr = new XMLHttpRequest();\n      var sameDomain = true;\n      var doTimeout = false;\n      if (!('withCredentials' in xhr)) {\n        // check if same domain\n        var domainCheck = /^(\\w+:)?\\/\\/([^\\/]+)/.exec(url);\n        if (domainCheck) {\n          sameDomain = domainCheck[2] === window.location.host;\n          if (domainCheck[1])\n            sameDomain &= domainCheck[1] === window.location.protocol;\n        }\n      }\n      if (!sameDomain && typeof XDomainRequest != 'undefined') {\n        xhr = new XDomainRequest();\n        xhr.onload = load;\n        xhr.onerror = error;\n        xhr.ontimeout = error;\n        xhr.onprogress = function() {};\n        xhr.timeout = 0;\n        doTimeout = true;\n      }\n      function load() {\n        fulfill(xhr.responseText);\n      }\n      function error() {\n        reject(new Error('XHR error' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));\n      }\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          // in Chrome on file:/// URLs, status is 0\n          if (xhr.status == 0) {\n            if (xhr.responseText) {\n              load();\n            }\n            else {\n              // when responseText is empty, wait for load or error event\n              // to inform if it is a 404 or empty file\n              xhr.addEventListener('error', error);\n              xhr.addEventListener('load', load);\n            }\n          }\n          else if (xhr.status === 200) {\n            load();\n          }\n          else {\n            error();\n          }\n        }\n      };\n      xhr.open(\"GET\", url, true);\n\n      if (xhr.setRequestHeader) {\n        xhr.setRequestHeader('Accept', 'application/x-es-module, */*');\n        // can set \"authorization: true\" to enable withCredentials only\n        if (authorization) {\n          if (typeof authorization == 'string')\n            xhr.setRequestHeader('Authorization', authorization);\n          xhr.withCredentials = true;\n        }\n      }\n\n      if (doTimeout) {\n        setTimeout(function() {\n          xhr.send();\n        }, 0);\n      } else {\n        xhr.send(null);\n      }\n    };\n  }\n  else if (typeof require != 'undefined' && typeof process != 'undefined') {\n    var fs;\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      if (url.substr(0, 8) != 'file:///')\n        throw new Error('Unable to fetch \"' + url + '\". Only file URLs of the form file:/// allowed running in Node.');\n      fs = fs || require('fs');\n      if (isWindows)\n        url = url.replace(/\\//g, '\\\\').substr(8);\n      else\n        url = url.substr(7);\n      return fs.readFile(url, function(err, data) {\n        if (err) {\n          return reject(err);\n        }\n        else {\n          // Strip Byte Order Mark out if it's the leading char\n          var dataString = data + '';\n          if (dataString[0] === '\\ufeff')\n            dataString = dataString.substr(1);\n\n          fulfill(dataString);\n        }\n      });\n    };\n  }\n  else if (typeof self != 'undefined' && typeof self.fetch != 'undefined') {\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      var opts = {\n        headers: {'Accept': 'application/x-es-module, */*'}\n      };\n\n      if (authorization) {\n        if (typeof authorization == 'string')\n          opts.headers['Authorization'] = authorization;\n        opts.credentials = 'include';\n      }\n\n      fetch(url, opts)\n        .then(function (r) {\n          if (r.ok) {\n            return r.text();\n          } else {\n            throw new Error('Fetch error: ' + r.status + ' ' + r.statusText);\n          }\n        })\n        .then(fulfill, reject);\n    }\n  }\n  else {\n    throw new TypeError('No environment fetch API available.');\n  }\n\n  SystemLoader.prototype.fetch = function(load) {\n    return new Promise(function(resolve, reject) {\n      fetchTextFromURL(load.address, undefined, resolve, reject);\n    });\n  };\n/*\n * Traceur, Babel and TypeScript transpile hook for Loader\n */\nvar transpile = (function() {\n\n  // use Traceur by default\n  Loader.prototype.transpiler = 'traceur';\n\n  function transpile(load) {\n    var self = this;\n\n    return Promise.resolve(__global[self.transpiler == 'typescript' ? 'ts' : self.transpiler]\n        || (self.pluginLoader || self)['import'](self.transpiler))\n    .then(function(transpiler) {\n      if (transpiler.__useDefault)\n        transpiler = transpiler['default'];\n\n      var transpileFunction;\n      if (transpiler.Compiler)\n        transpileFunction = traceurTranspile;\n      else if (transpiler.createLanguageService)\n        transpileFunction = typescriptTranspile;\n      else\n        transpileFunction = babelTranspile;\n\n      // note __moduleName will be part of the transformer meta in future when we have the spec for this\n      return '(function(__moduleName){' + transpileFunction.call(self, load, transpiler) + '\\n})(\"' + load.name + '\");\\n//# sourceURL=' + load.address + '!transpiled';\n    });\n  };\n\n  function traceurTranspile(load, traceur) {\n    var options = this.traceurOptions || {};\n    options.modules = 'instantiate';\n    options.script = false;\n    if (options.sourceMaps === undefined)\n      options.sourceMaps = 'inline';\n    options.filename = load.address;\n    options.inputSourceMap = load.metadata.sourceMap;\n    options.moduleName = false;\n\n    var compiler = new traceur.Compiler(options);\n\n    return doTraceurCompile(load.source, compiler, options.filename);\n  }\n  function doTraceurCompile(source, compiler, filename) {\n    try {\n      return compiler.compile(source, filename);\n    }\n    catch(e) {\n      // on older versions of traceur (<0.9.3), an array of errors is thrown\n      // rather than a single error.\n      if (e.length) {\n        throw e[0];\n      }\n      throw e;\n    }\n  }\n\n  function babelTranspile(load, babel) {\n    var options = this.babelOptions || {};\n    options.modules = 'system';\n    if (options.sourceMap === undefined)\n      options.sourceMap = 'inline';\n    options.inputSourceMap = load.metadata.sourceMap;\n    options.filename = load.address;\n    options.code = true;\n    options.ast = false;\n\n    return babel.transform(load.source, options).code;\n  }\n\n  function typescriptTranspile(load, ts) {\n    var options = this.typescriptOptions || {};\n    options.target = options.target || ts.ScriptTarget.ES5;\n    if (options.sourceMap === undefined)\n      options.sourceMap = true;\n    if (options.sourceMap && options.inlineSourceMap !== false)\n      options.inlineSourceMap = true;\n\n    options.module = ts.ModuleKind.System;\n\n    return ts.transpile(load.source, options, load.address);\n  }\n\n  return transpile;\n})();\n// SystemJS Loader Class and Extension helpers\n\nfunction SystemJSLoader() {\n  SystemLoader.call(this);\n\n  systemJSConstructor.call(this);\n}\n\n// inline Object.create-style class extension\nfunction SystemProto() {};\nSystemProto.prototype = SystemLoader.prototype;\nSystemJSLoader.prototype = new SystemProto();\nSystemJSLoader.prototype.constructor = SystemJSLoader;\n\n// remove ESML instantiate\nSystemJSLoader.prototype.instantiate = function() {};\n\nvar systemJSConstructor;\n\nfunction hook(name, hook) {\n  SystemJSLoader.prototype[name] = hook(SystemJSLoader.prototype[name] || function() {});\n}\nfunction hookConstructor(hook) {\n  systemJSConstructor = hook(systemJSConstructor || function() {});\n}\n\nfunction dedupe(deps) {\n  var newDeps = [];\n  for (var i = 0, l = deps.length; i < l; i++)\n    if (indexOf.call(newDeps, deps[i]) == -1)\n      newDeps.push(deps[i])\n  return newDeps;\n}\n\nfunction group(deps) {\n  var names = [];\n  var indices = [];\n  for (var i = 0, l = deps.length; i < l; i++) {\n    var index = indexOf.call(names, deps[i]);\n    if (index === -1) {\n      names.push(deps[i]);\n      indices.push([i]);\n    }\n    else {\n      indices[index].push(i);\n    }\n  }\n  return { names: names, indices: indices };\n}\n\nvar getOwnPropertyDescriptor = true;\ntry {\n  Object.getOwnPropertyDescriptor({ a: 0 }, 'a');\n}\ncatch(e) {\n  getOwnPropertyDescriptor = false;\n}\n\n// converts any module.exports object into an object ready for SystemJS.newModule\nfunction getESModule(exports) {\n  var esModule = {};\n  // don't trigger getters/setters in environments that support them\n  if (typeof exports == 'object' || typeof exports == 'function') {\n    if (getOwnPropertyDescriptor) {\n      var d;\n      for (var p in exports)\n        if (d = Object.getOwnPropertyDescriptor(exports, p))\n          defineProperty(esModule, p, d);\n    }\n    else {\n      var hasOwnProperty = exports && exports.hasOwnProperty;\n      for (var p in exports) {\n        if (!hasOwnProperty || exports.hasOwnProperty(p))\n          esModule[p] = exports[p];\n      }\n    }\n  }\n  esModule['default'] = exports;\n  defineProperty(esModule, '__useDefault', {\n    value: true\n  });\n  return esModule;\n}\n\nfunction extend(a, b, prepend) {\n  for (var p in b) {\n    if (!prepend || !(p in a))\n      a[p] = b[p];\n  }\n  return a;\n}\n\n// package configuration options\nvar packageProperties = ['main', 'format', 'defaultExtension', 'meta', 'map', 'basePath', 'depCache'];\n\n// meta first-level extends where:\n// array + array appends\n// object + object extends\n// other properties replace\nfunction extendMeta(a, b, prepend) {\n  for (var p in b) {\n    var val = b[p];\n    if (!(p in a))\n      a[p] = val;\n    else if (val instanceof Array && a[p] instanceof Array)\n      a[p] = [].concat(prepend ? val : a[p]).concat(prepend ? a[p] : val);\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\n      a[p] = extend(extend({}, a[p]), val, prepend);\n    else if (!prepend)\n      a[p] = val;\n  }\n}\n\nfunction warn(msg) {\n  if (this.warnings && typeof console != 'undefined' && console.warn)\n    console.warn(msg);\n}// we define a __exec for globally-scoped execution\n// used by module format implementations\nvar __exec;\n\n(function() {\n\n  var hasBtoa = typeof btoa != 'undefined';\n\n  // used to support leading #!/usr/bin/env in scripts as supported in Node\n  var hashBangRegEx = /^\\#\\!.*/;\n\n  function getSource(load) {\n    var lastLineIndex = load.source.lastIndexOf('\\n');\n\n    // wrap ES formats with a System closure for System global encapsulation\n    var wrap = load.metadata.format == 'esm' || load.metadata.format == 'register' || load.metadata.bundle;\n\n    var sourceMap = load.metadata.sourceMap;\n    if (sourceMap) {\n      if (typeof sourceMap != 'object')\n        throw new TypeError('load.metadata.sourceMap must be set to an object.');\n\n      if (sourceMap.mappings)\n        sourceMap.mappings = ';' + sourceMap.mappings;\n    }\n    \n    sourceMap = JSON.stringify(sourceMap);\n\n    return (wrap ? '(function(System, SystemJS) {' : '') + (load.metadata.format == 'cjs' ? load.source.replace(hashBangRegEx, '') : load.source) + (wrap ? '\\n})(System, System);' : '')\n        // adds the sourceURL comment if not already present\n        + (load.source.substr(lastLineIndex, 15) != '\\n//# sourceURL=' \n          ? '\\n//# sourceURL=' + load.address + (sourceMap ? '!transpiled' : '') : '')\n        // add sourceMappingURL if load.metadata.sourceMap is set\n        + (sourceMap && hasBtoa && '\\n//# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(sourceMap))) || '');\n  }\n\n  var curLoad;\n\n  // System.register, System.registerDynamic, AMD define pipeline\n  // if currently evalling code here, immediately reduce the registered entry against the load record\n  hook('pushRegister_', function() {\n    return function(register) {\n      if (!curLoad)\n        return false;\n\n      this.reduceRegister_(curLoad, register);\n      return true;\n    };\n  });\n\n  // System clobbering protection (mostly for Traceur)\n  var curSystem;\n  var callCounter = 0;\n  function preExec(loader, load) {\n    curLoad = load;\n    if (callCounter++ == 0)\n      curSystem = __global.System;\n    __global.System = __global.SystemJS = loader; \n  }\n  function postExec() {\n    if (--callCounter == 0)\n      __global.System = __global.SystemJS = curSystem;\n    curLoad = undefined;\n  }\n\n  __exec = function(load) {\n    if ((load.metadata.integrity || load.metadata.nonce) && supportsScriptExec)\n      return scriptExec.call(this, load);\n    try {\n      preExec(this, load);\n      curLoad = load;\n      (0, eval)(getSource(load));\n      postExec();\n    }\n    catch(e) {\n      postExec(); \n      throw addToError(e, 'Evaluating ' + load.address);\n    }\n  };\n\n  var supportsScriptExec = false;\n  if (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {\n    var scripts = document.getElementsByTagName('script');\n    $__curScript = scripts[scripts.length - 1];\n\n    if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\\.js/)))\n      supportsScriptExec = true;\n  }\n\n  // script execution via injecting a script tag into the page\n  // this allows CSP integrity and nonce to be set for CSP environments\n  var head;\n  function scriptExec(load) {\n    if (!head)\n      head = document.head || document.body || document.documentElement;\n\n    var script = document.createElement('script');\n    script.text = getSource(load, false);\n    var onerror = window.onerror;\n    var e;\n    window.onerror = function(_e) {\n      e = addToError(_e, 'Evaluating ' + load.address);\n    }\n    preExec(this, load);\n\n    if (load.metadata.integrity)\n      script.setAttribute('integrity', load.metadata.integrity);\n    if (load.metadata.nonce)\n      script.setAttribute('nonce', load.metadata.nonce);\n\n    head.appendChild(script);\n    head.removeChild(script);\n    postExec();\n    window.onerror = onerror;\n    if (e)\n      throw e;\n  }\n\n})();var absURLRegEx = /^[^\\/]+:\\/\\//;\n\nfunction readMemberExpression(p, value) {\n  var pParts = p.split('.');\n  while (pParts.length)\n    value = value[pParts.shift()];\n  return value;\n}\n\nvar baseURLCache = {};\nfunction getBaseURLObj() {\n  if (baseURLCache[this.baseURL])\n    return baseURLCache[this.baseURL];\n\n  // normalize baseURL if not already\n  if (this.baseURL[this.baseURL.length - 1] != '/')\n    this.baseURL += '/';\n\n  var baseURL = new URL(this.baseURL, baseURI);\n\n  this.baseURL = baseURL.href;\n\n  return (baseURLCache[this.baseURL] = baseURL);\n}\n\nfunction getMapMatch(map, name) {\n  var bestMatch, bestMatchLength = 0;\n\n  for (var p in map) {\n    if (name.substr(0, p.length) == p && (name.length == p.length || name[p.length] == '/')) {\n      var curMatchLength = p.split('/').length;\n      if (curMatchLength <= bestMatchLength)\n        continue;\n      bestMatch = p;\n      bestMatchLength = curMatchLength;\n    }\n  }\n\n  return bestMatch;\n}\n\nfunction setProduction(isProduction) {\n  this.set('@system-env', this.newModule({\n    browser: isBrowser,\n    node: !!this._nodeRequire,\n    production: isProduction\n  }));\n}\n\nvar baseURIObj = new URL(baseURI);\n\nhookConstructor(function(constructor) {\n  return function() {\n    constructor.call(this);\n\n    // support baseURL\n    this.baseURL = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n\n    // support map and paths\n    this.map = {};\n    this.paths = {};\n\n    // global behaviour flags\n    this.warnings = false;\n    this.defaultJSExtensions = false;\n    this.pluginFirst = false;\n\n    // by default load \".json\" files as json\n    // leading * meta doesn't need normalization\n    // NB add this in next breaking release\n    // this.meta['*.json'] = { format: 'json' };\n\n    // support the empty module, as a concept\n    this.set('@empty', this.newModule({}));\n\n    setProduction.call(this, false);\n  };\n});\n\n// include the node require since we're overriding it\nif (typeof require != 'undefined' && typeof process != 'undefined' && !process.browser)\n  SystemJSLoader.prototype._nodeRequire = require;\n\nvar nodeCoreModules = ['assert', 'buffer', 'child_process', 'cluster', 'console', 'constants', \n    'crypto', 'dgram', 'dns', 'domain', 'events', 'fs', 'http', 'https', 'module', 'net', 'os', 'path', \n    'process', 'punycode', 'querystring', 'readline', 'repl', 'stream', 'string_decoder', 'sys', 'timers', \n    'tls', 'tty', 'url', 'util', 'vm', 'zlib'];\n\n/*\n  Core SystemJS Normalization\n\n  If a name is relative, we apply URL normalization to the page\n  If a name is an absolute URL, we leave it as-is\n\n  Plain names (neither of the above) run through the map and paths\n  normalization phases.\n\n  The paths normalization phase applies last (paths extension), which\n  defines the `decanonicalize` function and normalizes everything into\n  a URL.\n */\n\nfunction applyMap(name) {\n  // first run map config\n  if (name[0] != '.' && name[0] != '/' && !name.match(absURLRegEx)) {\n    var mapMatch = getMapMatch(this.map, name);\n    if (mapMatch)\n      return this.map[mapMatch] + name.substr(mapMatch.length);\n  }\n  return name;\n}\n\nhook('normalize', function(normalize) {\n  return function(name, parentName, skipExt) {\n    name = applyMap.call(this, name);\n\n    // dynamically load node-core modules when requiring `@node/fs` for example\n    if (name.substr(0, 6) == '@node/' && nodeCoreModules.indexOf(name.substr(6)) != -1) {\n      if (!this._nodeRequire)\n        throw new TypeError('Error loading ' + name + '. Can only load node core modules in Node.');\n      this.set(name, this.newModule(getESModule(this._nodeRequire(name.substr(6)))));\n    }\n    \n    // relative URL-normalization\n    if (name[0] == '.' || name[0] == '/') {\n      if (parentName)\n        name = new URL(name, parentName.replace(/#/g, '%05')).href.replace(/%05/g, '#');\n      else\n        name = new URL(name, baseURIObj).href;\n    }\n\n    // if the module is in the registry already, use that\n    if (this.has(name))\n      return name;\n\n    if (name.match(absURLRegEx)) {\n      // defaultJSExtensions backwards compatibility\n      if (this.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js' && !skipExt)\n        name += '.js';\n      return name;\n    }\n\n    // applyPaths implementation provided from ModuleLoader system.js source\n    name = applyPaths(this.paths, name) || name;\n\n    // defaultJSExtensions backwards compatibility\n    if (this.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js' && !skipExt)\n      name += '.js';\n\n    // ./x, /x -> page-relative\n    if (name[0] == '.' || name[0] == '/')\n      return new URL(name, baseURIObj).href;\n    // x -> baseURL-relative\n    else\n      return new URL(name, getBaseURLObj.call(this)).href;\n  };\n});\n\n// percent encode just '#' in urls if using HTTP requests\nvar httpRequest = typeof XMLHttpRequest != 'undefined';\nhook('locate', function(locate) {\n  return function(load) {\n    return Promise.resolve(locate.call(this, load))\n    .then(function(address) {\n      if (httpRequest)\n        return address.replace(/#/g, '%23');\n      return address;\n    });\n  };\n});\n\n/*\n * Fetch with authorization\n */\nhook('fetch', function() {\n  return function(load) {\n    return new Promise(function(resolve, reject) {\n      fetchTextFromURL(load.address, load.metadata.authorization, resolve, reject);\n    });\n  };\n});\n\n/*\n  __useDefault\n  \n  When a module object looks like:\n  newModule(\n    __useDefault: true,\n    default: 'some-module'\n  })\n\n  Then importing that module provides the 'some-module'\n  result directly instead of the full module.\n\n  Useful for eg module.exports = function() {}\n*/\nhook('import', function(systemImport) {\n  return function(name, parentName, parentAddress) {\n    if (parentName && parentName.name)\n      warn.call(this, 'SystemJS.import(name, { name: parentName }) is deprecated for SystemJS.import(name, parentName), while importing ' + name + ' from ' + parentName.name);\n    return systemImport.call(this, name, parentName, parentAddress).then(function(module) {\n      return module.__useDefault ? module['default'] : module;\n    });\n  };\n});\n\n/*\n * Allow format: 'detect' meta to enable format detection\n */\nhook('translate', function(systemTranslate) {\n  return function(load) {\n    if (load.metadata.format == 'detect')\n      load.metadata.format = undefined;\n    return systemTranslate.call(this, load);\n  };\n});\n\n\n/*\n * JSON format support\n *\n * Supports loading JSON files as a module format itself\n *\n * Usage:\n *\n * SystemJS.config({\n *   meta: {\n *     '*.json': { format: 'json' }\n *   }\n * });\n *\n * Module is returned as if written:\n *\n * export default {JSON}\n *\n * No named exports are provided\n *\n * Files ending in \".json\" are treated as json automatically by SystemJS\n */\nhook('instantiate', function(instantiate) {\n  return function(load) {\n    if (load.metadata.format == 'json' && !this.builder) {\n      var entry = load.metadata.entry = createEntry();\n      entry.deps = [];\n      entry.execute = function() {\n        try {\n          return JSON.parse(load.source);\n        }\n        catch(e) {\n          throw new Error(\"Invalid JSON file \" + load.name);\n        }\n      };\n    }\n  };\n})\n\n/*\n Extend config merging one deep only\n\n  loader.config({\n    some: 'random',\n    config: 'here',\n    deep: {\n      config: { too: 'too' }\n    }\n  });\n\n  <=>\n\n  loader.some = 'random';\n  loader.config = 'here'\n  loader.deep = loader.deep || {};\n  loader.deep.config = { too: 'too' };\n\n\n  Normalizes meta and package configs allowing for:\n\n  SystemJS.config({\n    meta: {\n      './index.js': {}\n    }\n  });\n\n  To become\n\n  SystemJS.meta['https://thissite.com/index.js'] = {};\n\n  For easy normalization canonicalization with latest URL support.\n\n*/\nSystemJSLoader.prototype.env = 'development';\n\nSystemJSLoader.prototype.config = function(cfg) {\n  var loader = this;\n\n  if ('warnings' in cfg)\n    loader.warnings = cfg.warnings;\n\n  // transpiler deprecation path\n  if (cfg.transpilerRuntime === false)\n    loader._loader.loadedTranspilerRuntime = true;\n\n  // always configure baseURL first\n  if (cfg.baseURL) {\n    var hasConfig = false;\n    function checkHasConfig(obj) {\n      for (var p in obj)\n        if (hasOwnProperty.call(obj, p))\n          return true;\n    }\n    if (checkHasConfig(loader.packages) || checkHasConfig(loader.meta) || checkHasConfig(loader.depCache) || checkHasConfig(loader.bundles) || checkHasConfig(loader.packageConfigPaths))\n      throw new TypeError('Incorrect configuration order. The baseURL must be configured with the first SystemJS.config call.');\n\n    loader.baseURL = cfg.baseURL;\n\n    // sanitize baseURL\n    getBaseURLObj.call(loader);\n  }\n\n  if (cfg.defaultJSExtensions) {\n    loader.defaultJSExtensions = cfg.defaultJSExtensions;\n    warn.call(loader, 'The defaultJSExtensions configuration option is deprecated, use packages configuration instead.');\n  }\n\n  if (cfg.pluginFirst)\n    loader.pluginFirst = cfg.pluginFirst;\n\n  if (cfg.production)\n    setProduction.call(loader, true);\n\n  if (cfg.paths) {\n    for (var p in cfg.paths)\n      loader.paths[p] = cfg.paths[p];\n  }\n\n  if (cfg.map) {\n    var objMaps = '';\n    for (var p in cfg.map) {\n      var v = cfg.map[p];\n\n      // object map backwards-compat into packages configuration\n      if (typeof v !== 'string') {\n        objMaps += (objMaps.length ? ', ' : '') + '\"' + p + '\"';\n\n        var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';\n        var prop = loader.decanonicalize(p);\n        if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')\n          prop = prop.substr(0, prop.length - 3);\n\n        // if a package main, revert it\n        var pkgMatch = '';\n        for (var pkg in loader.packages) {\n          if (prop.substr(0, pkg.length) == pkg \n              && (!prop[pkg.length] || prop[pkg.length] == '/') \n              && pkgMatch.split('/').length < pkg.split('/').length)\n            pkgMatch = pkg;\n        }\n        if (pkgMatch && loader.packages[pkgMatch].main)\n          prop = prop.substr(0, prop.length - loader.packages[pkgMatch].main.length - 1);\n\n        var pkg = loader.packages[prop] = loader.packages[prop] || {};\n        pkg.map = v;\n      }\n      else {\n        loader.map[p] = v;\n      }\n    }\n    if (objMaps)\n      warn.call(loader, 'The map configuration for ' + objMaps + ' uses object submaps, which is deprecated in global map.\\nUpdate this to use package contextual map with configs like SystemJS.config({ packages: { \"' + p + '\": { map: {...} } } }).');\n  }\n\n  if (cfg.packageConfigPaths) {\n    var packageConfigPaths = [];\n    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {\n      var path = cfg.packageConfigPaths[i];\n      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));\n      var defaultJSExtension = loader.defaultJSExtensions && path.substr(packageLength - 3, 3) != '.js';\n      var normalized = loader.decanonicalize(path.substr(0, packageLength));\n      if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) == '.js')\n        normalized = normalized.substr(0, normalized.length - 3);\n      packageConfigPaths[i] = normalized + path.substr(packageLength);\n    }\n    loader.packageConfigPaths = packageConfigPaths;\n  }\n\n  if (cfg.bundles) {\n    for (var p in cfg.bundles) {\n      var bundle = [];\n      for (var i = 0; i < cfg.bundles[p].length; i++) {\n        var defaultJSExtension = loader.defaultJSExtensions && cfg.bundles[p][i].substr(cfg.bundles[p][i].length - 3, 3) != '.js';\n        var normalizedBundleDep = loader.decanonicalize(cfg.bundles[p][i]);\n        if (defaultJSExtension && normalizedBundleDep.substr(normalizedBundleDep.length - 3, 3) == '.js')\n          normalizedBundleDep = normalizedBundleDep.substr(0, normalizedBundleDep.length - 3);\n        bundle.push(normalizedBundleDep);\n      }\n      loader.bundles[p] = bundle;\n    }\n  }\n\n  if (cfg.packages) {\n    for (var p in cfg.packages) {\n      if (p.match(/^([^\\/]+:)?\\/\\/$/))\n        throw new TypeError('\"' + p + '\" is not a valid package name.');\n\n      var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';\n      var prop = loader.decanonicalize(applyMap(p));\n      if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')\n        prop = prop.substr(0, prop.length - 3);\n\n      // allow trailing slash in packages\n      if (prop[prop.length - 1] == '/')\n        prop = prop.substr(0, prop.length - 1);\n\n      loader.packages[prop] = loader.packages[prop] || {};\n\n      // meta backwards compatibility\n      if (cfg.packages[p].modules) {\n        warn.call(loader, 'Package ' + p + ' is configured with \"modules\", which is deprecated as it has been renamed to \"meta\".');\n        cfg.packages[p].meta = cfg.packages[p].modules;\n        delete cfg.packages[p].modules;\n      }\n\n      for (var q in cfg.packages[p])\n        if (indexOf.call(packageProperties, q) == -1)\n          warn.call(loader, '\"' + q + '\" is not a valid package configuration option in package ' + p);\n\n      extendMeta(loader.packages[prop], cfg.packages[p]);\n    }\n  }\n\n  for (var c in cfg) {\n    var v = cfg[c];\n\n    if (c == 'baseURL' || c == 'map' || c == 'packages' || c == 'bundles' || c == 'paths' || c == 'warnings' || c == 'packageConfigPaths')\n      continue;\n\n    if (typeof v != 'object' || v instanceof Array) {\n      loader[c] = v;\n    }\n    else {\n      loader[c] = loader[c] || {};\n\n      for (var p in v) {\n        // base-level wildcard meta does not normalize to retain catch-all quality\n        if (c == 'meta' && p[0] == '*') {\n          loader[c][p] = v[p];\n        }\n        else if (c == 'meta') {\n          // meta can go through global map\n          loader[c][loader.decanonicalize(applyMap(p))] = v[p];\n        }\n        else if (c == 'depCache') {\n          var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';\n          var prop = loader.decanonicalize(p);\n          if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')\n            prop = prop.substr(0, prop.length - 3);\n          loader[c][prop] = v[p];\n        }\n        else {\n          loader[c][p] = v[p];\n        }\n      }\n    }\n  }\n};/*\n * Package Configuration Extension\n *\n * Example:\n *\n * SystemJS.packages = {\n *   jquery: {\n *     basePath: 'lib', // optionally only use a subdirectory within the package\n *     main: 'index.js', // when not set, package name is requested directly\n *     format: 'amd',\n *     defaultExtension: 'ts', // defaults to 'js', can be set to false\n *     modules: {\n *       '*.ts': {\n *         loader: 'typescript'\n *       },\n *       'vendor/sizzle.js': {\n *         format: 'global'\n *       }\n *     },\n *     map: {\n *        // map internal require('sizzle') to local require('./vendor/sizzle')\n *        sizzle: './vendor/sizzle.js',\n *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'\n *        './vendor/another.js': './another/index.js',\n *        // test.js / test -> lib/test.js\n *        './test.js': './lib/test.js',\n *\n *        // environment-specific map configurations\n *        './index.js': {\n *          '~browser': './index-node.js'\n *        }\n *     },\n *     // allows for setting package-prefixed depCache\n *     // keys are normalized module names relative to the package itself\n *     depCache: {\n *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js\n *       './index.js': ['./test'],\n *       './test.js': ['external-dep'],\n *       'external-dep/path.js': ['./another.js']\n *     }\n *   }\n * };\n *\n * Then:\n *   import 'jquery'                       -> jquery/index.js\n *   import 'jquery/submodule'             -> jquery/submodule.js\n *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript\n *   import 'jquery/vendor/another'        -> another/index.js\n *\n * Detailed Behaviours\n * - main can have a leading \"./\" can be added optionally\n * - map and defaultExtension are applied to the main\n * - defaultExtension adds the extension only if the exact extension is not present\n * - defaultJSExtensions applies after map when defaultExtension is not set\n * - if a meta value is available for a module, map and defaultExtension are skipped\n * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)\n * - condition module map is '@env' module in package or '@system-env' globally\n * - map targets support conditional interpolation ('./x': './x.#{|env}.js')\n * - internal package map targets cannot use boolean conditionals\n *\n * In addition, the following modules properties will be allowed to be package\n * -relative as well in the package module config:\n *\n *   - loader\n *   - alias\n *\n *\n * Package Configuration Loading\n *\n * Not all packages may already have their configuration present in the System config\n * For these cases, a list of packageConfigPaths can be provided, which when matched against\n * a request, will first request a \".json\" file by the package name to derive the package\n * configuration from. This allows dynamic loading of non-predetermined code, a key use\n * case in SystemJS.\n *\n * Example:\n *\n *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];\n *\n *   // will first request 'packages/new-package/package.json' for the package config\n *   // before completing the package request to 'packages/new-package/path'\n *   SystemJS.import('packages/new-package/path');\n *\n *   // will first request 'packages/test/package.json' before the main\n *   SystemJS.import('packages/test');\n *\n * When a package matches packageConfigPaths, it will always send a config request for\n * the package configuration.\n * The package name itself is taken to be the match up to and including the last wildcard\n * or trailing slash.\n * The most specific package config path will be used.\n * Any existing package configurations for the package will deeply merge with the\n * package config, with the existing package configurations taking preference.\n * To opt-out of the package configuration request for a package that matches\n * packageConfigPaths, use the { configured: true } package config option.\n *\n */\n(function() {\n\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.packages = {};\n      this.packageConfigPaths = [];\n    };\n  });\n\n  function getPackage(loader, normalized) {\n    // use most specific package\n    var curPkg, curPkgLen = 0, pkgLen;\n    for (var p in loader.packages) {\n      if (normalized.substr(0, p.length) === p && (normalized.length === p.length || normalized[p.length] === '/')) {\n        pkgLen = p.split('/').length;\n        if (pkgLen > curPkgLen) {\n          curPkg = p;\n          curPkgLen = pkgLen;\n        }\n      }\n    }\n    return curPkg;\n  }\n\n  function getBasePath(pkg) {\n    // sanitize basePath\n    var basePath = pkg.basePath && pkg.basePath != '.' ? pkg.basePath : '';\n    if (basePath) {\n      if (basePath.substr(0, 2) == './')\n        basePath = basePath.substr(2);\n      if (basePath[basePath.length - 1] != '/')\n        basePath += '/';\n    }\n    return basePath;\n  }\n\n  function addDefaultExtension(loader, pkg, pkgName, basePath, subPath, skipExtensions) {\n    // don't apply extensions to folders or if defaultExtension = false\n    if (!subPath || subPath[subPath.length - 1] == '/' || skipExtensions || pkg.defaultExtension === false)\n      return subPath;\n\n    // NB are you sure about this?\n    // skip if we have interpolation conditional syntax in subPath?\n    if (subPath.match(interpolationRegEx))\n      return subPath;\n\n    var metaMatch = false;\n\n    // exact meta or meta with any content after the last wildcard skips extension\n    if (pkg.meta)\n      getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {\n        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)\n          return metaMatch = true;\n      });\n\n    // exact global meta or meta with any content after the last wildcard skips extension\n    if (!metaMatch && loader.meta)\n      getMetaMatches(loader.meta, pkgName + '/' + basePath + subPath, function(metaPattern, matchMeta, matchDepth) {\n        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)\n          return metaMatch = true;\n      });\n\n    if (metaMatch)\n      return subPath;\n\n    // work out what the defaultExtension is and add if not there already\n    // NB reconsider if default should really be \".js\"?\n    var defaultExtension = '.' + (pkg.defaultExtension || 'js');\n    if (subPath.substr(subPath.length - defaultExtension.length) != defaultExtension)\n      return subPath + defaultExtension;\n    else\n      return subPath;\n  }\n\n  function applyPackageConfigSync(loader, pkg, pkgName, subPath, skipExtensions) {\n    // main\n    if (!subPath) {\n      if (pkg.main)\n        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;\n      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')\n      else\n        // NB can add a default package main convention here when defaultJSExtensions is deprecated\n        // if it becomes internal to the package then it would no longer be an exit path\n        return pkgName + (loader.defaultJSExtensions ? '.js' : '');\n    }\n\n    var basePath = getBasePath(pkg);\n\n    // map config checking without then with extensions\n    if (pkg.map) {\n      var mapPath = './' + subPath;\n\n      var mapMatch = getMapMatch(pkg.map, mapPath);\n\n      // we then check map with the default extension adding\n      if (!mapMatch) {\n        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, basePath, subPath, skipExtensions);\n        if (mapPath != './' + subPath)\n          mapMatch = getMapMatch(pkg.map, mapPath);\n      }\n      if (mapMatch)\n        return doMapSync(loader, pkg, pkgName, basePath, mapMatch, mapPath, skipExtensions);\n    }\n\n    // normal package resolution\n    return pkgName + '/' + basePath + addDefaultExtension(loader, pkg, pkgName, basePath, subPath, skipExtensions);\n  }\n\n  function doMapSync(loader, pkg, pkgName, basePath, mapMatch, path, skipExtensions) {\n    var mapped = pkg.map[mapMatch];\n\n    // ignore conditionals in sync\n    if (typeof mapped != 'string')\n      mapped = mapMatch = path;\n\n    // package map to main / base-level\n    if (mapped == '.')\n      mapped = pkgName;\n\n    // internal package map\n    else if (mapped.substr(0, 2) == './')\n      return pkgName + '/' + basePath + addDefaultExtension(loader, pkg, pkgName, basePath, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions);\n    \n    // external map reference\n    return loader.normalizeSync(mapped + path.substr(mapMatch.length), pkgName + '/');\n  }\n\n  function applyPackageConfig(loader, pkg, pkgName, subPath, skipExtensions) {\n    // main\n    if (!subPath) {\n      if (pkg.main)\n        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;\n      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')\n      else\n        // NB can add a default package main convention here when defaultJSExtensions is deprecated\n        // if it becomes internal to the package then it would no longer be an exit path\n        return Promise.resolve(pkgName + (loader.defaultJSExtensions ? '.js' : ''));\n    }\n\n    var basePath = getBasePath(pkg);\n\n    // map config checking without then with extensions\n    var mapPath, mapMatch;\n\n    if (pkg.map) {\n      mapPath = './' + subPath;\n      mapMatch = getMapMatch(pkg.map, mapPath);\n\n      // we then check map with the default extension adding\n      if (!mapMatch) {\n        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, basePath, subPath, skipExtensions);\n        if (mapPath != './' + subPath)\n          mapMatch = getMapMatch(pkg.map, mapPath);\n      }\n    }\n\n    return (mapMatch ? doMap(loader, pkg, pkgName, basePath, mapMatch, mapPath, skipExtensions) : Promise.resolve())\n    .then(function(mapped) {\n      if (mapped)\n        return Promise.resolve(mapped);\n\n      // normal package resolution / fallback resolution for no conditional match\n      return Promise.resolve(pkgName + '/' + basePath + addDefaultExtension(loader, pkg, pkgName, basePath, subPath, skipExtensions));\n    });\n  }\n\n  function doStringMap(loader, pkg, pkgName, basePath, mapMatch, mapped, path, skipExtensions) {\n    // NB the interpolation cases should strictly skip subsequent interpolation\n\n    // package map to main / base-level\n    if (mapped == '.')\n      mapped = pkgName;\n    \n    // internal package map\n    else if (mapped.substr(0, 2) == './')\n      return Promise.resolve(pkgName + '/' + basePath + addDefaultExtension(loader, pkg, pkgName, basePath, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions))\n      .then(function(name) {\n        return interpolateConditional.call(loader, name, pkgName + '/');\n      });\n    \n    // external map reference\n    // NB deprecate the use of the second argument here -> should be fully global reference\n    return loader.normalize(mapped + path.substr(mapMatch.length), pkgName + '/');\n  }\n\n  function doMap(loader, pkg, pkgName, basePath, mapMatch, path, skipExtensions) {\n    var mapped = pkg.map[mapMatch];\n\n    if (typeof mapped == 'string')\n      return doStringMap(loader, pkg, pkgName, basePath, mapMatch, mapped, path, skipExtensions);\n\n    // we use a special conditional syntax to allow the builder to handle conditional branch points further\n    if (loader.builder)\n      return Promise.resolve(pkgName + '/#:' + path);\n\n    // map object -> conditional map\n    return loader['import'](pkg.map['@env'] || '@system-env', pkgName)\n    .then(function(env) {\n      // first map condition to match is used\n      for (var e in mapped) {\n        var negate = e[0] == '~';\n\n        var value = readMemberExpression(negate ? e.substr(1) : e, env);\n\n        if (!negate && value || negate && !value)\n          return mapped[e];\n      }\n    })\n    .then(function(mapped) {\n      if (mapped)\n        return doStringMap(loader, pkg, pkgName, basePath, mapMatch, mapped, path, skipExtensions);\n\n      // no environment match -> fallback to original subPath by returning undefined\n    });\n  }\n\n  // normalizeSync = decanonicalize + package resolution\n  SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalize;\n\n  // decanonicalize must JUST handle package defaultExtension: false case when defaultJSExtensions is set\n  // to be deprecated!\n  hook('decanonicalize', function(decanonicalize) {\n    return function(name, parentName) {\n      if (this.builder)\n        return decanonicalize.call(this, name, parentName, true);\n\n      var decanonicalized = decanonicalize.call(this, name, parentName);\n\n      if (!this.defaultJSExtensions)\n        return decanonicalized;\n    \n      var pkgName = getPackage(this, decanonicalized);\n\n      var pkg = this.packages[pkgName];\n      var defaultExtension = pkg && pkg.defaultExtension;\n\n      if (defaultExtension == undefined && pkg && pkg.meta)\n        getMetaMatches(pkg.meta, decanonicalized.substr(pkgName), function(metaPattern, matchMeta, matchDepth) {\n          if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1) {\n            defaultExtension = false;\n            return true;\n          }\n        });\n      \n      if ((defaultExtension === false || defaultExtension && defaultExtension != '.js') && name.substr(name.length - 3, 3) != '.js' && decanonicalized.substr(decanonicalized.length - 3, 3) == '.js')\n        decanonicalized = decanonicalized.substr(0, decanonicalized.length - 3);\n\n      return decanonicalized;\n    };\n  });\n\n  hook('normalizeSync', function(normalizeSync) {\n    return function(name, parentName, isPlugin) {\n      warn.call(this, 'SystemJS.normalizeSync has been deprecated for SystemJS.decanonicalize.');\n\n      var loader = this;\n      isPlugin = isPlugin === true;\n\n      // apply contextual package map first\n      // (we assume the parent package config has already been loaded)\n      if (parentName)\n        var parentPackageName = getPackage(loader, parentName) ||\n            loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&\n            getPackage(loader, parentName.substr(0, parentName.length - 3));\n\n      var parentPackage = parentPackageName && loader.packages[parentPackageName];\n\n      // remove any parent basePath from parentName\n      if (parentPackage) {\n        var parentBasePath = getBasePath(parentPackage);\n        if (parentBasePath && parentName.substr(parentPackageName.length + 1, parentBasePath.length) == parentBasePath)\n          parentName = parentPackageName + parentName.substr(parentPackageName.length + parentBasePath.length);\n      }\n\n      // ignore . since internal maps handled by standard package resolution\n      if (parentPackage && name[0] != '.') {\n        var parentMap = parentPackage.map;\n        var parentMapMatch = parentMap && getMapMatch(parentMap, name);\n\n        if (parentMapMatch && typeof parentMap[parentMapMatch] == 'string')\n          return doMapSync(loader, parentPackage, parentPackageName, getBasePath(parentPackage), parentMapMatch, name, isPlugin);\n      }\n\n      var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n\n      // apply map, core, paths, contextual package map\n      var normalized = normalizeSync.call(loader, name, parentName);\n\n      // undo defaultJSExtension\n      if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')\n        defaultJSExtension = false;\n      if (defaultJSExtension)\n        normalized = normalized.substr(0, normalized.length - 3);\n\n      var pkgConfigMatch = getPackageConfigMatch(loader, normalized);\n      var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);\n\n      if (!pkgName)\n        return normalized + (defaultJSExtension ? '.js' : '');\n\n      var subPath = normalized.substr(pkgName.length + 1);\n\n      return applyPackageConfigSync(loader, loader.packages[pkgName] || {}, pkgName, subPath, isPlugin);\n    };\n  });\n\n  hook('normalize', function(normalize) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n      isPlugin = isPlugin === true;\n\n      return Promise.resolve()\n      .then(function() {\n        // apply contextual package map first\n        // (we assume the parent package config has already been loaded)\n        if (parentName)\n          var parentPackageName = getPackage(loader, parentName) ||\n              loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&\n              getPackage(loader, parentName.substr(0, parentName.length - 3));\n\n        var parentPackage = parentPackageName && loader.packages[parentPackageName];\n\n        // remove any parent basePath from parentName\n        if (parentPackage) {\n          var parentBasePath = getBasePath(parentPackage);\n          if (parentBasePath && parentName.substr(parentPackageName.length + 1, parentBasePath.length) == parentBasePath)\n            parentName = parentPackageName + parentName.substr(parentPackageName.length + parentBasePath.length);\n        }\n\n        // ignore . since internal maps handled by standard package resolution\n        if (parentPackage && name.substr(0, 2) != './') {\n          var parentMap = parentPackage.map;\n          var parentMapMatch = parentMap && getMapMatch(parentMap, name);\n\n          if (parentMapMatch)\n            return doMap(loader, parentPackage, parentPackageName, parentBasePath, parentMapMatch, name, isPlugin);\n        }\n\n        return Promise.resolve();\n      })\n      .then(function(mapped) {\n        if (mapped)\n          return mapped;\n\n        var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n\n        // apply map, core, paths, contextual package map\n        var normalized = normalize.call(loader, name, parentName);\n\n        // undo defaultJSExtension\n        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')\n          defaultJSExtension = false;\n        if (defaultJSExtension)\n          normalized = normalized.substr(0, normalized.length - 3);\n\n        var pkgConfigMatch = getPackageConfigMatch(loader, normalized);\n        var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);\n\n        if (!pkgName)\n          return Promise.resolve(normalized + (defaultJSExtension ? '.js' : ''));\n\n        var pkg = loader.packages[pkgName];\n\n        // if package is already configured or not a dynamic config package, use existing package config\n        var isConfigured = pkg && (pkg.configured || !pkgConfigMatch);\n        return (isConfigured ? Promise.resolve(pkg) : loadPackageConfigPath(loader, pkgName, pkgConfigMatch.configPath))\n        .then(function(pkg) {\n          var subPath = normalized.substr(pkgName.length + 1);\n\n          return applyPackageConfig(loader, pkg, pkgName, subPath, isPlugin);\n        });\n      });\n    };\n  });\n\n  // check if the given normalized name matches a packageConfigPath\n  // if so, loads the config\n  var packageConfigPaths = {};\n\n  // data object for quick checks against package paths\n  function createPkgConfigPathObj(path) {\n    var lastWildcard = path.lastIndexOf('*');\n    var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));\n    return {\n      length: length,\n      // NB handle regex control character escapes or simply create a test function here\n      regEx: new RegExp('^(' + path.substr(0, length).replace(/\\*/g, '[^\\\\/]+') + ')(\\\\/|$)'),\n      wildcard: lastWildcard != -1\n    };\n  }\n\n  // most specific match wins\n  function getPackageConfigMatch(loader, normalized) {\n    var pkgName, exactMatch = false, configPath;\n    for (var i = 0; i < loader.packageConfigPaths.length; i++) {\n      var packageConfigPath = loader.packageConfigPaths[i];\n      var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));\n      if (normalized.length < p.length)\n        continue;\n      var match = normalized.match(p.regEx);\n      if (match && (!pkgName || (!(exactMatch && p.wildcard) && pkgName.length < match[1].length))) {\n        pkgName = match[1];\n        exactMatch = !p.wildcard;\n        configPath = pkgName + packageConfigPath.substr(p.length);\n      }\n    }\n\n    if (!pkgName)\n      return;\n\n    return {\n      packageName: pkgName,\n      configPath: configPath\n    };\n  }\n\n  function loadPackageConfigPath(loader, pkgName, pkgConfigPath) {\n    var configLoader = loader.pluginLoader || loader;\n\n    // NB remove this when json is default\n    (configLoader.meta[pkgConfigPath] = configLoader.meta[pkgConfigPath] || {}).format = 'json';\n\n    return configLoader.load(pkgConfigPath)\n    .then(function() {\n      pkgConfig = configLoader.get(pkgConfigPath);\n\n      var cfg = pkgConfig['default'];\n\n      // support \"systemjs\" prefixing\n      if (cfg.systemjs)\n        cfg = cfg.systemjs;\n\n      // modules backwards compatibility\n      if (cfg.modules) {\n        cfg.meta = cfg.modules;\n        warn.call(loader, 'Package config file ' + pkgConfigPath + ' is configured with \"modules\", which is deprecated as it has been renamed to \"meta\".');\n      }\n\n      // remove any non-system properties if generic config file (eg package.json)\n      for (var p in cfg) {\n        if (indexOf.call(packageProperties, p) == -1)\n          delete cfg[p];\n      }\n\n      // deeply-merge (to first level) config with any existing package config\n      var pkg = loader.packages[pkgName] = loader.packages[pkgName] || {};\n      extendMeta(pkg, cfg, true);\n\n      // support external depCache\n      var basePath = getBasePath(pkg);\n      if (cfg.depCache) {\n        for (var d in cfg.depCache) {\n          var dNormalized;\n\n          if (d.substr(0, 2) == './')\n            dNormalized = pkgName + '/' + basePath + d.substr(2);\n          else\n            dNormalized = coreResolve.call(loader, d);\n          loader.depCache[dNormalized] = (loader.depCache[dNormalized] || []).concat(cfg.depCache[d]);\n        }\n        delete cfg.depCache;\n      }\n\n      return pkg;\n    });\n  }\n\n  function getMetaMatches(pkgMeta, subPath, matchFn) {\n    // wildcard meta\n    var meta = {};\n    var wildcardIndex;\n    for (var module in pkgMeta) {\n      // allow meta to start with ./ for flexibility\n      var dotRel = module.substr(0, 2) == './' ? './' : '';\n      if (dotRel)\n        module = module.substr(2);\n\n      wildcardIndex = module.indexOf('*');\n      if (wildcardIndex === -1)\n        continue;\n\n      if (module.substr(0, wildcardIndex) == subPath.substr(0, wildcardIndex)\n          && module.substr(wildcardIndex + 1) == subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {\n        // alow match function to return true for an exit path\n        if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))\n          return;\n      }\n    }\n    // exact meta\n    var exactMeta = pkgMeta[subPath] || pkgMeta['./' + subPath];\n    if (exactMeta)\n      matchFn(exactMeta, exactMeta, 0);\n  }\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      return Promise.resolve(locate.call(this, load))\n      .then(function(address) {\n        var pkgName = getPackage(loader, load.name);\n        if (pkgName) {\n          var pkg = loader.packages[pkgName];\n          var basePath = getBasePath(pkg);\n          var subPath = load.name.substr(pkgName.length + basePath.length + 1);\n\n          // format\n          if (pkg.format)\n            load.metadata.format = load.metadata.format || pkg.format;\n\n          var meta = {};\n          if (pkg.meta) {\n            var bestDepth = 0;\n\n            // NB support a main shorthand in meta here?\n            getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {\n              if (matchDepth > bestDepth)\n                bestDepth = matchDepth;\n              extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);\n            });\n\n            // allow alias and loader to be package-relative\n            if (meta.alias && meta.alias.substr(0, 2) == './')\n              meta.alias = pkgName + meta.alias.substr(1);\n            if (meta.loader && meta.loader.substr(0, 2) == './')\n              meta.loader = pkgName + meta.loader.substr(1);\n            extendMeta(load.metadata, meta);\n          }\n        }\n\n        return address;\n      });\n    };\n  });\n\n})();\n/*\n * Script tag fetch\n *\n * When load.metadata.scriptLoad is true, we load via script tag injection.\n */\n(function() {\n\n  if (typeof document != 'undefined')\n    var head = document.getElementsByTagName('head')[0];\n\n  var curSystem;\n\n  // if doing worker executing, this is set to the load record being executed\n  var workerLoad = null;\n  \n  // interactive mode handling method courtesy RequireJS\n  var ieEvents = head && (function() {\n    var s = document.createElement('script');\n    var isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';\n    return s.attachEvent && !(s.attachEvent.toString && s.attachEvent.toString().indexOf('[native code') < 0) && !isOpera;\n  })();\n\n  // IE interactive-only part\n  // we store loading scripts array as { script: <script>, load: {...} }\n  var interactiveLoadingScripts = [];\n  var interactiveScript;\n  function getInteractiveScriptLoad() {\n    if (interactiveScript && interactiveScript.script.readyState === 'interactive')\n      return interactiveScript.load;\n\n    for (var i = 0; i < interactiveLoadingScripts.length; i++)\n      if (interactiveLoadingScripts[i].script.readyState == 'interactive') {\n        interactiveScript = interactiveLoadingScripts[i];\n        return interactiveScript.load;\n      }\n  }\n  \n  // System.register, System.registerDynamic, AMD define pipeline\n  // this is called by the above methods when they execute\n  // we then run the reduceRegister_ collection function either immediately\n  // if we are in IE and know the currently executing script (interactive)\n  // or later if we need to wait for the synchronous load callback to know the script\n  var loadingCnt = 0;\n  var registerQueue = [];\n  hook('pushRegister_', function(pushRegister) {\n    return function(register) {\n      // if using eval-execution then skip\n      if (pushRegister.call(this, register))\n        return false;\n\n      // if using worker execution, then we're done\n      if (workerLoad)\n        this.reduceRegister_(workerLoad, register);\n\n      // detect if we know the currently executing load (IE)\n      // if so, immediately call reduceRegister\n      else if (ieEvents)\n        this.reduceRegister_(getInteractiveScriptLoad(), register);\n\n      // otherwise, add to our execution queue\n      // to call reduceRegister on sync script load event\n      else if (loadingCnt)\n        registerQueue.push(register);\n\n      // if we're not currently loading anything though\n      // then do the reduction against a null load\n      // (out of band named define or named register)\n      // note even in non-script environments, this catch is used\n      else\n        this.reduceRegister_(null, register);\n\n      return true;\n    };\n  });\n\n  function webWorkerImport(loader, load) {\n    return new Promise(function(resolve, reject) {\n      if (load.metadata.integrity)\n        reject(new Error('Subresource integrity checking is not supported in web workers.'));\n\n      workerLoad = load;\n      try {\n        importScripts(load.address);\n      }\n      catch(e) {\n        workerLoad = null;\n        reject(e);\n      }\n      workerLoad = null;\n\n      // if nothing registered, then something went wrong\n      if (!load.metadata.entry)\n        reject(new Error(load.address + ' did not call System.register or AMD define'));\n\n      resolve('');\n    });\n  }\n\n  // override fetch to use script injection\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var loader = this;\n\n      if (load.metadata.format == 'json' || !load.metadata.scriptLoad || (!isBrowser && !isWorker))\n        return fetch.call(this, load);\n\n      if (isWorker)\n        return webWorkerImport(loader, load);\n\n      return new Promise(function(resolve, reject) {\n        var s = document.createElement('script');\n        \n        s.async = true;\n        \n        if (load.metadata.integrity)\n          s.setAttribute('integrity', load.metadata.integrity);\n\n        if (ieEvents) {\n          s.attachEvent('onreadystatechange', complete);\n          interactiveLoadingScripts.push({\n            script: s,\n            load: load\n          });\n        }\n        else {\n          s.addEventListener('load', complete, false);\n          s.addEventListener('error', error, false);\n        }\n\n        loadingCnt++;\n\n        curSystem = __global.System;\n\n        s.src = load.address;\n        head.appendChild(s);\n\n        function complete(evt) {\n          if (s.readyState && s.readyState != 'loaded' && s.readyState != 'complete')\n            return;\n\n          loadingCnt--;\n\n          // complete call is sync on execution finish\n          // (in ie already done reductions)\n          if (!load.metadata.entry && !registerQueue.length) {\n            loader.reduceRegister_(load);\n          }\n          else if (!ieEvents) {\n            for (var i = 0; i < registerQueue.length; i++)\n              loader.reduceRegister_(load, registerQueue[i]);\n            registerQueue = [];\n          }\n\n          cleanup();\n\n          // if nothing registered, then something went wrong\n          if (!load.metadata.entry && !load.metadata.bundle)\n            reject(new Error(load.name + ' did not call System.register or AMD define. If loading a global module configure the global name via the meta exports property for script injection support.'));\n\n          resolve('');\n        }\n\n        function error(evt) {\n          cleanup();\n          reject(new Error('Unable to load script ' + load.address));\n        }\n\n        function cleanup() {\n          __global.System = curSystem;\n\n          if (s.detachEvent) {\n            s.detachEvent('onreadystatechange', complete);\n            for (var i = 0; i < interactiveLoadingScripts.length; i++)\n              if (interactiveLoadingScripts[i].script == s) {\n                if (interactiveScript && interactiveScript.script == s)\n                  interactiveScript = null;\n                interactiveLoadingScripts.splice(i, 1);\n              }\n          }\n          else {\n            s.removeEventListener('load', complete, false);\n            s.removeEventListener('error', error, false);\n          }\n\n          head.removeChild(s);\n        }\n      });\n    };\n  });\n})();\n/*\n * Instantiate registry extension\n *\n * Supports Traceur System.register 'instantiate' output for loading ES6 as ES5.\n *\n * - Creates the loader.register function\n * - Also supports metadata.format = 'register' in instantiate for anonymous register modules\n * - Also supports metadata.deps, metadata.execute and metadata.executingRequire\n *     for handling dynamic modules alongside register-transformed ES6 modules\n *\n *\n * The code here replicates the ES6 linking groups algorithm to ensure that\n * circular ES6 compiled into System.register can work alongside circular AMD \n * and CommonJS, identically to the actual ES6 loader.\n *\n */\n\n\n/*\n * Registry side table entries in loader.defined\n * Registry Entry Contains:\n *    - name\n *    - deps \n *    - declare for declarative modules\n *    - execute for dynamic modules, different to declarative execute on module\n *    - executingRequire indicates require drives execution for circularity of dynamic modules\n *    - declarative optional boolean indicating which of the above\n *\n * Can preload modules directly on SystemJS.defined['my/module'] = { deps, execute, executingRequire }\n *\n * Then the entry gets populated with derived information during processing:\n *    - normalizedDeps derived from deps, created in instantiate\n *    - groupIndex used by group linking algorithm\n *    - evaluated indicating whether evaluation has happend\n *    - module the module record object, containing:\n *      - exports actual module exports\n *\n *    For dynamic we track the es module with:\n *    - esModule actual es module value\n *    - esmExports whether to extend the esModule with named exports\n *      \n *    Then for declarative only we track dynamic bindings with the 'module' records:\n *      - name\n *      - exports\n *      - setters declarative setter functions\n *      - dependencies, module records of dependencies\n *      - importers, module records of dependents\n *\n * After linked and evaluated, entries are removed, declarative module records remain in separate\n * module binding table\n *\n */\n\nvar leadingCommentAndMetaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)*\\s*/;\nfunction detectRegisterFormat(source) {\n  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);\n  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) == 'System.register';\n}\n\nfunction createEntry() {\n  return {\n    name: null,\n    deps: null,\n    originalIndices: null,\n    declare: null,\n    execute: null,\n    executingRequire: false,\n    declarative: false,\n    normalizedDeps: null,\n    groupIndex: null,\n    evaluated: false,\n    module: null,\n    esModule: null,\n    esmExports: false\n  };\n}\n\n(function() {\n\n  /*\n   * There are two variations of System.register:\n   * 1. System.register for ES6 conversion (2-3 params) - System.register([name, ]deps, declare)\n   *    see https://github.com/ModuleLoader/es6-module-loader/wiki/System.register-Explained\n   *\n   * 2. System.registerDynamic for dynamic modules (3-4 params) - System.registerDynamic([name, ]deps, executingRequire, execute)\n   * the true or false statement \n   *\n   * this extension implements the linking algorithm for the two variations identical to the spec\n   * allowing compiled ES6 circular references to work alongside AMD and CJS circular references.\n   *\n   */\n  SystemJSLoader.prototype.register = function(name, deps, declare) {\n    if (typeof name != 'string') {\n      declare = deps;\n      deps = name;\n      name = null;\n    }\n\n    // dynamic backwards-compatibility\n    // can be deprecated eventually\n    if (typeof declare == 'boolean')\n      return this.registerDynamic.apply(this, arguments);\n\n    var entry = createEntry();\n    // ideally wouldn't apply map config to bundle names but \n    // dependencies go through map regardless so we can't restrict\n    // could reconsider in shift to new spec\n    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);\n    entry.declarative = true;\n    entry.deps = deps;\n    entry.declare = declare;\n\n    this.pushRegister_({\n      amd: false,\n      entry: entry\n    });\n  };\n  SystemJSLoader.prototype.registerDynamic = function(name, deps, declare, execute) {\n    if (typeof name != 'string') {\n      execute = declare;\n      declare = deps;\n      deps = name;\n      name = null;\n    }\n\n    // dynamic\n    var entry = createEntry();\n    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);\n    entry.deps = deps;\n    entry.execute = execute;\n    entry.executingRequire = declare;\n\n    this.pushRegister_({\n      amd: false,\n      entry: entry\n    });\n  };\n  hook('reduceRegister_', function() {\n    return function(load, register) {\n      if (!register)\n        return;\n\n      var entry = register.entry;\n      var curMeta = load && load.metadata;\n\n      // named register\n      if (entry.name) {\n        if (!(entry.name in this.defined))\n          this.defined[entry.name] = entry;\n\n        if (curMeta)\n          curMeta.bundle = true;\n      }\n      // anonymous register\n      if (!entry.name || load && entry.name == load.name) {\n        if (!curMeta)\n          throw new TypeError('Unexpected anonymous System.register call.');\n        if (curMeta.entry) {\n          if (curMeta.format == 'register')\n            throw new Error('Multiple anonymous System.register calls in module ' + load.name + '. If loading a bundle, ensure all the System.register calls are named.');\n          else\n            throw new Error('Module ' + load.name + ' interpreted as ' + curMeta.format + ' module format, but called System.register.');\n        }\n        if (!curMeta.format)\n          curMeta.format = 'register';\n        curMeta.entry = entry;\n      }\n    };\n  });\n\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n\n      this.defined = {};\n      this._loader.moduleRecords = {};\n    };\n  });\n\n  function buildGroups(entry, loader, groups) {\n    groups[entry.groupIndex] = groups[entry.groupIndex] || [];\n\n    if (indexOf.call(groups[entry.groupIndex], entry) != -1)\n      return;\n\n    groups[entry.groupIndex].push(entry);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = loader.defined[depName];\n      \n      // not in the registry means already linked / ES6\n      if (!depEntry || depEntry.evaluated)\n        continue;\n      \n      // now we know the entry is in our unlinked linkage group\n      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);\n\n      // the group index of an entry is always the maximum\n      if (depEntry.groupIndex === null || depEntry.groupIndex < depGroupIndex) {\n        \n        // if already in a group, remove from the old group\n        if (depEntry.groupIndex !== null) {\n          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);\n\n          // if the old group is empty, then we have a mixed depndency cycle\n          if (groups[depEntry.groupIndex].length == 0)\n            throw new Error(\"Mixed dependency cycle detected\");\n        }\n\n        depEntry.groupIndex = depGroupIndex;\n      }\n\n      buildGroups(depEntry, loader, groups);\n    }\n  }\n\n  function link(name, loader) {\n    var startEntry = loader.defined[name];\n\n    // skip if already linked\n    if (startEntry.module)\n      return;\n\n    startEntry.groupIndex = 0;\n\n    var groups = [];\n\n    buildGroups(startEntry, loader, groups);\n\n    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;\n    for (var i = groups.length - 1; i >= 0; i--) {\n      var group = groups[i];\n      for (var j = 0; j < group.length; j++) {\n        var entry = group[j];\n\n        // link each group\n        if (curGroupDeclarative)\n          linkDeclarativeModule(entry, loader);\n        else\n          linkDynamicModule(entry, loader);\n      }\n      curGroupDeclarative = !curGroupDeclarative; \n    }\n  }\n\n  // module binding records\n  function Module() {}\n  defineProperty(Module, 'toString', {\n    value: function() {\n      return 'Module';\n    }\n  });\n\n  function getOrCreateModuleRecord(name, moduleRecords) {\n    return moduleRecords[name] || (moduleRecords[name] = {\n      name: name,\n      dependencies: [],\n      exports: new Module(), // start from an empty module and extend\n      importers: []\n    });\n  }\n\n  function linkDeclarativeModule(entry, loader) {\n    // only link if already not already started linking (stops at circular)\n    if (entry.module)\n      return;\n\n    var moduleRecords = loader._loader.moduleRecords;\n    var module = entry.module = getOrCreateModuleRecord(entry.name, moduleRecords);\n    var exports = entry.module.exports;\n\n    var declaration = entry.declare.call(__global, function(name, value) {\n      module.locked = true;\n\n      if (typeof name == 'object') {\n        for (var p in name)\n          exports[p] = name[p];\n      }\n      else {\n        exports[name] = value;\n      }\n\n      for (var i = 0, l = module.importers.length; i < l; i++) {\n        var importerModule = module.importers[i];\n        if (!importerModule.locked) {\n          var importerIndex = indexOf.call(importerModule.dependencies, module);\n          importerModule.setters[importerIndex](exports);\n        }\n      }\n\n      module.locked = false;\n      return value;\n    }, { id: entry.name });\n    \n    module.setters = declaration.setters;\n    module.execute = declaration.execute;\n\n    if (!module.setters || !module.execute) {\n      throw new TypeError('Invalid System.register form for ' + entry.name);\n    }\n\n    // now link all the module dependencies\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = loader.defined[depName];\n      var depModule = moduleRecords[depName];\n\n      // work out how to set depExports based on scenarios...\n      var depExports;\n\n      if (depModule) {\n        depExports = depModule.exports;\n      }\n      // dynamic, already linked in our registry\n      else if (depEntry && !depEntry.declarative) {\n        depExports = depEntry.esModule;\n      }\n      // in the loader registry\n      else if (!depEntry) {\n        depExports = loader.get(depName);\n      }\n      // we have an entry -> link\n      else {\n        linkDeclarativeModule(depEntry, loader);\n        depModule = depEntry.module;\n        depExports = depModule.exports;\n      }\n\n      // only declarative modules have dynamic bindings\n      if (depModule && depModule.importers) {\n        depModule.importers.push(module);\n        module.dependencies.push(depModule);\n      }\n      else {\n        module.dependencies.push(null);\n      }\n      \n      // run setters for all entries with the matching dependency name\n      var originalIndices = entry.originalIndices[i];\n      for (var j = 0, len = originalIndices.length; j < len; ++j) {\n        var index = originalIndices[j];\n        if (module.setters[index]) {\n          module.setters[index](depExports);\n        }\n      }\n    }\n  }\n\n  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)\n  function getModule(name, loader) {\n    var exports;\n    var entry = loader.defined[name];\n\n    if (!entry) {\n      exports = loader.get(name);\n      if (!exports)\n        throw new Error('Unable to load dependency ' + name + '.');\n    }\n\n    else {\n      if (entry.declarative)\n        ensureEvaluated(name, [], loader);\n    \n      else if (!entry.evaluated)\n        linkDynamicModule(entry, loader);\n\n      exports = entry.module.exports;\n    }\n\n    if ((!entry || entry.declarative) && exports && exports.__useDefault)\n      return exports['default'];\n    \n    return exports;\n  }\n\n  function linkDynamicModule(entry, loader) {\n    if (entry.module)\n      return;\n\n    var exports = {};\n\n    var module = entry.module = { exports: exports, id: entry.name };\n\n    // AMD requires execute the tree first\n    if (!entry.executingRequire) {\n      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n        var depName = entry.normalizedDeps[i];\n        // we know we only need to link dynamic due to linking algorithm\n        var depEntry = loader.defined[depName];\n        if (depEntry)\n          linkDynamicModule(depEntry, loader);\n      }\n    }\n\n    // now execute\n    entry.evaluated = true;\n    var output = entry.execute.call(__global, function(name) {\n      for (var i = 0, l = entry.deps.length; i < l; i++) {\n        if (entry.deps[i] != name)\n          continue;\n        return getModule(entry.normalizedDeps[i], loader);\n      }\n      throw new Error('Module ' + name + ' not declared as a dependency.');\n    }, exports, module);\n    \n    if (output)\n      module.exports = output;\n\n    // create the esModule object, which allows ES6 named imports of dynamics\n    exports = module.exports;\n\n    // __esModule flag treats as already-named\n    if (exports && exports.__esModule)\n      entry.esModule = exports;\n    // set module as 'default' export, then fake named exports by iterating properties\n    else if (entry.esmExports && exports !== __global)\n      entry.esModule = getESModule(exports);\n    // just use the 'default' export\n    else\n      entry.esModule = { 'default': exports };\n  }\n\n  /*\n   * Given a module, and the list of modules for this current branch,\n   *  ensure that each of the dependencies of this module is evaluated\n   *  (unless one is a circular dependency already in the list of seen\n   *  modules, in which case we execute it)\n   *\n   * Then we evaluate the module itself depth-first left to right \n   * execution to match ES6 modules\n   */\n  function ensureEvaluated(moduleName, seen, loader) {\n    var entry = loader.defined[moduleName];\n\n    // if already seen, that means it's an already-evaluated non circular dependency\n    if (!entry || entry.evaluated || !entry.declarative)\n      return;\n\n    // this only applies to declarative modules which late-execute\n\n    seen.push(moduleName);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      if (indexOf.call(seen, depName) == -1) {\n        if (!loader.defined[depName])\n          loader.get(depName);\n        else\n          ensureEvaluated(depName, seen, loader);\n      }\n    }\n\n    if (entry.evaluated)\n      return;\n\n    entry.evaluated = true;\n    entry.module.execute.call(__global);\n  }\n\n  // override the delete method to also clear the register caches\n  hook('delete', function(del) {\n    return function(name) {\n      delete this._loader.moduleRecords[name];\n      delete this.defined[name];\n      return del.call(this, name);\n    };\n  });\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      if (this.defined[load.name]) {\n        load.metadata.format = 'defined';\n        return '';\n      }\n\n      load.metadata.deps = load.metadata.deps || [];\n      \n      return fetch.call(this, load);\n    };\n  });\n\n  hook('translate', function(translate) {\n    // we run the meta detection here (register is after meta)\n    return function(load) {\n      load.metadata.deps = load.metadata.deps || [];\n      return Promise.resolve(translate.call(this, load)).then(function(source) {\n        // run detection for register format\n        if (load.metadata.format == 'register' || !load.metadata.format && detectRegisterFormat(load.source))\n          load.metadata.format = 'register';\n        return source;\n      });\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      if (load.metadata.format == 'detect')\n        load.metadata.format = undefined;\n\n      // assumes previous instantiate is sync\n      // (core json support)\n      instantiate.call(this, load);\n\n      var loader = this;\n\n      var entry;\n\n      // first we check if this module has already been defined in the registry\n      if (loader.defined[load.name]) {\n        entry = loader.defined[load.name];\n        // don't support deps for ES modules\n        if (!entry.declarative)\n          entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // picked up already by an anonymous System.register script injection\n      // or via the dynamic formats\n      else if (load.metadata.entry) {\n        entry = load.metadata.entry;\n        entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // Contains System.register calls\n      // (dont run bundles in the builder)\n      else if (!(loader.builder && load.metadata.bundle) \n          && (load.metadata.format == 'register' || load.metadata.format == 'esm' || load.metadata.format == 'es6')) {\n        \n        if (typeof __exec != 'undefined')\n          __exec.call(loader, load);\n\n        if (!load.metadata.entry && !load.metadata.bundle)\n          throw new Error(load.name + ' detected as ' + load.metadata.format + ' but didn\\'t execute.');\n\n        entry = load.metadata.entry;\n\n        // support metadata deps for System.register\n        if (entry && load.metadata.deps)\n          entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // named bundles are just an empty module\n      if (!entry) {\n        entry = createEntry();\n        entry.deps = load.metadata.deps;\n        entry.execute = function() {};\n      }\n\n      // place this module onto defined for circular references\n      loader.defined[load.name] = entry;\n      \n      var grouped = group(entry.deps);\n      \n      entry.deps = grouped.names;\n      entry.originalIndices = grouped.indices;\n      entry.name = load.name;\n      entry.esmExports = load.metadata.esmExports !== false;\n\n      // first, normalize all dependencies\n      var normalizePromises = [];\n      for (var i = 0, l = entry.deps.length; i < l; i++)\n        normalizePromises.push(Promise.resolve(loader.normalize(entry.deps[i], load.name)));\n\n      return Promise.all(normalizePromises).then(function(normalizedDeps) {\n\n        entry.normalizedDeps = normalizedDeps;\n\n        return {\n          deps: entry.deps,\n          execute: function() {\n            // recursively ensure that the module and all its \n            // dependencies are linked (with dependency group handling)\n            link(load.name, loader);\n\n            // now handle dependency execution in correct order\n            ensureEvaluated(load.name, [], loader);\n\n            // remove from the registry\n            loader.defined[load.name] = undefined;\n\n            // return the defined module object\n            return loader.newModule(entry.declarative ? entry.module.exports : entry.esModule);\n          }\n        };\n      });\n    };\n  });\n})();\n/*\n * Extension to detect ES6 and auto-load Traceur or Babel for processing\n */\n(function() {\n  // good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case\n  var esmRegEx = /(^\\s*|[}\\);\\n]\\s*)(import\\s+(['\"]|(\\*\\s+as\\s+)?[^\"'\\(\\)\\n;]+\\s+from\\s+['\"]|\\{)|export\\s+\\*\\s+from\\s+[\"']|export\\s+(\\{|default|function|class|var|const|let|async\\s+function))/;\n\n  var traceurRuntimeRegEx = /\\$traceurRuntime\\s*\\./;\n  var babelHelpersRegEx = /babelHelpers\\s*\\./;\n\n  hook('translate', function(translate) {\n    return function(load) {\n      var loader = this;\n      return translate.call(loader, load)\n      .then(function(source) {\n        // detect & transpile ES6\n        if (load.metadata.format == 'esm' || load.metadata.format == 'es6' || !load.metadata.format && loader.transpiler !== false && source.match(esmRegEx)) {\n          if (load.metadata.format == 'es6')\n            warn.call(loader, 'Module ' + load.name + ' has metadata setting its format to \"es6\", which is deprecated.\\nThis should be updated to \"esm\".');\n\n          load.metadata.format = 'esm';\n\n          if (loader.transpiler === false) {\n            // we accept translation to esm for builds though to enable eg rollup optimizations\n            if (loader.builder)\n              return source;\n            throw new TypeError('Unable to dynamically transpile ES module as SystemJS.transpiler set to false.');\n          }\n\n          // setting _loader.loadedTranspiler = false tells the next block to\n          // do checks for setting transpiler metadata\n          loader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;\n          if (loader.pluginLoader)\n            loader.pluginLoader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;\n\n          // do transpilation\n          return (loader._loader.transpilerPromise || (\n            loader._loader.transpilerPromise = Promise.resolve(\n              __global[loader.transpiler == 'typescript' ? 'ts' : loader.transpiler] || (loader.pluginLoader || loader)['import'](loader.transpiler)\n          ))).then(function(transpiler) {\n            loader._loader.loadedTranspilerRuntime = true;\n\n            // translate hooks means this is a transpiler plugin instead of a raw implementation\n            if (transpiler.translate) {\n              // if transpiler is the same as the plugin loader, then don't run twice\n              if (transpiler == load.metadata.loaderModule)\n                return load.source;\n\n              // convert the source map into an object for transpilation chaining\n              if (typeof load.metadata.sourceMap == 'string')\n                load.metadata.sourceMap = JSON.parse(load.metadata.sourceMap);\n\n              return Promise.resolve(transpiler.translate.call(loader, load))\n              .then(function(source) {\n                // sanitize sourceMap if an object not a JSON string\n                var sourceMap = load.metadata.sourceMap;\n                if (sourceMap && typeof sourceMap == 'object') {\n                  var originalName = load.name.split('!')[0];\n                  \n                  // force set the filename of the original file\n                  sourceMap.file = originalName + '!transpiled';\n\n                  // force set the sources list if only one source\n                  if (!sourceMap.sources || sourceMap.sources.length <= 1)\n                    sourceMap.sources = [originalName];\n                }\n\n                if (load.metadata.format == 'esm' && !loader.builder && detectRegisterFormat(source))\n                  load.metadata.format = 'register';\n                return source;\n              });\n            }\n\n            // legacy builder support\n            if (loader.builder)\n              load.metadata.originalSource = load.source;\n            \n            // defined in es6-module-loader/src/transpile.js\n            return transpile.call(loader, load)\n            .then(function(source) {\n              // clear sourceMap as transpiler embeds it\n              load.metadata.sourceMap = undefined;\n              return source;\n            });            \n          });\n        }\n\n        // skip transpiler and transpiler runtime loading when transpiler is disabled\n        if (loader.transpiler === false)\n          return source;\n\n        // load the transpiler correctly\n        if (loader._loader.loadedTranspiler === false && (loader.transpiler == 'traceur' || loader.transpiler == 'typescript' || loader.transpiler == 'babel')\n            && load.name == loader.normalizeSync(loader.transpiler)) {\n\n          // always load transpiler as a global\n          if (source.length > 100 && !load.metadata.format) {\n            load.metadata.format = 'global';\n\n            if (loader.transpiler === 'traceur')\n              load.metadata.exports = 'traceur';\n            if (loader.transpiler === 'typescript')\n              load.metadata.exports = 'ts';\n          }\n\n          loader._loader.loadedTranspiler = true;\n        }\n\n        // load the transpiler runtime correctly\n        if (loader._loader.loadedTranspilerRuntime === false) {\n          if (load.name == loader.normalizeSync('traceur-runtime')\n              || load.name == loader.normalizeSync('babel/external-helpers*')) {\n            if (source.length > 100)\n              load.metadata.format = load.metadata.format || 'global';\n\n            loader._loader.loadedTranspilerRuntime = true;\n          }\n        }\n\n        // detect transpiler runtime usage to load runtimes\n        if ((load.metadata.format == 'register' || load.metadata.bundle) && loader._loader.loadedTranspilerRuntime !== true) {\n          if (!__global.$traceurRuntime && load.source.match(traceurRuntimeRegEx)) {\n            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;\n            return loader['import']('traceur-runtime').then(function() {\n              return source;\n            });\n          }\n          if (!__global.babelHelpers && load.source.match(babelHelpersRegEx)) {\n            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;\n            return loader['import']('babel/external-helpers').then(function() {\n              return source;\n            });\n          }\n        }\n\n        return source;\n      });\n    };\n  });\n\n})();\n/*\n  SystemJS Global Format\n\n  Supports\n    metadata.deps\n    metadata.globals\n    metadata.exports\n\n  Without metadata.exports, detects writes to the global object.\n*/\nvar __globalName = typeof self != 'undefined' ? 'self' : 'global';\n\nhook('fetch', function(fetch) {\n  return function(load) {\n    if (load.metadata.exports && !load.metadata.format)\n      load.metadata.format = 'global';\n    return fetch.call(this, load);\n  };\n});\n\n// ideally we could support script loading for globals, but the issue with that is that\n// we can't do it with AMD support side-by-side since AMD support means defining the\n// global define, and global support means not definining it, yet we don't have any hook\n// into the \"pre-execution\" phase of a script tag being loaded to handle both cases\nhook('instantiate', function(instantiate) {\n  return function(load) {\n    var loader = this;\n\n    if (!load.metadata.format)\n      load.metadata.format = 'global';\n\n    // global is a fallback module format\n    if (load.metadata.format == 'global' && !load.metadata.registered) {\n\n      var entry = createEntry();\n\n      load.metadata.entry = entry;\n\n      entry.deps = [];\n\n      for (var g in load.metadata.globals) {\n        var gl = load.metadata.globals[g];\n        if (gl)\n          entry.deps.push(gl);\n      }\n\n      entry.execute = function(require, exports, module) {\n\n        var globals;\n        if (load.metadata.globals) {\n          globals = {};\n          for (var g in load.metadata.globals)\n            if (load.metadata.globals[g])\n              globals[g] = require(load.metadata.globals[g]);\n        }\n        \n        var exportName = load.metadata.exports;\n\n        if (exportName)\n          load.source += '\\n' + __globalName + '[\"' + exportName + '\"] = ' + exportName + ';';\n\n        var retrieveGlobal = loader.get('@@global-helpers').prepareGlobal(module.id, exportName, globals);\n\n        __exec.call(loader, load);\n\n        return retrieveGlobal();\n      }\n    }\n    return instantiate.call(this, load);\n  };\n});\nhook('reduceRegister_', function(reduceRegister) {\n  return function(load, register) {\n    if (register || !load.metadata.exports)\n      return reduceRegister.call(this, load, register);\n\n    load.metadata.format = 'global';\n    var entry = load.metadata.entry = createEntry();\n    entry.deps = load.metadata.deps;\n    var globalValue = readMemberExpression(load.metadata.exports, __global);\n    entry.execute = function() {\n      return globalValue;\n    };\n  };\n});\n\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(loader);\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    // bare minimum ignores for IE8\n    var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external', \n      'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];\n\n    var globalSnapshot;\n\n    function forEachGlobal(callback) {\n      if (Object.keys)\n        Object.keys(__global).forEach(callback);\n      else\n        for (var g in __global) {\n          if (!hasOwnProperty.call(__global, g))\n            continue;\n          callback(g);\n        }\n    }\n\n    function forEachGlobalValue(callback) {\n      forEachGlobal(function(globalName) {\n        if (indexOf.call(ignoredGlobalProps, globalName) != -1)\n          return;\n        try {\n          var value = __global[globalName];\n        }\n        catch (e) {\n          ignoredGlobalProps.push(globalName);\n        }\n        callback(globalName, value);\n      });\n    }\n\n    loader.set('@@global-helpers', loader.newModule({\n      prepareGlobal: function(moduleName, exportName, globals) {\n        // disable module detection\n        var curDefine = __global.define;\n        \n        __global.define = undefined;\n        __global.exports = undefined;\n        if (__global.module && __global.module.exports)\n          __global.module = undefined;\n\n        // set globals\n        var oldGlobals;\n        if (globals) {\n          oldGlobals = {};\n          for (var g in globals) {\n            oldGlobals[g] = __global[g];\n            __global[g] = globals[g];\n          }\n        }\n\n        // store a complete copy of the global object in order to detect changes\n        if (!exportName) {\n          globalSnapshot = {};\n\n          forEachGlobalValue(function(name, value) {\n            globalSnapshot[name] = value;\n          });\n        }\n\n        // return function to retrieve global\n        return function() {\n          var globalValue;\n\n          if (exportName) {\n            globalValue = readMemberExpression(exportName, __global);\n          }\n          else {\n            var singleGlobal;\n            var multipleExports;\n            var exports = {};\n\n            forEachGlobalValue(function(name, value) {\n              if (globalSnapshot[name] === value)\n                return;\n              if (typeof value == 'undefined')\n                return;\n              exports[name] = value;\n\n              if (typeof singleGlobal != 'undefined') {\n                if (!multipleExports && singleGlobal !== value)\n                  multipleExports = true;\n              }\n              else {\n                singleGlobal = value;\n              }\n            });\n            globalValue = multipleExports ? exports : singleGlobal;\n          }\n\n          // revert globals\n          if (oldGlobals) {\n            for (var g in oldGlobals)\n              __global[g] = oldGlobals[g];\n          }\n          __global.define = curDefine;\n\n          return globalValue;\n        };\n      }\n    }));\n  };\n});\n/*\n  SystemJS CommonJS Format\n*/\n(function() {\n  // CJS Module Format\n  // require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...\n  var cjsExportsRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])(exports\\s*(\\[['\"]|\\.)|module(\\.exports|\\['exports'\\]|\\[\"exports\"\\])\\s*(\\[['\"]|[=,\\.]))/;\n  // RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\n  var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*')\\s*\\)/g;\n  var commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n\n  var stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n  function getCJSDeps(source) {\n    cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\n\n    var deps = [];\n\n    var match;\n\n    // track string and comment locations for unminified source    \n    var stringLocations = [], commentLocations = [];\n\n    function inLocation(locations, match) {\n      for (var i = 0; i < locations.length; i++)\n        if (locations[i][0] < match.index && locations[i][1] > match.index)\n          return true;\n      return false;\n    }\n\n    if (source.length / source.split('\\n').length < 200) {\n      while (match = stringRegEx.exec(source))\n        stringLocations.push([match.index, match.index + match[0].length]);\n      \n      while (match = commentRegEx.exec(source)) {\n        // only track comments not starting in strings\n        if (!inLocation(stringLocations, match))\n          commentLocations.push([match.index, match.index + match[0].length]);\n      }\n    }\n\n    while (match = cjsRequireRegEx.exec(source)) {\n      // ensure we're not within a string or comment location\n      if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\n        var dep = match[1].substr(1, match[1].length - 2);\n        // skip cases like require('\" + file + \"')\n        if (dep.match(/\"|'/))\n          continue;\n        // trailing slash requires are removed as they don't map mains in SystemJS\n        if (dep[dep.length - 1] == '/')\n          dep = dep.substr(0, dep.length - 1);\n        deps.push(dep);\n      }\n    }\n\n    return deps;\n  }\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      if (!load.metadata.format) {\n        cjsExportsRegEx.lastIndex = 0;\n        cjsRequireRegEx.lastIndex = 0;\n        if (cjsRequireRegEx.exec(load.source) || cjsExportsRegEx.exec(load.source))\n          load.metadata.format = 'cjs';\n      }\n\n      if (load.metadata.format == 'cjs') {\n        var metaDeps = load.metadata.deps;\n        var deps = load.metadata.cjsRequireDetection === false ? [] : getCJSDeps(load.source);\n\n        for (var g in load.metadata.globals)\n          if (load.metadata.globals[g])\n            deps.push(load.metadata.globals[g]);\n\n        var entry = createEntry();\n\n        load.metadata.entry = entry;\n\n        entry.deps = deps;\n        entry.executingRequire = true;\n        entry.execute = function(_require, exports, module) {\n          function require(name) {\n            if (name[name.length - 1] == '/')\n              name = name.substr(0, name.length - 1);\n            return _require.apply(this, arguments);\n          }\n\n          // ensure meta deps execute first\n          for (var i = 0; i < metaDeps.length; i++)\n            require(metaDeps[i]);\n\n          // disable AMD detection\n          var define = __global.define;\n          __global.define = undefined;\n\n          var pathVars = loader.get('@@cjs-helpers').getPathVars(module.id);\n\n          __global.__cjsWrapper = {\n            exports: exports,\n            args: [require, exports, module, pathVars.filename, pathVars.dirname, __global, __global]\n          };\n\n          var globals = '';\n          if (load.metadata.globals) {\n            for (var g in load.metadata.globals)\n              globals += 'var ' + g + ' = require(\"' + load.metadata.globals[g] + '\");';\n          }\n\n          load.source = \"(function(require, exports, module, __filename, __dirname, global, GLOBAL) {\" + globals\n              + load.source + \"\\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);\";\n\n          __exec.call(loader, load);\n\n          __global.__cjsWrapper = undefined;\n          __global.define = define;\n        };\n      }\n\n      return instantiate.call(loader, load);\n    };\n  });\n})();\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(loader);\n\n    if (typeof window != 'undefined' && typeof document != 'undefined' && window.location)\n      var windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n\n    loader.set('@@cjs-helpers', loader.newModule({\n      getPathVars: function(moduleId) {\n        // remove any plugin syntax\n        var pluginIndex = moduleId.lastIndexOf('!');\n        var filename;\n        if (pluginIndex != -1)\n          filename = moduleId.substr(0, pluginIndex);\n        else\n          filename = moduleId;\n\n        var dirname = filename.split('/');\n        dirname.pop();\n        dirname = dirname.join('/');\n\n        if (filename.substr(0, 8) == 'file:///') {\n          filename = filename.substr(7);\n          dirname = dirname.substr(7);\n\n          // on windows remove leading '/'\n          if (isWindows) {\n            filename = filename.substr(1);\n            dirname = dirname.substr(1);\n          }\n        }\n        else if (windowOrigin && filename.substr(0, windowOrigin.length) === windowOrigin) {\n          filename = filename.substr(windowOrigin.length);\n          dirname = dirname.substr(windowOrigin.length);\n        }\n\n        return {\n          filename: filename,\n          dirname: dirname\n        };\n      }\n    }))\n  };\n});/*\n * AMD Helper function module\n * Separated into its own file as this is the part needed for full AMD support in SFX builds\n * NB since implementations have now diverged this can be merged back with amd.js\n */\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(this);\n\n    var commentRegEx = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n    var cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\n    var cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\n    var fnBracketRegEx = /\\(([^\\)]*)\\)/;\n    var wsRegEx = /^\\s+|\\s+$/g;\n    \n    var requireRegExs = {};\n\n    function getCJSDeps(source, requireIndex) {\n\n      // remove comments\n      source = source.replace(commentRegEx, '');\n\n      // determine the require alias\n      var params = source.match(fnBracketRegEx);\n      var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n      // find or generate the regex for this requireAlias\n      var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n      requireRegEx.lastIndex = 0;\n\n      var deps = [];\n\n      var match;\n      while (match = requireRegEx.exec(source))\n        deps.push(match[2] || match[3]);\n\n      return deps;\n    }\n\n    /*\n      AMD-compatible require\n      To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n    */\n    function require(names, callback, errback, referer) {\n      // in amd, first arg can be a config object... we just ignore\n      if (typeof names == 'object' && !(names instanceof Array))\n        return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n      // amd require\n      if (typeof names == 'string' && typeof callback == 'function')\n        names = [names];\n      if (names instanceof Array) {\n        var dynamicRequires = [];\n        for (var i = 0; i < names.length; i++)\n          dynamicRequires.push(loader['import'](names[i], referer));\n        Promise.all(dynamicRequires).then(function(modules) {\n          if (callback)\n            callback.apply(null, modules);\n        }, errback);\n      }\n\n      // commonjs require\n      else if (typeof names == 'string') {\n        var defaultJSExtension = loader.defaultJSExtensions && names.substr(names.length - 3, 3) != '.js';\n        var normalized = loader.decanonicalize(names, referer);\n        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) == '.js')\n          normalized = normalized.substr(0, normalized.length - 3);\n        var module = loader.get(normalized);\n        if (!module)\n          throw new Error('Module not already loaded loading \"' + names + '\" from \"' + referer + '\".');\n        return module.__useDefault ? module['default'] : module;\n      }\n\n      else\n        throw new TypeError('Invalid require');\n    }\n\n    function define(name, deps, factory) {\n      if (typeof name != 'string') {\n        factory = deps;\n        deps = name;\n        name = null;\n      }\n      if (!(deps instanceof Array)) {\n        factory = deps;\n        deps = ['require', 'exports', 'module'].splice(0, factory.length);\n      }\n\n      if (typeof factory != 'function')\n        factory = (function(factory) {\n          return function() { return factory; }\n        })(factory);\n\n      // in IE8, a trailing comma becomes a trailing undefined entry\n      if (deps[deps.length - 1] === undefined)\n        deps.pop();\n\n      // remove system dependencies\n      var requireIndex, exportsIndex, moduleIndex;\n      \n      if ((requireIndex = indexOf.call(deps, 'require')) != -1) {\n        \n        deps.splice(requireIndex, 1);\n\n        // only trace cjs requires for non-named\n        // named defines assume the trace has already been done\n        if (!name)\n          deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));\n      }\n\n      if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)\n        deps.splice(exportsIndex, 1);\n      \n      if ((moduleIndex = indexOf.call(deps, 'module')) != -1)\n        deps.splice(moduleIndex, 1);\n\n      function execute(req, exports, module) {\n        var depValues = [];\n        for (var i = 0; i < deps.length; i++)\n          depValues.push(req(deps[i]));\n\n        module.uri = module.id;\n\n        module.config = function() {};\n\n        // add back in system dependencies\n        if (moduleIndex != -1)\n          depValues.splice(moduleIndex, 0, module);\n        \n        if (exportsIndex != -1)\n          depValues.splice(exportsIndex, 0, exports);\n        \n        if (requireIndex != -1) {\n          function contextualRequire(names, callback, errback) {\n            if (typeof names == 'string' && typeof callback != 'function')\n              return req(names);\n            return require.call(loader, names, callback, errback, module.id);\n          }\n          contextualRequire.toUrl = function(name) {\n            // normalize without defaultJSExtensions\n            var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n            var url = loader.decanonicalize(name, module.id);\n            if (defaultJSExtension && url.substr(url.length - 3, 3) == '.js')\n              url = url.substr(0, url.length - 3);\n            return url;\n          };\n          depValues.splice(requireIndex, 0, contextualRequire);\n        }\n\n        // set global require to AMD require\n        var curRequire = __global.require;\n        __global.require = require;\n\n        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);\n\n        __global.require = curRequire;\n\n        if (typeof output == 'undefined' && module)\n          output = module.exports;\n\n        if (typeof output != 'undefined')\n          return output;\n      }\n\n      var entry = createEntry();\n      entry.name = name && (loader.decanonicalize || loader.normalize).call(loader, name);\n      entry.deps = deps;\n      entry.execute = execute;\n\n      loader.pushRegister_({\n        amd: true,\n        entry: entry\n      });\n    }\n    define.amd = {};\n\n    // reduction function to attach defines to a load record\n    hook('reduceRegister_', function(reduceRegister) {\n      return function(load, register) {\n        // only handle AMD registers here\n        if (!register || !register.amd)\n          return reduceRegister.call(this, load, register);\n\n        var curMeta = load && load.metadata;\n        var entry = register.entry;\n\n        if (curMeta)\n          curMeta.format = 'amd';\n\n        // anonymous define\n        if (!entry.name) {\n          if (!curMeta)\n            throw new TypeError('Unexpected anonymous AMD define.');\n\n          // already defined anonymously -> throw\n          if (curMeta.entry)\n            throw new TypeError('Multiple defines for anonymous module ' + load.name);\n          \n          curMeta.entry = entry;\n        }\n        // named define\n        else {\n          // if we don't have any other defines, \n          // then let this be an anonymous define\n          // this is just to support single modules of the form:\n          // define('jquery')\n          // still loading anonymously\n          // because it is done widely enough to be useful\n          // as soon as there is more than one define, this gets removed though\n          if (curMeta) {\n            if (!curMeta.entry && !curMeta.bundle)\n              curMeta.entry = entry;\n            else\n              curMeta.entry = undefined;\n\n            // note this is now a bundle\n            curMeta.bundle = true;\n          }\n\n          // define the module through the register registry\n          if (!(entry.name in this.defined))\n            this.defined[entry.name] = entry;\n        }\n      };\n    });\n\n    // adds define as a global (potentially just temporarily)\n    function createDefine() {\n      // ensure no NodeJS environment detection\n      var oldModule = __global.module;\n      var oldExports = __global.exports;\n      var oldDefine = __global.define;\n\n      __global.module = undefined;\n      __global.exports = undefined;\n      __global.define = define;\n\n      return function() {\n        __global.define = oldDefine;\n        __global.module = oldModule;\n        __global.exports = oldExports;\n      };\n    }\n\n    loader.set('@@amd-helpers', loader.newModule({\n      createDefine: createDefine,\n      require: require,\n      define: define\n    }));\n    loader.amdDefine = define;\n    loader.amdRequire = require;\n  };\n});/*\n  SystemJS AMD Format\n*/\n(function() {\n  // AMD Module Format Detection RegEx\n  // define([.., .., ..], ...)\n  // define(varName); || define(function(require, exports) {}); || define({})\n  var amdRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])define\\s*\\(\\s*(\"[^\"]+\"\\s*,\\s*|'[^']+'\\s*,\\s*)?\\s*(\\[(\\s*((\"[^\"]+\"|'[^']+')\\s*,|\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*(\\s*(\"[^\"]+\"|'[^']+')\\s*,?)?(\\s*(\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*\\s*\\]|function\\s*|{|[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*\\))/;\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      // script load implies define global leak\n      if (load.metadata.scriptLoad && isBrowser)\n        this.get('@@amd-helpers').createDefine();\n      return fetch.call(this, load);\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      \n      if (load.metadata.format == 'amd' || !load.metadata.format && load.source.match(amdRegEx)) {\n        load.metadata.format = 'amd';\n        \n        if (!loader.builder && loader.execute !== false) {\n          var removeDefine = this.get('@@amd-helpers').createDefine();\n\n          try {\n            __exec.call(loader, load);\n          }\n          finally {\n            removeDefine();\n          }\n\n          if (!load.metadata.entry && !load.metadata.bundle)\n            throw new TypeError('AMD module ' + load.name + ' did not define');\n        }\n        else {\n          load.metadata.execute = function() {\n            return load.metadata.builderExecute.apply(this, arguments);\n          };\n        }\n      }\n\n      return instantiate.call(loader, load);\n    };\n  });\n\n})();\n/*\n  SystemJS Loader Plugin Support\n\n  Supports plugin loader syntax with \"!\", or via metadata.loader\n\n  The plugin name is loaded as a module itself, and can override standard loader hooks\n  for the plugin resource. See the plugin section of the systemjs readme.\n*/\n\n(function() {\n  function getParentName(loader, parentName) {\n    // if parent is a plugin, normalize against the parent plugin argument only\n    if (parentName) {\n      var parentPluginIndex;\n      if (loader.pluginFirst) {\n        if ((parentPluginIndex = parentName.lastIndexOf('!')) != -1)\n          return parentName.substr(parentPluginIndex + 1);\n      }\n      else {\n        if ((parentPluginIndex = parentName.indexOf('!')) != -1)\n          return parentName.substr(0, parentPluginIndex);\n      }\n\n      return parentName;\n    }\n  }\n\n  function parsePlugin(loader, name) {\n    var argumentName;\n    var pluginName;\n\n    var pluginIndex = name.lastIndexOf('!');\n\n    if (pluginIndex == -1)\n      return;\n\n    if (loader.pluginFirst) {\n      argumentName = name.substr(pluginIndex + 1);\n      pluginName = name.substr(0, pluginIndex);\n    }\n    else {\n      argumentName = name.substr(0, pluginIndex);\n      pluginName = name.substr(pluginIndex + 1) || argumentName.substr(argumentName.lastIndexOf('.') + 1);\n    }\n\n    return {\n      argument: argumentName,\n      plugin: pluginName\n    };\n  }\n\n  // put name back together after parts have been normalized\n  function combinePluginParts(loader, argumentName, pluginName, defaultExtension) {\n    if (defaultExtension && argumentName.substr(argumentName.length - 3, 3) == '.js')\n      argumentName = argumentName.substr(0, argumentName.length - 3);\n\n    if (loader.pluginFirst) {\n      return pluginName + '!' + argumentName;\n    }\n    else {\n      return argumentName + '!' + pluginName;\n    }\n  }\n\n  // note if normalize will add a default js extension\n  // if so, remove for backwards compat\n  // this is strange and sucks, but will be deprecated\n  function checkDefaultExtension(loader, arg) {\n    return loader.defaultJSExtensions && arg.substr(arg.length - 3, 3) != '.js'; \n  }\n\n  function createNormalizeSync(normalizeSync) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n      \n      parentName = getParentName(this, parentName);\n      var parsed = parsePlugin(loader, name);\n\n      if (!parsed)\n        return normalizeSync.call(this, name, parentName, isPlugin);\n\n      // if this is a plugin, normalize the plugin name and the argument\n      var argumentName = loader.normalizeSync(parsed.argument, parentName, true);\n      var pluginName = loader.normalizeSync(parsed.plugin, parentName, true);\n      return combinePluginParts(loader, argumentName, pluginName, checkDefaultExtension(loader, parsed.argument));\n    };\n  }\n  \n  hook('decanonicalize', createNormalizeSync);\n  hook('normalizeSync', createNormalizeSync);\n\n  hook('normalize', function(normalize) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n\n      parentName = getParentName(this, parentName);\n\n      var parsed = parsePlugin(loader, name);\n\n      if (!parsed)\n        return normalize.call(loader, name, parentName, isPlugin);\n\n      return Promise.all([\n        loader.normalize(parsed.argument, parentName, true),\n        loader.normalize(parsed.plugin, parentName)\n      ])\n      .then(function(normalized) {\n        return combinePluginParts(loader, normalized[0], normalized[1], checkDefaultExtension(loader, parsed.argument));\n      });\n    }\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n\n      var name = load.name;\n\n      // plugin syntax\n      var pluginSyntaxIndex;\n      if (loader.pluginFirst) {\n        if ((pluginSyntaxIndex = name.indexOf('!')) != -1) {\n          load.metadata.loader = name.substr(0, pluginSyntaxIndex);\n          load.name = name.substr(pluginSyntaxIndex + 1);\n        }\n      }\n      else {\n        if ((pluginSyntaxIndex = name.lastIndexOf('!')) != -1) {\n          load.metadata.loader = name.substr(pluginSyntaxIndex + 1);\n          load.name = name.substr(0, pluginSyntaxIndex);\n        }\n      }\n\n      return locate.call(loader, load)\n      .then(function(address) {\n        var plugin = load.metadata.loader;\n\n        if (!plugin)\n          return address;\n\n        // only fetch the plugin itself if this name isn't defined\n        if (loader.defined && loader.defined[name])\n          return address;\n\n        var pluginLoader = loader.pluginLoader || loader;\n\n        // load the plugin module and run standard locate\n        return pluginLoader['import'](plugin)\n        .then(function(loaderModule) {\n          // store the plugin module itself on the metadata\n          load.metadata.loaderModule = loaderModule;\n\n          load.address = address;\n          if (loaderModule.locate)\n            return loaderModule.locate.call(loader, load);\n\n          return address;\n        });\n      });\n    };\n  });\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var loader = this;\n      if (load.metadata.loaderModule && load.metadata.loaderModule.fetch && load.metadata.format != 'defined') {\n        load.metadata.scriptLoad = false;\n        return load.metadata.loaderModule.fetch.call(loader, load, function(load) {\n          return fetch.call(loader, load);\n        });\n      }\n      else {\n        return fetch.call(loader, load);\n      }\n    };\n  });\n\n  hook('translate', function(translate) {\n    return function(load) {\n      var loader = this;\n      if (load.metadata.loaderModule && load.metadata.loaderModule.translate && load.metadata.format != 'defined') {\n        return Promise.resolve(load.metadata.loaderModule.translate.call(loader, load)).then(function(result) {\n          var sourceMap = load.metadata.sourceMap;\n\n          // sanitize sourceMap if an object not a JSON string\n          if (sourceMap) {\n            if (typeof sourceMap != 'object')\n              throw new Error('load.metadata.sourceMap must be set to an object.');\n\n            var originalName = load.name.split('!')[0];\n            \n            // force set the filename of the original file\n            sourceMap.file = originalName + '!transpiled';\n\n            // force set the sources list if only one source\n            if (!sourceMap.sources || sourceMap.sources.length <= 1)\n              sourceMap.sources = [originalName];\n          }\n\n          // if running on file:/// URLs, sourcesContent is necessary\n          // load.metadata.sourceMap.sourcesContent = [load.source];\n\n          if (typeof result == 'string')\n            load.source = result;\n          else\n            warn.call(this, 'Plugin ' + load.metadata.loader + ' should return the source in translate, instead of setting load.source directly. This support will be deprecated.');\n\n          return translate.call(loader, load);\n        });\n      }\n      else {\n        return translate.call(loader, load);\n      }\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n\n      if (load.metadata.loaderModule && load.metadata.loaderModule.instantiate && !loader.builder && load.metadata.format != 'defined')\n        return Promise.resolve(load.metadata.loaderModule.instantiate.call(loader, load)).then(function(result) {\n          load.metadata.entry = createEntry();\n          load.metadata.entry.execute = function() {\n            return result;\n          }\n          load.metadata.entry.deps = load.metadata.deps;\n          load.metadata.format = 'defined';\n          return instantiate.call(loader, load);\n        });\n      else\n        return instantiate.call(loader, load);\n    };\n  });\n\n})();/*\n * Conditions Extension\n *\n *   Allows a condition module to alter the resolution of an import via syntax:\n *\n *     import $ from 'jquery/#{browser}';\n *\n *   Will first load the module 'browser' via `SystemJS.import('browser')` and \n *   take the default export of that module.\n *   If the default export is not a string, an error is thrown.\n * \n *   We then substitute the string into the require to get the conditional resolution\n *   enabling environment-specific variations like:\n * \n *     import $ from 'jquery/ie'\n *     import $ from 'jquery/firefox'\n *     import $ from 'jquery/chrome'\n *     import $ from 'jquery/safari'\n *\n *   It can be useful for a condition module to define multiple conditions.\n *   This can be done via the `|` modifier to specify an export member expression:\n *\n *     import 'jquery/#{./browser.js|grade.version}'\n *\n *   Where the `grade` export `version` member in the `browser.js` module  is substituted.\n *\n *\n * Boolean Conditionals\n *\n *   For polyfill modules, that are used as imports but have no module value,\n *   a binary conditional allows a module not to be loaded at all if not needed:\n *\n *     import 'es5-shim#?./conditions.js|needs-es5shim'\n *\n *   These conditions can also be negated via:\n *     \n *     import 'es5-shim#?~./conditions.js|es6'\n *\n */\n\n  function parseCondition(condition) {\n    var conditionExport, conditionModule, negation;\n\n    var negation = condition[0] == '~';\n    var conditionExportIndex = condition.lastIndexOf('|');\n    if (conditionExportIndex != -1) {\n      conditionExport = condition.substr(conditionExportIndex + 1);\n      conditionModule = condition.substr(negation, conditionExportIndex - negation) || '@system-env';\n    }\n    else {\n      conditionExport = null;\n      conditionModule = condition.substr(negation);\n    }\n\n    return {\n      module: conditionModule,\n      prop: conditionExport,\n      negate: negation\n    };\n  }\n\n  function serializeCondition(conditionObj) {\n    return (conditionObj.negate ? '~' : '') + conditionObj.module + (conditionObj.prop ? '|' + conditionObj.prop : '');\n  }\n\n  function resolveCondition(conditionObj, parentName, bool) {\n    return this['import'](conditionObj.module, parentName)\n    .then(function(m) {\n      if (conditionObj.prop)\n        m = readMemberExpression(conditionObj.prop, m);\n      else if (typeof m == 'object' && m + '' == 'Module')\n        m = m['default'];\n\n      if (bool && typeof m != 'boolean')\n        throw new TypeError('Condition ' + serializeCondition(conditionObj) + ' did not resolve to a boolean.');\n\n      return conditionObj.negate ? !m : m;\n    });\n  }\n\n  var interpolationRegEx = /#\\{[^\\}]+\\}/;\n  function interpolateConditional(name, parentName) {\n    // first we normalize the conditional\n    var conditionalMatch = name.match(interpolationRegEx);\n\n    if (!conditionalMatch)\n      return Promise.resolve(name);\n\n    var conditionObj = parseCondition(conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));\n\n    // in builds, return normalized conditional\n    if (this.builder)\n      return this['normalize'](conditionObj.module, parentName)\n      .then(function(conditionModule) {\n        conditionObj.module = conditionModule;\n        return name.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');\n      });\n\n    return resolveCondition.call(this, conditionObj, parentName, false)\n    .then(function(conditionValue) {\n      if (typeof conditionValue !== 'string')\n        throw new TypeError('The condition value for ' + name + ' doesn\\'t resolve to a string.');\n\n      if (conditionValue.indexOf('/') != -1)\n        throw new TypeError('Unabled to interpolate conditional ' + name + (parentName ? ' in ' + parentName : '') + '\\n\\tThe condition value ' + conditionValue + ' cannot contain a \"/\" separator.');\n\n      return name.replace(interpolationRegEx, conditionValue);\n    });\n  }\n\n  function booleanConditional(name, parentName) {\n    // first we normalize the conditional\n    var booleanIndex = name.lastIndexOf('#?');\n\n    if (booleanIndex == -1)\n      return Promise.resolve(name);\n\n    var conditionObj = parseCondition(name.substr(booleanIndex + 2));\n\n    // in builds, return normalized conditional\n    if (this.builder)\n      return this['normalize'](conditionObj.module, parentName)\n      .then(function(conditionModule) {\n        conditionObj.module = conditionModule;\n        return name.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);\n      });\n\n    return resolveCondition.call(this, conditionObj, parentName, true)\n    .then(function(conditionValue) {\n      return conditionValue ? name.substr(0, booleanIndex) : '@empty';\n    });\n  }\n\n  // normalizeSync does not parse conditionals at all although it could\n  hook('normalize', function(normalize) {\n    return function(name, parentName, parentAddress) {\n      var loader = this;\n      return booleanConditional.call(loader, name, parentName)\n      .then(function(name) {\n        return normalize.call(loader, name, parentName, parentAddress);\n      })\n      .then(function(normalized) {\n        return interpolateConditional.call(loader, normalized, parentName);\n      });\n    };\n  });\n/*\n * Alias Extension\n *\n * Allows a module to be a plain copy of another module by module name\n *\n * SystemJS.meta['mybootstrapalias'] = { alias: 'bootstrap' };\n *\n */\n(function() {\n  // aliases\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var alias = load.metadata.alias;\n      var aliasDeps = load.metadata.deps || [];\n      if (alias) {\n        load.metadata.format = 'defined';\n        var entry = createEntry();\n        this.defined[load.name] = entry;\n        entry.declarative = true;\n        entry.deps = aliasDeps.concat([alias]);\n        entry.declare = function(_export) {\n          return {\n            setters: [function(module) {\n              for (var p in module)\n                _export(p, module[p]);\n              if (module.__useDefault)\n                entry.module.exports.__useDefault = true;\n            }],\n            execute: function() {}\n          };\n        };\n        return '';\n      }\n\n      return fetch.call(this, load);\n    };\n  });\n})();/*\n * Meta Extension\n *\n * Sets default metadata on a load record (load.metadata) from\n * loader.metadata via SystemJS.meta function.\n *\n *\n * Also provides an inline meta syntax for module meta in source.\n *\n * Eg:\n *\n * loader.meta({\n *   'my/module': { deps: ['jquery'] }\n *   'my/*': { format: 'amd' }\n * });\n *\n * Which in turn populates loader.metadata.\n *\n * load.metadata.deps and load.metadata.format will then be set\n * for 'my/module'\n *\n * The same meta could be set with a my/module.js file containing:\n *\n * my/module.js\n *   \"format amd\";\n *   \"deps[] jquery\";\n *   \"globals.some value\"\n *   console.log('this is my/module');\n *\n * Configuration meta always takes preference to inline meta.\n *\n * Multiple matches in wildcards are supported and ammend the meta.\n *\n *\n * The benefits of the function form is that paths are URL-normalized\n * supporting say\n *\n * loader.meta({ './app': { format: 'cjs' } });\n *\n * Instead of needing to set against the absolute URL (https://site.com/app.js)\n *\n */\n\n(function() {\n\n  hookConstructor(function(constructor) {\n    return function() {\n      this.meta = {};\n      constructor.call(this);\n    };\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var meta = this.meta;\n      var name = load.name;\n\n      // NB for perf, maybe introduce a fast-path wildcard lookup cache here\n      // which is checked first\n\n      // apply wildcard metas\n      var bestDepth = 0;\n      var wildcardIndex;\n      for (var module in meta) {\n        wildcardIndex = module.indexOf('*');\n        if (wildcardIndex === -1)\n          continue;\n        if (module.substr(0, wildcardIndex) === name.substr(0, wildcardIndex)\n            && module.substr(wildcardIndex + 1) === name.substr(name.length - module.length + wildcardIndex + 1)) {\n          var depth = module.split('/').length;\n          if (depth > bestDepth)\n            bestDepth = depth;\n          extendMeta(load.metadata, meta[module], bestDepth != depth);\n        }\n      }\n\n      // apply exact meta\n      if (meta[name])\n        extendMeta(load.metadata, meta[name]);\n\n      return locate.call(this, load);\n    };\n  });\n\n  // detect any meta header syntax\n  // only set if not already set\n  var metaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)+/;\n  var metaPartRegEx = /\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\/\\/[^\\n]*|\"[^\"]+\"\\s*;?|'[^']+'\\s*;?/g;\n\n  function setMetaProperty(target, p, value) {\n    var pParts = p.split('.');\n    var curPart;\n    while (pParts.length > 1) {\n      curPart = pParts.shift();\n      target = target[curPart] = target[curPart] || {};\n    }\n    curPart = pParts.shift();\n    if (!(curPart in target))\n      target[curPart] = value;\n  }\n\n  hook('translate', function(translate) {\n    return function(load) {\n      // NB meta will be post-translate pending transpiler conversion to plugins\n      var meta = load.source.match(metaRegEx);\n      if (meta) {\n        var metaParts = meta[0].match(metaPartRegEx);\n\n        for (var i = 0; i < metaParts.length; i++) {\n          var curPart = metaParts[i];\n          var len = curPart.length;\n\n          var firstChar = curPart.substr(0, 1);\n          if (curPart.substr(len - 1, 1) == ';')\n            len--;\n\n          if (firstChar != '\"' && firstChar != \"'\")\n            continue;\n\n          var metaString = curPart.substr(1, curPart.length - 3);\n          var metaName = metaString.substr(0, metaString.indexOf(' '));\n\n          if (metaName) {\n            var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);\n\n            if (metaName.substr(metaName.length - 2, 2) == '[]') {\n              metaName = metaName.substr(0, metaName.length - 2);\n              load.metadata[metaName] = load.metadata[metaName] || [];\n              load.metadata[metaName].push(metaValue);\n            }\n            else if (load.metadata[metaName] instanceof Array) {\n              // temporary backwards compat for previous \"deps\" syntax\n              warn.call(this, 'Module ' + load.name + ' contains deprecated \"deps ' + metaValue + '\" meta syntax.\\nThis should be updated to \"deps[] ' + metaValue + '\" for pushing to array meta.');\n              load.metadata[metaName].push(metaValue);\n            }\n            else {\n              setMetaProperty(load.metadata, metaName, metaValue);\n            }\n          }\n          else {\n            load.metadata[metaString] = true;\n          }\n        }\n      }\n\n      return translate.call(this, load);\n    };\n  });\n})();\n/*\n  System bundles\n\n  Allows a bundle module to be specified which will be dynamically \n  loaded before trying to load a given module.\n\n  For example:\n  SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']\n\n  Will result in a load to \"mybundle\" whenever a load to \"jquery\"\n  or \"bootstrap/js/bootstrap\" is made.\n\n  In this way, the bundle becomes the request that provides the module\n*/\n\n(function() {\n  // bundles support (just like RequireJS)\n  // bundle name is module name of bundle itself\n  // bundle is array of modules defined by the bundle\n  // when a module in the bundle is requested, the bundle is loaded instead\n  // of the form SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.bundles = {};\n      this._loader.loadedBundles = {};\n    };\n  });\n\n  // assign bundle metadata for bundle loads\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      var matched = false;\n\n      if (!(load.name in loader.defined))\n        for (var b in loader.bundles) {\n          for (var i = 0; i < loader.bundles[b].length; i++) {\n            var curModule = loader.bundles[b][i];\n\n            if (curModule == load.name) {\n              matched = true;\n              break;\n            }\n\n            // wildcard in bundles does not include / boundaries\n            if (curModule.indexOf('*') != -1) {\n              var parts = curModule.split('*');\n              if (parts.length != 2) {\n                loader.bundles[b].splice(i--, 1);\n                continue;\n              }\n              \n              if (load.name.substring(0, parts[0].length) == parts[0] &&\n                  load.name.substr(load.name.length - parts[1].length, parts[1].length) == parts[1] &&\n                  load.name.substr(parts[0].length, load.name.length - parts[1].length - parts[0].length).indexOf('/') == -1) {\n                matched = true;\n                break;\n              }\n            }\n          }\n\n          if (matched)\n            return loader['import'](b)\n            .then(function() {\n              return locate.call(loader, load);\n            });\n        }\n\n      return locate.call(loader, load);\n    };\n  });\n})();\n/*\n * Dependency Tree Cache\n * \n * Allows a build to pre-populate a dependency trace tree on the loader of \n * the expected dependency tree, to be loaded upfront when requesting the\n * module, avoinding the n round trips latency of module loading, where \n * n is the dependency tree depth.\n *\n * eg:\n * SystemJS.depCache = {\n *  'app': ['normalized', 'deps'],\n *  'normalized': ['another'],\n *  'deps': ['tree']\n * };\n * \n * SystemJS.import('app') \n * // simultaneously starts loading all of:\n * // 'normalized', 'deps', 'another', 'tree'\n * // before \"app\" source is even loaded\n *\n */\n\n(function() {\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.depCache = {};\n    }\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      // load direct deps, in turn will pick up their trace trees\n      var deps = loader.depCache[load.name];\n      if (deps)\n        for (var i = 0; i < deps.length; i++)\n          loader['import'](deps[i], load.name);\n\n      return locate.call(loader, load);\n    };\n  });\n})();\n  \nSystem = new SystemJSLoader();\n\n__global.SystemJS = System;\nSystem.version = '0.19.22 Standard';\n  // -- exporting --\n\n  if (typeof exports === 'object')\n    module.exports = Loader;\n\n  __global.Reflect = __global.Reflect || {};\n  __global.Reflect.Loader = __global.Reflect.Loader || Loader;\n  __global.Reflect.global = __global.Reflect.global || __global;\n  __global.LoaderPolyfill = Loader;\n\n  if (!System) {\n    System = new SystemLoader();\n    System.constructor = SystemLoader;\n  }\n\n  if (typeof exports === 'object')\n    module.exports = System;\n\n  __global.System = System;\n\n})(typeof self != 'undefined' ? self : global);}\n\n// auto-load Promise and URL polyfills if needed in the browser\ntry {\n  var hasURL = typeof URLPolyfill != 'undefined' || new URL('test:///').protocol == 'test:';\n}\ncatch(e) {}\n\nif (typeof Promise === 'undefined' || !hasURL) {\n  // document.write\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n    $__curScript = scripts[scripts.length - 1];\n    var curPath = $__curScript.src;\n    var basePath = curPath.substr(0, curPath.lastIndexOf('/') + 1);\n    window.systemJSBootstrap = bootstrap;\n    document.write(\n      '<' + 'script type=\"text/javascript\" src=\"' + basePath + 'system-polyfills.js\">' + '<' + '/script>'\n    );\n  }\n  // importScripts\n  else if (typeof importScripts !== 'undefined') {\n    var basePath = '';\n    try {\n      throw new Error('_');\n    } catch (e) {\n      e.stack.replace(/(?:at|@).*(http.+):[\\d]+:[\\d]+/, function(m, url) {\n        basePath = url.replace(/\\/[^\\/]*$/, '/');\n      });\n    }\n    importScripts(basePath + 'system-polyfills.js');\n    bootstrap();\n  }\n  else {\n    bootstrap();\n  }\n}\nelse {\n  bootstrap();\n}\n\n\n})();"],"sourceRoot":"/source/"}